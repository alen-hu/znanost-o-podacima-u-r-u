<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="hr" xml:lang="hr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Pridruživanje podataka – Znanost o podacima u R-u</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03_04_brojevi.html" rel="next">
<link href="./03_02_nedostajajuce_vrijednosti.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-86b712c1a9842e5c5be4cb0afbdd663e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #483D8B;
      }
</style>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03_00_transformacija_podataka.html">Transformacija podataka</a></li><li class="breadcrumb-item"><a href="./03_03_pridruzivanje_podataka.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pridruživanje podataka</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03_00_transformacija_podataka.html">Transformacija podataka</a></li><li class="breadcrumb-item"><a href="./03_03_pridruzivanje_podataka.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pridruživanje podataka</span></a></li></ol></nav>
      <div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pridruživanje podataka</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Znanost o podacima u R-u</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Uvod</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Uvod u znanost o podacima</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_01_uvod_u_znanost_o_podacima.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Uvod u znanost o podacima</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Uvoz i uređivanje podataka</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_01_uvoz_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Uvoz podataka u R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_02_uredivanje_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Uređivanje podataka</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03_00_transformacija_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transformacija podataka</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dplyr</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_01_manipulacija_podacima.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulacija podacima</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_02_nedostajajuce_vrijednosti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Nedostajajuće vrijednosti</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_03_pridruzivanje_podataka.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pridruživanje podataka</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_04_brojevi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Brojevi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_05_logicke_vrijednosti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Logičke vrijednosti</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_06_faktori.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Faktori</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_07_nizovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Nizovi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_08_regularni_izrazi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Regularni izrazi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_09_datum_i_vrijeme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Datum i vrijeme</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pridruživanje-podataka-dplyr-paketom" id="toc-pridruživanje-podataka-dplyr-paketom" class="nav-link active" data-scroll-target="#pridruživanje-podataka-dplyr-paketom"><span class="header-section-number">1</span> Pridruživanje podataka <code>dplyr</code> paketom</a>
  <ul class="collapse">
  <li><a href="#mutacijsko-pridruživanje" id="toc-mutacijsko-pridruživanje" class="nav-link" data-scroll-target="#mutacijsko-pridruživanje"><span class="header-section-number">1.1</span> Mutacijsko pridruživanje</a></li>
  <li><a href="#filtrirano-pridruživanje" id="toc-filtrirano-pridruživanje" class="nav-link" data-scroll-target="#filtrirano-pridruživanje"><span class="header-section-number">1.2</span> Filtrirano pridruživanje</a></li>
  </ul></li>
  <li><a href="#dodatne-funkcionalnosti-_join-glagola" id="toc-dodatne-funkcionalnosti-_join-glagola" class="nav-link" data-scroll-target="#dodatne-funkcionalnosti-_join-glagola"><span class="header-section-number">2</span> Dodatne funkcionalnosti <code>*_join()</code> glagola</a>
  <ul class="collapse">
  <li><a href="#organizacija-kodova" id="toc-organizacija-kodova" class="nav-link" data-scroll-target="#organizacija-kodova"><span class="header-section-number">2.1</span> Organizacija kodova</a></li>
  <li><a href="#korištenje-dodatnih-argumenata" id="toc-korištenje-dodatnih-argumenata" class="nav-link" data-scroll-target="#korištenje-dodatnih-argumenata"><span class="header-section-number">2.2</span> Korištenje dodatnih argumenata</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-important no-icon callout-titled" title="Podaci korišteni u dijelu poglavlja">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Podaci korišteni u dijelu poglavlja
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Za potrebe demonstracije različitih tehnika pridruživanja podatkovnih okvira, izvorni podaci o Pokemonima iz <code>pokemon_dataset</code> podatkovnog okvira podjeljeni su na dva manja podatkovna okvira. Podatkovni okvir <code>pokemon_names</code> predstavlja osnovni identifikacijski podatkovni okvir koja sadrži temeljne informacije o Pokemonima. Ovaj okvir uključuje tri varijable: “id”, “name” i “type_1”. Podatkovni okvir <code>pokemon_strength</code> predstavlja tablicu borbenih statistika koja sadrži mjerenja specijalnih sposobnosti Pokemona. Ovaj okvir uključuje četiri varijable: “id”, “name”, “special_attack” i “special_defense”.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
     id name      type_1  
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;   
1     1 bulbasaur grass   
2     2 ivysaur   grass   
3    16 pidgey    normal  
4    19 rattata   normal  
5    25 pikachu   electric</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
     id name      special_attack special_defense
  &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1     1 bulbasaur             65              65
2    19 rattata               25              35
3    25 pikachu               50              50
4    48 venonat               40              55
5   111 rhyhorn               30              30</code></pre>
</div>
</div>
<p>Ovako dizajnirani podatkovni okviri rezultiraju raspodjelom Pokemona u kojoj postoje Pokemoni prisutni u oba podatkovna okvira, Pokemoni koji se nalaze samo u <code>pokemon_names</code> i prisutni samo u <code>pokemon_strength</code> podatkovnom okviru. Ovakva struktura podataka omogućuje da na praktičan način bude demonstrirano kako različite vrste spajanja tretiraju situacije s potpunim i djelomičnim preklapanjem.</p>
</div>
</div>
</div>
<p>Analiza podataka rijetko se oslanja samo na jedan podatkovni okvir. U praksi, podaci o istim istrazivanim podacima često dolaze iz različitih izvora ili su organizirani u više podatkovnih okvira kako bi se olakšalo njihovo upravljanje i ažuriranje. Proces objedinjavanja podataka iz više podatkovnih okvira naziva se <strong>pridruživanje podataka</strong> (engl. <em>data joining</em>). Spajanje omogućuje da iz fragmenata informacija raspoređenih u više tablica sastavimo cjelovitu sliku potrebnu za donošenje zaključaka.</p>
<p>Najjednostavniji način pridruživanja podataka je <code>dplyr</code> paketom koji nudi šest različitih funkcija za spajanje podatkovnih okvira: <code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code>, <code>full_join()</code>, <code>semi_join()</code> i <code>anti_join()</code>. Sve ove funkcije dijele zajednički način rada - primaju dva podatkovna okvira (koji se u dokumentaciji označavaju kao x ili lijevi i y ili desni podatkovni okvir) te vraćaju novi podatkovni okvir kao rezultat spajanja. Razlike među ovim funkcijama očituju se u tome koji se redovi zadržavaju u konačnom rezultatu i kako se tretiraju zapisi koji nemaju odgovarajući par u drugom podatkovnom okviru.</p>
<p>Postoji dvije vrste pridruživanja koje se mogu koristiti <code>dplyr</code> paketom:</p>
<ul>
<li><p><strong>Mutacijsko pridruživanje</strong> (<em>mutating join</em>): Omogućuje kombiniranje varijabli iz dva podatkovna okvira na način da najprije pronalazi odgovarajuće parove zapisa pomoću ključeva, a zatim kopira varijable iz jednog podatkovnog okvira u drugi. Mutacijsko pridruživanje uključuje:</p>
<ul>
<li><p><code>full_join()</code>: Zadržava sve opservacije iz obja podatkovna okvira te, ako nema podudaranja u nekom od njih, onda se to mjesto popunjava s <code>NA</code>, a koristiti se kada želimo zadržati sve podatke iz oba podatkovna okvira bez obzira postoji li podudaranje ili ne.</p></li>
<li><p><code>inner_join()</code>: Zadržava samo opservacije koje imaju odgovarajuće vrijednosti u obja podatkovna okvira, odnosno samo zajedničke za oba podatkovna okvira, a koristi se kada želimo zadržati samo podatke koji su zajednički.</p></li>
<li><p><code>left_join()</code>: Zadržava sva opažanja iz lijevog (prvog) podatkovnog okvira i dodaje odgovarajuće vrijednosti iz desnog (drugog) podatkovnog okvira, a koristiti se kada želimo zadržati sve podatke iz lijevog podatkovnog okvira bez obzira postoji li podudaranje u desnom.</p></li>
<li><p><code>right_join()</code>: Zadržava sva opažanja iz desnog (drugog) podatkovnog okvira i dodaje odgovarajuće vrijednosti iz lijevog (prvog) podatkovnog okvira, a koristiti se kada želimo zadržati sve podatke iz desnog podatkovnog okvira bez obzira postoji li podudaranje u lijevom.</p></li>
</ul></li>
<li><p><strong>Filtrirano pridruživanje</strong> (<em>filtering join</em>) je pridruživanje podataka temeljeno na principu filtriranja. Postoje dvije vrste filtrirnih pridruživanja:</p>
<ul>
<li><p><code>semi_join()</code>: Vraća retke iz prvog podatkovnog okvira koji imaju odgovarajuće vrijednosti u drugom podatkovnom okviru, ali ne dodaje stupce iz drugog podatkovnog okvira, a koristi se kada želimo filtrirati prvi podatkovni okvir prema podacima koji postoje u drugom podatkovnom okviru, ali nas pritom ne zanimaju dodatni stupci iz druge tablice.</p></li>
<li><p><code>anti_join()</code>: Vraća retke iz prvog podatkovnog okvira koji nemaju podudaranje u drugom podatkovnom okviru, a koristi se kada želimo pronaći retke u prvom podatkovnom okviru koji nemaju podudaranje u drugom podatkovnom okviru.</p></li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Glagoli pridruživanja">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Glagoli pridruživanja
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Glagoli iz <code>dplyr</code> paketa za pridruživanje podatkovnih okvira koriste slične argumente. Zajednički argumenti za <code>*_join()</code> glagole su:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code> i <code>y</code></td>
<td>podatkovni okviri za kombiniranje - <code>x</code> predstavlja lijevi podatkovni okvir, a <code>y</code> desni</td>
</tr>
<tr class="even">
<td><code>by</code></td>
<td>kontrolira koje se varijable koriste za podudaranje opažanja u dvije tablice: 1. <code>NULL</code> (zadana vrijednost) koji koristi zajedničke stupce s istim imenima u obje tablice, 2. vektor koji koristi samo neke od zajedničkih varijabli i 3. imenovani vektor, npr. <code>by = c("a" = "b")</code>, ako su imena stupaca različita</td>
</tr>
<tr class="odd">
<td><code>suffx</code></td>
<td>sufiksi koji se dodaju imenima stupaca koji se pojavljuju u obje tablice (moguće je proslijediti vektor sufiksa, jedan za prvi i jedan za drugi podatkovni okvir)</td>
</tr>
<tr class="even">
<td><code>copy</code></td>
<td>što se događa kada podatkovni okviri nisu na istoj lokaciji (npr. jedna je u memoriji, druga u bazi podataka): ako je <code>TRUE</code>, onda će se drugi podatkovni okvir kopirati na istu lokaciju kao prvi, a ako nije, onda će ostati na različitim lokacijama (zadana vrijednost je <code>FALSE</code>)</td>
</tr>
<tr class="odd">
<td><code>keep</code></td>
<td>kontrolira koje varijable se zadržavaju u rezultatu - kada je <code>NULL</code> (zadano), zadržavaju se ključevi samo iz x tabele</td>
</tr>
<tr class="even">
<td><code>na_matches</code></td>
<td>kontrolira kako se tretiraju <code>NA</code> vrijednosti prilikom spajanja: 1. <code>"na"</code> (zadano) - <code>NA</code> vrijednosti se podudaraju s drugim <code>NA</code> vrijednostima međusobno, 2. <code>"never"</code> - <code>NA</code> vrijednosti se ne podudaraju</td>
</tr>
<tr class="odd">
<td><code>multiple</code></td>
<td>kontrolira što se događa kada jedan red iz prvog podatkovnog okvira odgovara više redova iz drugog podatkovnog okvira: 1. <code>"all"</code> (zadano) - zadržavaju se sva podudaranja (može rezultirati više redova nego u originalnoj tabeli), 2. <code>"any"</code> - zadržava se bilo koje od podudaranja (obično prvo), 3. <code>"first"</code> - zadržava se samo prvo podudaranje, 4. <code>"last"</code> - zadržava se samo zadnje podudaranje</td>
</tr>
<tr class="even">
<td><code>unmatched</code></td>
<td>određuje što se događa s redovima koji nemaju podudaranja: 1. <code>"drop"</code> (zadano) - redovi bez podudaranja se uklanjaju (standardno ponašanje inner_join-a), 2. <code>"error"</code> - funkcija će baciti grešku ako postoje redovi bez podudaranja</td>
</tr>
<tr class="odd">
<td><code>relationship</code></td>
<td>omogućuje eksplicitno definiranje očekivane prirode veze između tabela: 1. <code>NULL</code> (zadano) - ne provjerava se tip veze, 2. <code>"one-to-one"</code> - svaki red iz prvog podatkovnog okvira odgovara točno jednom redu iz drugog, 3. <code>"one-to-many"</code> - svaki red iz prvog podatkovnog okvira može odgovarati više podatkovnih okvira iz drugog, 4. <code>"many-to-one"</code> - više redova iz prvog podatkovnog okvira može odgovarati jednom redu iz drugog, 5. <code>"many-to-many"</code> - više redova iz oba podatkovna okvira može se međusobno podudarati</td>
</tr>
</tbody>
</table>
<p>Prilikom strukturiranja kodova, pravila su slična uobičajenima. U prvi se red navodi prvi, odnosno <strong>lijevi podatkovni okvir</strong> kojem se pridružuje drugi. U novi se red piše glagol povezivanja, a podatkovni okvir i glagol povezivanja, kao i eventualni budući glagoli, povezuju se poveznicima.</p>
</div>
</div>
</div>
<section id="pridruživanje-podataka-dplyr-paketom" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="pridruživanje-podataka-dplyr-paketom"><span class="header-section-number">1</span> Pridruživanje podataka <code>dplyr</code> paketom</h2>
<section id="mutacijsko-pridruživanje" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="mutacijsko-pridruživanje"><span class="header-section-number">1.1</span> Mutacijsko pridruživanje</h3>
<p><strong>Mutacijsko pridruživanje</strong> prvi je oblik pridruživanje koje omogućuje kombiniranje varijabli iz dva podatkovna okvira tako da prvo pronalazi parove zapisa pomoću funkcijom određenih ključeva, a zatim kopira varijable iz jednog podatkovnog okvira u drugi. Slično kao glagol <code>mutate()</code>, koristi se za spajanje dodaju nove varijable s desne strane podatkovnog okvira.</p>
<section id="unutarnje-pridruživanje" class="level4" data-number="1.1.1">
<h4 data-number="1.1.1" class="anchored" data-anchor-id="unutarnje-pridruživanje"><span class="header-section-number">1.1.1</span> Unutarnje pridruživanje</h4>
<p>Prvi oblik pridruživanja podatkovnih okvira je je <strong>Unutarnje pridruživanje</strong> kojim se spajaju dvija podatkovna okvira, ali samo unutar zajedničkih opažanja u oba podatkovna okvira. Drugim riječima, u novi se podatkovni okvir uvrštavaju samo ona opažanja zajednička za oba podatkovna okvira. Ono se izvodi glagolom <code>inner_join()</code>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Korištenje glagola <code>inner_join()</code> na primjeru podatkovnih okvira <code>pokemon_names</code> i <code>pokemon_strength</code> vraća samo one Pokemone koji se nalaze u oba podatkovna okvira. U ovom slučaju to je ukupno 7 Pokemona: Bulbasaur, Rattata, Pikachu, Venonat, Rhyhorn, Mewtwo i Blaziken. Svi Pokemoni koji se nalaze samo u <code>pokemon_names</code> ili samo u <code>pokemon_strength</code> biti će isključeni iz ispisa.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unutarnje spajanje - zadržavaju se samo Pokemoni koji postoje u oba podatkovna okvira</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 5
     id name      type_1   special_attack special_defense
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;
1     1 bulbasaur grass                65              65
2    19 rattata   normal               25              35
3    25 pikachu   electric             50              50
4    48 venonat   bug                  40              55
5   111 rhyhorn   ground               30              30
6   150 mewtwo    psychic             154              90
7   257 blaziken  fire                110              70</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="vanjska-pridruživanja" class="level4" data-number="1.1.2">
<h4 data-number="1.1.2" class="anchored" data-anchor-id="vanjska-pridruživanja"><span class="header-section-number">1.1.2</span> Vanjska pridruživanja</h4>
<p>Iste principe možemo primijeniti za <strong>vanjska pridruživanja</strong> koja zadržavaju opažanja koja se pojavljuju u barem jednom od podatkovnih okvira. Ova pridruživanja funkcioniraju dodavanjem dodatnog retka svakom podatkovnom okviru koji ima ključ koji odgovara svim slučajevima kada nijedan drugi ključ ne odgovara, a vrijednosti su popunjene s <code>NA</code>. Postoje tri vrste vanjskih spajanja, a razlikuju se po tome koji podatkovni okvir dobiva dodatni redak s <code>NA</code> vrijednostima: potpuno, lijevo i desno.</p>
<p><strong>Lijevo pridruživanje</strong> zadržava sve zapise iz lijevog ili prvog podatkovnog okvira, odnosno onog koji je među kodovima označen argumentom <code>x</code>. Pritom će svaki redak iz lijevog podatkovnog okvira biti prisutan u rezultatu jer može, u najgorem slučaju, biti sparen s retkom <code>NA</code> vrijednosti iz desnog podatkovnog okvira.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Glagol <code>left_join()</code> vraća točno 15 redaka - koliko ih i ima u početnim podatkovnim okvirima. U prvom slučaju u kojem se u lijevi podatkovni okvir <code>pokemon_names</code> dodaju vrijednosti iz <code>pokemon_strenght</code>, za Pokemone koji postoje i u <code>pokemon_strength</code>, vrijednosti “special_attack” i “special_defense” bit će popunjene stvarnim vrijednostima iz toga podatkovnog okvira. Za Pokemone koji postoje samo u <code>pokemon_names</code> te vrijednosti biti će <code>NA</code>. Suprotno vrijedi za drugi slučaj.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lijevo spajanje - svi Pokemoni iz pokemon_names su zadržani</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 5
      id name      type_1   special_attack special_defense
   &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;
 1     1 bulbasaur grass                65              65
 2     2 ivysaur   grass                NA              NA
 3    16 pidgey    normal               NA              NA
 4    19 rattata   normal               25              35
 5    25 pikachu   electric             50              50
 6    41 zubat     poison               NA              NA
 7    48 venonat   bug                  40              55
 8    76 golem     rock                 NA              NA
 9   111 rhyhorn   ground               30              30
10   126 magmar    fire                 NA              NA
11   150 mewtwo    psychic             154              90
12   216 teddiursa normal               NA              NA
13   257 blaziken  fire                110              70
14   282 gardevoir psychic              NA              NA
15   300 skitty    normal               NA              NA</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lijevo spajanje - svi Pokemoni iz pokemon_strength su zadržani</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_strength,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_names,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 5
      id name      special_attack special_defense type_1  
   &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;           &lt;dbl&gt; &lt;fct&gt;   
 1     1 bulbasaur             65              65 grass   
 2    19 rattata               25              35 normal  
 3    25 pikachu               50              50 electric
 4    48 venonat               40              55 bug     
 5   111 rhyhorn               30              30 ground  
 6   150 mewtwo               154              90 psychic 
 7   257 blaziken             110              70 fire    
 8   310 manectric            105              60 &lt;NA&gt;    
 9   331 cacnea                85              40 &lt;NA&gt;    
10   351 castform              70              70 &lt;NA&gt;    
11   354 banette               83              63 &lt;NA&gt;    
12   371 bagon                 40              30 &lt;NA&gt;    
13   375 metang                55              80 &lt;NA&gt;    
14   382 kyogre               150             140 &lt;NA&gt;    
15   387 turtwig               45              55 &lt;NA&gt;    </code></pre>
</div>
</div>
</div>
</div>
</div>
<p><strong>Desno pridruživanje</strong> zadržava sve zapise iz desnog podatkovnog okvira koji je u kodovima označen argumentima <code>y</code>. Svaki redak iz desnog podatkovnog okvira bit će prisutan u rezultatu jer može biti sparen s retkom <code>NA</code> vrijednosti iz lijevog podatkovnog okvira. Rezultat i dalje odgovara strukturi podatkovnog okvira lijevog podatkovnog okvira koliko je to moguće.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Glagol <code>right_join()</code> vraća 15 redaka kao i glagol <code>left_join()</code> - koliko i ima u početnim podatkovnim okvirima. U prvom primjeru, za Pokemone koji postoje samo u <code>pokemon_strength</code>, vrijednosti varijabli “id”, “name” i “type_1” bit će <code>NA</code> jer ti Pokemoni nisu prisutni u <code>pokemon_names</code>, a isto, ali obrnuto, vrijedi u drugom primjeru.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Desno spajanje - svi Pokemoni iz pokemon_strength su zadržani</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 5
      id name      type_1   special_attack special_defense
   &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;
 1     1 bulbasaur grass                65              65
 2    19 rattata   normal               25              35
 3    25 pikachu   electric             50              50
 4    48 venonat   bug                  40              55
 5   111 rhyhorn   ground               30              30
 6   150 mewtwo    psychic             154              90
 7   257 blaziken  fire                110              70
 8   310 manectric &lt;NA&gt;                105              60
 9   331 cacnea    &lt;NA&gt;                 85              40
10   351 castform  &lt;NA&gt;                 70              70
11   354 banette   &lt;NA&gt;                 83              63
12   371 bagon     &lt;NA&gt;                 40              30
13   375 metang    &lt;NA&gt;                 55              80
14   382 kyogre    &lt;NA&gt;                150             140
15   387 turtwig   &lt;NA&gt;                 45              55</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Desno spajanje - svi Pokemoni iz pokemon_names su zadržani</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_strength,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_names,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 5
      id name      special_attack special_defense type_1  
   &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;           &lt;dbl&gt; &lt;fct&gt;   
 1     1 bulbasaur             65              65 grass   
 2    19 rattata               25              35 normal  
 3    25 pikachu               50              50 electric
 4    48 venonat               40              55 bug     
 5   111 rhyhorn               30              30 ground  
 6   150 mewtwo               154              90 psychic 
 7   257 blaziken             110              70 fire    
 8     2 ivysaur               NA              NA grass   
 9    16 pidgey                NA              NA normal  
10    41 zubat                 NA              NA poison  
11    76 golem                 NA              NA rock    
12   126 magmar                NA              NA fire    
13   216 teddiursa             NA              NA normal  
14   282 gardevoir             NA              NA psychic 
15   300 skitty                NA              NA normal  </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Konačno, <strong>potpuno pridruživanje</strong> (<em>full join</em>) zadržava sve zapise koji se pojavljuju u oba podatkovna okvira. Svaki redak i iz podatkovnog okvira označenog argumentom <code>x</code> i iz onog označenog <code>y</code> bit će uključen u rezultat jer obje tablice imaju rezervni redak s <code>NA</code> vrijednostima.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Glagol <code>full_join()</code> vraća 23 redaka, odnosno zbroj svih jedinstvenih Pokemona iz oba izvora. Pritom 16 Pokemona ima <code>NA</code> ili za “special_attack” i “special_defense” ili pak za “name”, “type_1” i “type_2”. Samo sedam Pokemona imat će potpune podatke iz oba izvora jer su to oni pokemoni čije se vrijednosti nalaze u oba podatkovna okvira.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Potpuno spajanje - svi Pokemoni iz oba podatkovna okvira su zadržani</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 5
      id name      type_1   special_attack special_defense
   &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;
 1     1 bulbasaur grass                65              65
 2     2 ivysaur   grass                NA              NA
 3    16 pidgey    normal               NA              NA
 4    19 rattata   normal               25              35
 5    25 pikachu   electric             50              50
 6    41 zubat     poison               NA              NA
 7    48 venonat   bug                  40              55
 8    76 golem     rock                 NA              NA
 9   111 rhyhorn   ground               30              30
10   126 magmar    fire                 NA              NA
# ℹ 13 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="filtrirano-pridruživanje" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="filtrirano-pridruživanje"><span class="header-section-number">1.2</span> Filtrirano pridruživanje</h3>
<p>Broj podudarnosti također određuje ponašanje filtrirnih pridruživanja. Pritom se razlikuju dvije funkcije koje imaju namjenu filtriranja, polu i anti pridruživanje. U oba slučaja važno je samo postojanje podudarnosti, a ne koliko ih puta ima. To znači da filtrirna spajanja nikada ne dupliciraju retke kao što to čine mutacijska spajanja.</p>
<section id="polu-pridruživanje" class="level4" data-number="1.2.1">
<h4 data-number="1.2.1" class="anchored" data-anchor-id="polu-pridruživanje"><span class="header-section-number">1.2.1</span> Polu-pridruživanje</h4>
<p>Glagol <code>semi_join()</code> zadržava sve retke iz podatkovnog okvira koji su označeni argumentom <code>x</code>, a koji imaju barem jednu podudarnost u podatkovnom okviru <code>y</code>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Rezultat glagola <code>semi_join()</code> je ispis od 7 Pokemona koji se nalaze i u <code>pokemon_names</code> i u <code>pokemon_strength</code>. Važno je primijetiti da rezultat sadrži samo stupce iz <code>pokemon_names</code> jer <code>semi_join()</code> ne dodaje nove stupce, nego samo filtrira retke na temelju postojanja podudarnosti.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Zadržavanje samo Pokemona koji imaju podatke o snazi</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">semi_join</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
     id name      type_1  
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;   
1     1 bulbasaur grass   
2    19 rattata   normal  
3    25 pikachu   electric
4    48 venonat   bug     
5   111 rhyhorn   ground  
6   150 mewtwo    psychic 
7   257 blaziken  fire    </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="anti-pridruživanje" class="level4" data-number="1.2.2">
<h4 data-number="1.2.2" class="anchored" data-anchor-id="anti-pridruživanje"><span class="header-section-number">1.2.2</span> Anti-pridruživanje</h4>
<p>Glagol <code>anti_join()</code> predstavlja suprotnost glagolu <code>semi_join()</code> jer vraća sve retke iz podatkovnog okvira <code>x</code> koji nemaju podudarnost u podatkovnom okviru <code>y</code>. Glagol je korista za pronalaženje nedostajućih vrijednosti koje su implicitno prisutne u podacima. Takve implicitno nedostajuće vrijednosti ne pojavljuju se kao <code>NA</code>, nego postoje samo kao odsutnost određenih kombinacija vrijednosti.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Na primjer, možemo koristiti funkciju <code>anti_join()</code> kako bismo pronašli Pokemone za koje nemamo podatke o specijalnim sposobnostima. Rezultat će sadržavati osam Pokemona koji se nalaze u <code>pokemon_names</code>, ali ne i u <code>pokemon_strength</code>. Ovi Pokemoni predstavljaju praznine u podacima o specijalnim sposobnostima. Funkcija <code>anti_join()</code> olakšava identifikaciju takvih praznina što je prvi korak prema njihovom popunjavanju prikupljanjem dodatnih podataka ili razumijevanju zašto ti podaci nedostaju.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pronalaženje Pokemona bez podataka o snazi</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
     id name      type_1 
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;  
1     2 ivysaur   grass  
2    16 pidgey    normal 
3    41 zubat     poison 
4    76 golem     rock   
5   126 magmar    fire   
6   216 teddiursa normal 
7   282 gardevoir psychic
8   300 skitty    normal </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Primijetimo da zbroj redaka iz <code>semi_join()</code> (7 Pokemona) i <code>anti_join()</code> (8 Pokemona) daje točno ukupan broj redaka u <code>pokemon_names</code> (15 Pokemona). To je zato što filtrirana pridruživanja zajedno predstavljaju komplementarne operacije koje zajedno pokrivaju sve retke iz početnog podatkovnog okvira.</p>
</section>
</section>
</section>
<section id="dodatne-funkcionalnosti-_join-glagola" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="dodatne-funkcionalnosti-_join-glagola"><span class="header-section-number">2</span> Dodatne funkcionalnosti <code>*_join()</code> glagola</h2>
<section id="organizacija-kodova" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="organizacija-kodova"><span class="header-section-number">2.1</span> Organizacija kodova</h3>
<p>Prilikom spajanja podatkovnih okvira u R-u, postoje dva osnovna pristupa organizaciji koda koji vode istom rezultatu, ali se razlikuju u sintaksi i čitljivosti.</p>
<p>Prvi je pristup organizacije funkcijski te temelji se na tradicionalnoj sintaksi pozivanja funkcija u R-u. U ovom pristupu, <code>*_join()</code> glagol poziva se eksplicitno, a svi argumenti navode se prema njihovim imenima. Prvi argument <code>x</code> predstavlja prvi ili lijevi podatkovni okvir, a drugi argument <code>y</code> predstavlja drugi ili desni podatkovni okvir, dok argument <code>by</code> specificira ključeve prema kojima se spajanje izvršava. Ovakav zapis omogućuje potpunu jasnoću o tome koji se podaci nalaze na kojoj poziciji i koja je uloga svakog argumenta.</p>
<p>Međutim, ova organizacija kodova ima i određena ograničenja. Kada je potrebno izvršiti više uzastopnih transformacija podataka, ugniježđavanje funkcijskih poziva postaje nepraktično i teško čitljivo, primjerice ako nakon spajanja želimo filtrirati podatke i odabrati samo određene stupce:</p>
<p>Drugi, pristupom koristi operator cjevovoda <code>|&gt;</code>. Njime se podatkovni okvir <code>pokemon_names</code> “prosljeđuje” glagolu <code>inner_join()</code> kao njezin prvi argument, a operator <code>|&gt;</code> uzima rezultat s lijeve strane i automatski ga postavlja kao prvi argument funkcije s desne strane. Budući da <code>inner_join()</code> očekuje podatkovni okvir <code>x</code>, ili prvi podatkovni okvir, kao prvi argument, <code>pokemon_names</code> zauzima tu poziciju, dok <code>pokemon_strength</code> postaje argument <code>y</code> ili drugi podatkovni okvir.</p>
<p>Primjerice, isti niz operacija koji smo prethodno prikazali u funkcijskom stilu, u onom kod kojeg se koristi operator <code>|&gt;</code> izgleda bi ovako:</p>
<p>Ovaj kod jasno pokazuje slijed operacija: započinjemo s <code>pokemon_names</code>, kombiniramo ga s <code>pokemon_strength</code>, filtriramo retke gdje je specijalni napad veći od 50 i konačno odabiremo samo željene stupce. Svaki korak logički slijedi iz prethodnog što čini kod intuitivnim za čitanje i razumijevanje.</p>
<p>Iako su oba pristupa organizaciji kodova validna, u nastavku ćemo koristiti pristup s operatorom <code>|&gt;</code> jer on bolje odgovara načinu na koji ljudi razmišljaju o obradi podataka kao o nizu logički povezanih koraka transformacije. Ovaj pristup također se usklađuje s filozofijom paketa <code>dplyr</code> i preporukama većeg dijela stručne literature.</p>
</section>
<section id="korištenje-dodatnih-argumenata" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="korištenje-dodatnih-argumenata"><span class="header-section-number">2.2</span> Korištenje dodatnih argumenata</h3>
<section id="specificiranje-argumenta-za-ključeve" class="level4" data-number="2.2.1">
<h4 data-number="2.2.1" class="anchored" data-anchor-id="specificiranje-argumenta-za-ključeve"><span class="header-section-number">2.2.1</span> Specificiranje argumenta za ključeve</h4>
<p>Argument <code>by</code> u funkcijama za spajanje podatkovnih okvira služi za eksplicitno specificiranje ključeva - varijabli koje se koriste za povezivanje zapisa iz dva podatkovna okvira. Ovaj argument govori R-u koje stupce treba usporediti prilikom traženja odgovarajućih parova redaka između dva podatkovna okvira. <code>by</code> može specificirati jedan ili više ključeva, a može se koristiti i za spajanje stupaca koji imaju različita imena u dva podatkovna okvira.</p>
<p>U modernoj sintaksi, preporučuje se korištenje funkcije <code>join_by()</code> kao nastavak na <code>by</code> argument umjesto starijeg pristupa s tekstualnim vektorima. Funkcija <code>join_by()</code> jasnija je, fleksibilnija i omogućuje specifikaciju složenijih uvjeta spajanja. U funkciju se zapravo umeću nazivi varijabli na temelju kojih se nastoji spojiti podatkovne okvire.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Često želimo spajanje izvršiti samo prema jednom ključu, čak i kada postoje drugi zajednički stupci. Na primjer, može biti korisno zadržati oba stupca name kako bismo provjerili jesu li potpuno identični.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id, name))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 5
     id name      type_1   special_attack special_defense
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;
1     1 bulbasaur grass                65              65
2    19 rattata   normal               25              35
3    25 pikachu   electric             50              50
4    48 venonat   bug                  40              55
5   111 rhyhorn   ground               30              30
6   150 mewtwo    psychic             154              90
7   257 blaziken  fire                110              70</code></pre>
</div>
</div>
<p>U ovom slučaju, R će spojiti redove samo na temelju “id” i “name” vrijednosti.</p>
</div>
</div>
</div>
<p>Pritom argument <code>by</code> nije obavezan. Ako se ne navedete, onda će R automatski primijeniti <strong>prirodno spajanje</strong> (<em>natural join</em>) koje znači da će R automatski prepoznati sve stupce koji imaju identična imena u oba podatkovna okvira i koristiti ih kao ključeve za spajanje. Ova automatska detekcija temelji se na heuristici koja u mnogim situacijama daje željene rezultate, ali nije uvijek pouzdana. Upravo zato je dobra praksa eksplicitno navoditi argument <code>by</code>, čak i kada očekujemo da će automatska detekcija raditi ispravno.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(id, name)`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 5
     id name      type_1   special_attack special_defense
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;
1     1 bulbasaur grass                65              65
2    19 rattata   normal               25              35
3    25 pikachu   electric             50              50
4    48 venonat   bug                  40              55
5   111 rhyhorn   ground               30              30
6   150 mewtwo    psychic             154              90
7   257 blaziken  fire                110              70</code></pre>
</div>
</div>
<p>Kada izvršimo ovu naredbu, R automatski prepoznaje da obje tablice imaju zajedničku varijablu “id” i “name” te ju koristi kao ključ za spajanje. U konzoli ćemo vidjeti poruku koja potvrđuje ovaj automatski odabir: <code>Joining with 'by = join_by(id)'</code>. Rezultat će biti podatkovni okvir koji sadrži sve Pokemone iz <code>pokemon_names</code> (svi redci su zadržani) obogaćen dodatnim stupcima “special_attack” i “special_defense” iz podatkovnog okvira <code>pokemon_strength</code>.</p>
</div>
</div>
</div>
<p>Konačno, ponekad je potrebno pridružiti podatke gdje ključevi imaju različita imena u dva podatkovna okvira. Na primjer, možda imamo podatkovni okvir u kojem se Pokemon ID nalazi pod nazivom “pokemon_id”, a u drugom samo “id”. U ovom primjeru koristimo sintaksu <code>join_by(pokemon_id == id)</code> koja jasno specificira da stupac “pokemon_id” iz prvog okvira odgovara stupcu “id” iz drugog okvira.</p>
</section>
<section id="sufiksi" class="level4" data-number="2.2.2">
<h4 data-number="2.2.2" class="anchored" data-anchor-id="sufiksi"><span class="header-section-number">2.2.2</span> Sufiksi</h4>
<p>Argument <code>suffix</code> u glagolima za pridruživanje podatkovnih okvira služi za razlikovanje stupaca koji imaju identična imena u oba podatkovna okvira, ali nisu korišteni kao ključevi za spajanje. Kada R spaja dva podatkovna okvira, svi stupci iz oba izvora zadržavaju se u konačnom rezultatu. Međutim, ako oba podatkovna okvira sadrže stupac s istim nazivom, R mora dodati oznake tim stupcima kako bi ih razlikovao. Argument <code>suffix</code> prima vektor od dva tekstualna elementa gdje prvi element označava sufiks koji će se dodati stupcima iz prvog podatkovnog okvira (<code>x</code>), a drugi element označava sufiks za stupce iz drugog podatkovnog okvira (<code>y</code>). Na ovaj način, korisnik može kontrolirati kako će se duplicirani nazivi stupaca razlikovati u konačnom rezultatu čineći kod čitljivijim i smislenijim.</p>
<p>Ako se argument ne navede, R će automatski primijeniti zadane sufikse koji su <code>.x</code> za stupce iz prvog podatkovnog okvira i <code>.y</code> za stupce iz drugog podatkovnog okvira. Ovi zadani sufiksi relativno su neutralni i univerzalni, ali nisu uvijek najdeskriptivniji za specifičan kontekst analize.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Ako kreiramo podatkovni okvir gdje oba podatkovna okvira sadrže stupac “name”, ali se kombiniraju samo prema varijabli “id”, bez argumenta <code>suffix</code>, rezultat će imati stupce “name.x” (iz <code>pokemon_names</code>) i “name.y” (iz <code>pokemon_strength</code>). U drugom slučaju, ako je argument <code>suffix</code> s vrijednostima <code>_elemental_df</code> i <code>_stat</code> naveden, sufiks jasno označava da stupac dolazi iz <code>pokemon_names</code> podatkovnog okvira ako naziv stupca sadrži sufiks “_elemental_df” u nazivu ili <code>pokemon_strength</code> ako sadrži “_stat” sufiks u nazivu. Ovakvi nazivi čine kod daleko čitljivijim.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
     id name.x    type_1   name.y    special_attack special_defense
  &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;    &lt;chr&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1     1 bulbasaur grass    bulbasaur             65              65
2    19 rattata   normal   rattata               25              35
3    25 pikachu   electric pikachu               50              50
4    48 venonat   bug      venonat               40              55
5   111 rhyhorn   ground   rhyhorn               30              30
6   150 mewtwo    psychic  mewtwo               154              90
7   257 blaziken  fire     blaziken             110              70</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_elemental_df"</span>, <span class="st">"_stat"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
     id name_elemental_df type_1   name_stat special_attack special_defense
  &lt;dbl&gt; &lt;chr&gt;             &lt;fct&gt;    &lt;chr&gt;              &lt;dbl&gt;           &lt;dbl&gt;
1     1 bulbasaur         grass    bulbasaur             65              65
2    19 rattata           normal   rattata               25              35
3    25 pikachu           electric pikachu               50              50
4    48 venonat           bug      venonat               40              55
5   111 rhyhorn           ground   rhyhorn               30              30
6   150 mewtwo            psychic  mewtwo               154              90
7   257 blaziken          fire     blaziken             110              70</code></pre>
</div>
</div>
<p>Konačno, ako u argumentu <code>by</code> definiramo dva ključa za pridruživanje, u ovom slučaju i “id” i “name”, neće biti potrebno definiranje sufiksa jer se neće stvarati dupli stupci za podatke o imenima Pokemona.</p>
</div>
</div>
</div>
</section>
<section id="nejednako-pridruživanje" class="level4" data-number="2.2.3">
<h4 data-number="2.2.3" class="anchored" data-anchor-id="nejednako-pridruživanje"><span class="header-section-number">2.2.3</span> Nejednako pridruživanje</h4>
<p>Do su bila navedena samo jednaka pridruživanja, odnosno ona pridruživanja gdje se redci podudaraju ako je ključ iz <code>x</code> jednak ključu iz <code>y</code> argumenta. Ipak, postoje i drugi načini određivanja podudarnosti između parova redaka.</p>
<p>U jednakim pridruživanjima ključevi iz <code>x</code> i <code>y</code> uvijek su jednaki pa je dovoljno prikazati samo jedan ključ u rezultatu. Međutim, kod nejednakih pridruživanja ključevi mogu imati različite vrijednosti što znači da je potrebno prikazati oba ključa što se kod <code>*_join()</code> glagola omogućuje postavljanjem argumenta <code>keep = TRUE</code>.</p>
<p><code>dplyr</code> identificira četiri posebno korisne vrste nejednakih pridruživanja:</p>
<ol type="1">
<li><p>križna pridruživanja koja podudaruju svaki par redaka;</p></li>
<li><p>nejednakosna pridruživanja s operatorima <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code> i <code>&gt;=</code> umjesto <code>==</code>;</p></li>
<li><p>klizna pridruživanja koja pronalaze samo najbližu podudarnost te</p></li>
<li><p>preklopna pridruživanja koja se koriste za rad s rasponima vrijednosti.</p></li>
</ol>
<section id="nejednakosno-pridruživanja" class="level5" data-number="2.2.3.1">
<h5 data-number="2.2.3.1" class="anchored" data-anchor-id="nejednakosno-pridruživanja"><span class="header-section-number">2.2.3.1</span> Nejednakosno pridruživanja</h5>
<p>Nejednakosna spajanja (engl. <em>inequality joins</em>) koriste operatore <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> ili <code>&gt;</code> za ograničavanje skupa mogućih podudarnosti.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Jedan koristan primjer s Pokemon podacima bio bi rangiranje Pokemona prema njihovoj ukupnoj snazi. Pretpostavimo da želimo za svakog Pokemona pronaći sve one koji su jači od njega.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Priprema podataka - izračun ukupne snage</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>pokemon_power <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_power =</span> attack <span class="sc">+</span> defense <span class="sc">+</span> special_attack <span class="sc">+</span> special_defense) <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, total_power) <span class="sc">|&gt;</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_power))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Nejednakosno spajanje - pronalaženje svih jačih protivnika</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>stronger_pokemon <span class="ot">&lt;-</span> pokemon_power <span class="sc">|&gt;</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_power, <span class="at">by =</span> <span class="fu">join_by</span>(total_power <span class="sc">&lt;</span> total_power), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_base"</span>, <span class="st">"_opponent"</span>))</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Brojanje jačih Pokemona i izračun ranga</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>pokemon_ranking <span class="ot">&lt;-</span> stronger_pokemon <span class="sc">|&gt;</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name_base, total_power_base) <span class="sc">|&gt;</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">stronger_count =</span> <span class="fu">n</span>(),</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> stronger_count <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rank)</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>pokemon_ranking</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 798 × 4
   name_base               total_power_base stronger_count  rank
   &lt;chr&gt;                              &lt;dbl&gt;          &lt;int&gt; &lt;dbl&gt;
 1 rayquazamega rayquaza                560              2     3
 2 mewtwomega mewtwo x                  544              3     4
 3 dianciemega diancie                  540              4     5
 4 mewtwomega mewtwo y                  534              5     6
 5 tyranitarmega tyranitar              529              6     7
 6 hoopahoopa unbound                   520              7     8
 7 aggronmega aggron                    510              8     9
 8 latiasmega latias                    510              8     9
 9 latiosmega latios                    510              8     9
10 metagrossmega metagross              510              8     9
# ℹ 788 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Drugi praktični primjer je kategorizacija Pokemona po razinama snage. Pretpostavimo da želimo razvrstati Pokemone u kategorije “Slabiji”, “Srednji” i “Jači” na temelju njihovog napada, a zatim pronaći sve Pokemone u tim kategorijama.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiranje granica kategorija</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>power_tiers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">tier_name =</span> <span class="fu">c</span>(<span class="st">"Weak"</span>, <span class="st">"Middle"</span>, <span class="st">"Strong"</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_attack =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">100</span>),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_attack =</span> <span class="fu">c</span>(<span class="dv">49</span>, <span class="dv">99</span>, <span class="dv">200</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Kategorizacija Pokemona prema snazi napada</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(power_tiers, <span class="fu">join_by</span>(attack <span class="sc">&gt;=</span> min_attack, attack <span class="sc">&lt;=</span> max_attack)) <span class="sc">|&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, tier_name) <span class="sc">|&gt;</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(attack)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 800 × 3
   name     attack tier_name
   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;    
 1 chansey       5 Weak     
 2 happiny       5 Weak     
 3 magikarp     10 Weak     
 4 shuckle      10 Weak     
 5 blissey      10 Weak     
 6 feebas       15 Weak     
 7 metapod      20 Weak     
 8 abra         20 Weak     
 9 ledyba       20 Weak     
10 togepi       20 Weak     
# ℹ 790 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="klizna-spajanja" class="level5" data-number="2.2.3.2">
<h5 data-number="2.2.3.2" class="anchored" data-anchor-id="klizna-spajanja"><span class="header-section-number">2.2.3.2</span> Klizna spajanja</h5>
<p><strong>Klizna spajanja</strong> (engl. <em>rolling joins</em>) predstavljaju poseban tip nejednakosnih spajanja gdje umjesto dobivanja svakog retka koji zadovoljava nejednakost, dobivamo samo najbliži redak. Bilo koje nejednakosno spajanje možemo pretvoriti u klizno spajanje dodavanjem funkcije <code>closest()</code>.</p>
<p>Klizna spajanja posebno su korisna kada imamo dva podatkovna okvira s datumima koji se ne poklapaju savršeno i želimo pronaći najbliži datum u jednom podatkovnom okviru koji dolazi prije ili nakon nekog datuma u drugom podatkovnom okviru.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Za demonstraciju kliznog spajanja s Pokemon podacima, zamislimo scenarij gdje imamo podatke o Pokemon generacijama i želimo svakom Pokemonu dodijeliti generaciju u kojoj je predstavljen. Stvorit ćemo tablicu generacija i koristit ćemo klizno spajanje za pronalaženje odgovarajuće generacije:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tablica s godinama predstavljanja generacija</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>pokemon_generations <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">generation =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">year_introduced =</span> <span class="fu">c</span>(<span class="dv">1996</span>, <span class="dv">1999</span>, <span class="dv">2002</span>, <span class="dv">2006</span>, <span class="dv">2010</span>, <span class="dv">2013</span>),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">generation_name =</span> <span class="fu">c</span>(<span class="st">"Kanto"</span>, <span class="st">"Johto"</span>, <span class="st">"Hoenn"</span>, <span class="st">"Sinnoh"</span>, <span class="st">"Unova"</span>, <span class="st">"Kalos"</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulirajmo podatke o godinama predstavljanja Pokemona</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>pokemon_with_years <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">&lt;=</span> <span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">introduced_year =</span> <span class="fu">case_when</span>(</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1996</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1999</span>,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="dv">2002</span>,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="dv">2006</span>,</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">2010</span>,</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="dv">2013</span>,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, generation, introduced_year)</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Klizno spajanje za pronalaženje odgovarajuće generacije</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>pokemon_with_generation <span class="ot">&lt;-</span> pokemon_with_years <span class="sc">|&gt;</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(pokemon_generations, <span class="fu">join_by</span>(<span class="fu">closest</span>(introduced_year <span class="sc">&gt;=</span> year_introduced)))</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Prikaz rezultata</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>pokemon_with_generation</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26 × 7
      id name          generation.x introduced_year generation.y year_introduced
   &lt;dbl&gt; &lt;chr&gt;         &lt;fct&gt;                  &lt;dbl&gt;        &lt;dbl&gt;           &lt;dbl&gt;
 1     1 bulbasaur     1                       1996            1            1996
 2     2 ivysaur       1                       1996            1            1996
 3     3 venusaur      1                       1996            1            1996
 4     3 venusaurmega… 1                       1996            1            1996
 5     4 charmander    1                       1996            1            1996
 6     5 charmeleon    1                       1996            1            1996
 7     6 charizard     1                       1996            1            1996
 8     6 charizardmeg… 1                       1996            1            1996
 9     6 charizardmeg… 1                       1996            1            1996
10     7 squirtle      1                       1996            1            1996
# ℹ 16 more rows
# ℹ 1 more variable: generation_name &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Drugi primjer kliznog spajanja mogao bi uključivati usporedbu statistika Pokemona. Pretpostavimo da želimo za svakog Pokemona pronaći onog s najbližom vrijednošću napada.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pronalaženje Pokemona s najbližom vrijednošću napada</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>closest_attack <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    pokemon_dataset,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">join_by</span>(<span class="fu">closest</span>(attack <span class="sc">&gt;=</span> attack)),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_original"</span>, <span class="st">"_closest"</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Prikaz rezultata</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>closest_attack <span class="sc">|&gt;</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name_original, attack_original, name_closest, attack_closest)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,916 × 4
   name_original attack_original name_closest attack_closest
   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;                 &lt;dbl&gt;
 1 bulbasaur                  49 bulbasaur                49
 2 bulbasaur                  49 chikorita                49
 3 bulbasaur                  49 finneon                  49
 4 ivysaur                    62 ivysaur                  62
 5 ivysaur                    62 nidorina                 62
 6 ivysaur                    62 bayleef                  62
 7 ivysaur                    62 snover                   62
 8 venusaur                   82 venusaur                 82
 9 venusaur                   82 golduck                  82
10 venusaur                   82 meganium                 82
# ℹ 16,906 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="križna-pridruživanja" class="level5" data-number="2.2.3.3">
<h5 data-number="2.2.3.3" class="anchored" data-anchor-id="križna-pridruživanja"><span class="header-section-number">2.2.3.3</span> Križna pridruživanja</h5>
<p><strong>Križno pridruživanja</strong> (engl. <em>cross join</em>) podudara sve kombinacije redaka generirajući Kartezijev produkt redaka. To znači da će rezultat imati <code>nrow(x) * nrow(y)</code> redaka. Križna pridruživanja korisna su prilikom generiranja svih mogućih kombinacija podudaranja.</p>
<p>Ona koriste drugačiju funkciju jer ne postoji razlika između unutarnjeg, lijevog, desnog i potpunog pridruživanja kada se podudara svaki redak, nego se koristi funkcija <code>cross_join()</code> koja direktno kreira Kartezijev produkt bez obzira na vrijednosti u stupcima.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Zamislimo scenarij u kojem organiziramo Pokemon turnir gdje se svaki Pokemon mora boriti protiv svakog drugog Pokemona iz podatkovnog okvira <code>pokemon_names</code>. Ograničit ćemo turnir na samo četiri Pokemona: Bulbasaur, Charmander, Squirtle i Pikachu. Ovo je klasičan primjer situacije gdje je križno spajanje idealno rješenje koje se ostvaruje funkcijom <code>cross_join()</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiranje podatkovnog okvira s Pokemonima</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>tournament_pokemon <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"bulbasaur"</span>, <span class="st">"charmander"</span>, <span class="st">"squirtle"</span>, <span class="st">"pikachu"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Križno pridruživanje</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>all_tournament_matches <span class="ot">&lt;-</span> tournament_pokemon <span class="sc">|&gt;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cross_join</span>(tournament_pokemon, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_1"</span>, <span class="st">"_2"</span>))</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>all_tournament_matches</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 4
    id_1 name_1      id_2 name_2    
   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     
 1     1 bulbasaur      1 bulbasaur 
 2     1 bulbasaur      4 charmander
 3     1 bulbasaur      7 squirtle  
 4     1 bulbasaur     25 pikachu   
 5     4 charmander     1 bulbasaur 
 6     4 charmander     4 charmander
 7     4 charmander     7 squirtle  
 8     4 charmander    25 pikachu   
 9     7 squirtle       1 bulbasaur 
10     7 squirtle       4 charmander
11     7 squirtle       7 squirtle  
12     7 squirtle      25 pikachu   
13    25 pikachu        1 bulbasaur 
14    25 pikachu        4 charmander
15    25 pikachu        7 squirtle  
16    25 pikachu       25 pikachu   </code></pre>
</div>
</div>
<p>Funkcije <code>cross_join()</code> stvara 225 redaka koji predstavljaju sve moguće kombinacije borbi. Argument <code>suffix = c("_1", "_2")</code> dodaje sufikse stupcima kako bi razlikovali prvog borca (“_1”) od drugog borca (“_2”).</p>
<p>Ipak, rezultati uključuju i borbe protiv samog sebe, primjerice Bulbasaur protiv Bulbasaura (redak 1), i duplikate prema različitom redoslijedu, primjerice Bulbasaur protiv Charmander (redak 2) i Charmander protiv Bulbasaura (redak 5).</p>
<p>Borbe samih protiv sebe eliminiraju se glagolom <code>filter()</code> iz <code>dplyr</code> paketa i logičkim operatorom <code>!=</code> čime je moguće eliminirati retke u kojima su dvije vrijednosti u dvije varijable iste. Ovdje je zapravo riječ o obliku nejednakosnog pridruživanja.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminiranje borbi samih protiv sebe</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>valid_tournament_matches <span class="ot">&lt;-</span> all_tournament_matches <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id_1 <span class="sc">!=</span> id_2)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>valid_tournament_matches</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
    id_1 name_1      id_2 name_2    
   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     
 1     1 bulbasaur      4 charmander
 2     1 bulbasaur      7 squirtle  
 3     1 bulbasaur     25 pikachu   
 4     4 charmander     1 bulbasaur 
 5     4 charmander     7 squirtle  
 6     4 charmander    25 pikachu   
 7     7 squirtle       1 bulbasaur 
 8     7 squirtle       4 charmander
 9     7 squirtle      25 pikachu   
10    25 pikachu        1 bulbasaur 
11    25 pikachu        4 charmander
12    25 pikachu        7 squirtle  </code></pre>
</div>
</div>
<p>Što se tiče duplikata, možemo koristiti nejednako pridruživanje s operatorom <code>&lt;</code> kako bismo generirali samo jedinstvene kombinacije unutar funkcije <code>join_by()</code> u <code>by</code> argumentu.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminiranje duplikata</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>unique_matches <span class="ot">&lt;-</span> tournament_pokemon <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(tournament_pokemon, <span class="fu">join_by</span>(id <span class="sc">&lt;</span> id), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_1"</span>, <span class="st">"_2"</span>))</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>unique_matches</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
   id_1 name_1      id_2 name_2    
  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     
1     1 bulbasaur      4 charmander
2     1 bulbasaur      7 squirtle  
3     1 bulbasaur     25 pikachu   
4     4 charmander     7 squirtle  
5     4 charmander    25 pikachu   
6     7 squirtle      25 pikachu   </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="preklopna-spajanja" class="level5" data-number="2.2.3.4">
<h5 data-number="2.2.3.4" class="anchored" data-anchor-id="preklopna-spajanja"><span class="header-section-number">2.2.3.4</span> Preklopna spajanja</h5>
<p><strong>Preklopna spajanja</strong> (engl. <em>overlap joins</em>) pružaju tri pomoćne funkcije koje koriste nejednakosna spajanja kako bi olakšale rad s intervalima vrijednosti:</p>
<ol type="1">
<li><p><code>between(x, y_lower, y_upper)</code> je skraćenica za <code>x &gt;= y_lower, x &lt;= y_upper</code>,</p></li>
<li><p><code>within(x_lower, x_upper, y_lower, y_upper)</code> je skraćenica za <code>x_lower &gt;= y_lower, x_upper &lt;= y_upper</code> i</p></li>
<li><p><code>overlaps(x_lower, x_upper, y_lower, y_upper)</code> je skraćenica za <code>x_lower &lt;= y_upper, x_upper &gt;= y_lower</code>.</p></li>
</ol>
<p>Preklopna spajanja omogućuju elegantan način rada s intervalima i rasponima vrijednosti čineći kod čitljivijim i izražajnijim u usporedbi s eksplicitnim navođenjem svih nejednakosnih uvjeta. Ova tehnika posebno je korisna u situacijama gdje trebamo kategorizirati kontinuirane varijable ili pronalaziti preklapanja između vremenskih perioda, geografskih regija ili bilo kojih drugih raspon vrijednosti.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Demonstrirajmo preklopna spajanja s Pokemon podacima kategorizirajući Pokemone prema njihovim statistikama.</p>
<p>Stvorit ćemo raspone za različite razine snage i koristiti <code>between()</code> za razvrstavanje.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiranje raspon razina za HP (hit points)</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>hp_tiers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">tier_name =</span> <span class="fu">c</span>(<span class="st">"Low HP"</span>, <span class="st">"Middle HP"</span>, <span class="st">"High HP"</span>, <span class="st">"Highest HP"</span>),</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">hp_min =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">120</span>),</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">hp_max =</span> <span class="fu">c</span>(<span class="dv">49</span>, <span class="dv">79</span>, <span class="dv">119</span>, <span class="dv">255</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Preklopno spajanje koristeći between()</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(hp_tiers, <span class="fu">join_by</span>(<span class="fu">between</span>(HP, hp_min, hp_max))) <span class="sc">|&gt;</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, HP, tier_name) <span class="sc">|&gt;</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(HP))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 800 × 3
   name                     HP tier_name 
   &lt;chr&gt;                 &lt;dbl&gt; &lt;chr&gt;     
 1 blissey                 255 Highest HP
 2 chansey                 250 Highest HP
 3 wobbuffet               190 Highest HP
 4 wailord                 170 Highest HP
 5 alomomola               165 Highest HP
 6 snorlax                 160 Highest HP
 7 slaking                 150 Highest HP
 8 drifblim                150 Highest HP
 9 giratinaaltered forme   150 Highest HP
10 giratinaorigin forme    150 Highest HP
# ℹ 790 more rows</code></pre>
</div>
</div>
<p>Funkcija <code>overlaps()</code> posebno je korisna za pronalaženje preklapanja između raspona. Pretpostavimo da želimo identificirati Pokemone čiji se rasponi snage (definiran kao minimum i maksimum njihovih napada i obrane) preklapaju.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stvaranje raspon snage za nekoliko Pokemona</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>pokemon_power_ranges <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">power_min =</span> <span class="fu">pmin</span>(attack, defense),</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">power_max =</span> <span class="fu">pmax</span>(attack, defense)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, power_min, power_max)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Pronalaženje Pokemona s preklapajućim rasponima snage</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>pokemon_power_ranges <span class="sc">|&gt;</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    pokemon_power_ranges,</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">join_by</span>(<span class="fu">overlaps</span>(power_min, power_max, power_min, power_max), id <span class="sc">&lt;</span> id),</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_1"</span>, <span class="st">"_2"</span>)</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name_1, power_min_1, power_max_1, name_2, power_min_2, power_max_2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 149,844 × 6
   name_1    power_min_1 power_max_1 name_2              power_min_2 power_max_2
   &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;       &lt;dbl&gt;
 1 bulbasaur          49          49 charmander                   43          52
 2 bulbasaur          49          49 squirtle                     48          65
 3 bulbasaur          49          49 metapod                      20          55
 4 bulbasaur          49          49 butterfree                   45          50
 5 bulbasaur          49          49 kakuna                       25          50
 6 bulbasaur          49          49 beedrill                     40          90
 7 bulbasaur          49          49 beedrillmega beedr…          40         150
 8 bulbasaur          49          49 rattata                      35          56
 9 bulbasaur          49          49 spearow                      30          60
10 bulbasaur          49          49 ekans                        44          60
# ℹ 149,834 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>


<!-- -->

</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03_02_nedostajajuce_vrijednosti.html" class="pagination-link" aria-label="Nedostajajuće vrijednosti">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Nedostajajuće vrijednosti</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03_04_brojevi.html" class="pagination-link" aria-label="Brojevi">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Brojevi</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Pridruživanje podataka"</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> ""</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> "#483D8B"</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="an">lang:</span><span class="co"> hr</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="an">crossref:</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co">  tbl-title: "Tablica"</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co">  fig-title: "Slika"</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Aktiviranje paketa</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RKaggle)</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hms)</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Učitavanje podataka</span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>poke_raw <span class="ot">&lt;-</span> <span class="fu">get_dataset</span>(<span class="st">"abcsds/pokemon"</span>)</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Prilagodba podatkovnog okvira</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="ot">&lt;-</span> poke_raw <span class="sc">|&gt;</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="st">`</span><span class="at">#</span><span class="st">`</span>,</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">`</span><span class="at">Name</span><span class="st">`</span>,</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_1 =</span> <span class="st">`</span><span class="at">Type 1</span><span class="st">`</span>,</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_2 =</span> <span class="st">`</span><span class="at">Type 2</span><span class="st">`</span>,</span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">`</span><span class="at">Total</span><span class="st">`</span>,</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack =</span> <span class="st">`</span><span class="at">Attack</span><span class="st">`</span>,</span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">defense =</span> <span class="st">`</span><span class="at">Defense</span><span class="st">`</span>,</span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_attack =</span> <span class="st">`</span><span class="at">Sp. Atk</span><span class="st">`</span>,</span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_defense =</span> <span class="st">`</span><span class="at">Sp. Def</span><span class="st">`</span>,</span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> <span class="st">`</span><span class="at">Speed</span><span class="st">`</span>,</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">generation =</span> <span class="st">`</span><span class="at">Generation</span><span class="st">`</span>,</span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">legendary =</span> <span class="st">`</span><span class="at">Legendary</span><span class="st">`</span></span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">type_1</span><span class="st">`</span>, <span class="st">`</span><span class="at">type_2</span><span class="st">`</span>, generation), as.character),</span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(legendary, as.logical),</span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_to_lower</span>(.x))) <span class="sc">|&gt;</span></span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">type_1</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fct_infreq</span>(<span class="st">`</span><span class="at">type_1</span><span class="st">`</span>),</span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">type_2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fct_infreq</span>(<span class="st">`</span><span class="at">type_2</span><span class="st">`</span>),</span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">generation</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fct_infreq</span>(<span class="st">`</span><span class="at">generation</span><span class="st">`</span>)</span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Stvaranje prvog podatkovnog okvira s id-om, imenima i tipovima</span></span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"bulbasaur"</span>, <span class="st">"ivysaur"</span>, <span class="st">"pidgey"</span>, <span class="st">"rattata"</span>, <span class="st">"pikachu"</span>, <span class="st">"zubat"</span>, <span class="st">"venonat"</span>, <span class="st">"golem"</span>, <span class="st">"rhyhorn"</span>, <span class="st">"magmar"</span>, <span class="st">"mewtwo"</span>, <span class="st">"teddiursa"</span>, <span class="st">"blaziken"</span>, <span class="st">"gardevoir"</span>, <span class="st">"skitty"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, type_1)</span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-74"><a href="#cb46-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Stvaranje drugog podatkovnog okvira sa snagama</span></span>
<span id="cb46-75"><a href="#cb46-75" aria-hidden="true" tabindex="-1"></a>pokemon_strength <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-76"><a href="#cb46-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"bulbasaur"</span>, <span class="st">"manectric"</span>, <span class="st">"cacnea"</span>, <span class="st">"rattata"</span>, <span class="st">"castform"</span>, <span class="st">"pikachu"</span>, <span class="st">"banette"</span>, <span class="st">"venonat"</span>, <span class="st">"rhyhorn"</span>, <span class="st">"bagon"</span>, <span class="st">"mewtwo"</span>, <span class="st">"metang"</span>, <span class="st">"blaziken"</span>, <span class="st">"kyogre"</span>, <span class="st">"turtwig"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb46-77"><a href="#cb46-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, special_attack, special_defense)</span>
<span id="cb46-78"><a href="#cb46-78" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-79"><a href="#cb46-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-80"><a href="#cb46-80" aria-hidden="true" tabindex="-1"></a>::: {.callout-important icon="false" collapse="true" title="Podaci korišteni u dijelu poglavlja"}</span>
<span id="cb46-81"><a href="#cb46-81" aria-hidden="true" tabindex="-1"></a>Za potrebe demonstracije različitih tehnika pridruživanja podatkovnih okvira, izvorni podaci o Pokemonima iz <span class="in">`pokemon_dataset`</span> podatkovnog okvira podjeljeni su na dva manja podatkovna okvira. Podatkovni okvir <span class="in">`pokemon_names`</span> predstavlja osnovni identifikacijski podatkovni okvir koja sadrži temeljne informacije o Pokemonima. Ovaj okvir uključuje tri varijable: "id", "name" i "type_1". Podatkovni okvir <span class="in">`pokemon_strength`</span> predstavlja tablicu borbenih statistika koja sadrži mjerenja specijalnih sposobnosti Pokemona. Ovaj okvir uključuje četiri varijable: "id", "name", "special_attack" i "special_defense".</span>
<span id="cb46-82"><a href="#cb46-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-85"><a href="#cb46-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-86"><a href="#cb46-86" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb46-87"><a href="#cb46-87" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pokemon_names, <span class="dv">5</span>)</span>
<span id="cb46-88"><a href="#cb46-88" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pokemon_strength, <span class="dv">5</span>)</span>
<span id="cb46-89"><a href="#cb46-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-90"><a href="#cb46-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-91"><a href="#cb46-91" aria-hidden="true" tabindex="-1"></a>Ovako dizajnirani podatkovni okviri rezultiraju raspodjelom Pokemona u kojoj postoje Pokemoni prisutni u oba podatkovna okvira, Pokemoni koji se nalaze samo u <span class="in">`pokemon_names`</span> i prisutni samo u <span class="in">`pokemon_strength`</span> podatkovnom okviru. Ovakva struktura podataka omogućuje da na praktičan način bude demonstrirano kako različite vrste spajanja tretiraju situacije s potpunim i djelomičnim preklapanjem.</span>
<span id="cb46-92"><a href="#cb46-92" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-93"><a href="#cb46-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-94"><a href="#cb46-94" aria-hidden="true" tabindex="-1"></a>Analiza podataka rijetko se oslanja samo na jedan podatkovni okvir. U praksi, podaci o istim istrazivanim podacima često dolaze iz različitih izvora ili su organizirani u više podatkovnih okvira kako bi se olakšalo njihovo upravljanje i ažuriranje. Proces objedinjavanja podataka iz više podatkovnih okvira naziva se **pridruživanje podataka** (engl. *data joining*). Spajanje omogućuje da iz fragmenata informacija raspoređenih u više tablica sastavimo cjelovitu sliku potrebnu za donošenje zaključaka.</span>
<span id="cb46-95"><a href="#cb46-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-96"><a href="#cb46-96" aria-hidden="true" tabindex="-1"></a>Najjednostavniji način pridruživanja podataka je <span class="in">`dplyr`</span> paketom koji nudi šest različitih funkcija za spajanje podatkovnih okvira: <span class="in">`left_join()`</span>, <span class="in">`right_join()`</span>, <span class="in">`inner_join()`</span>, <span class="in">`full_join()`</span>, <span class="in">`semi_join()`</span> i <span class="in">`anti_join()`</span>. Sve ove funkcije dijele zajednički način rada - primaju dva podatkovna okvira (koji se u dokumentaciji označavaju kao x ili lijevi i y ili desni podatkovni okvir) te vraćaju novi podatkovni okvir kao rezultat spajanja. Razlike među ovim funkcijama očituju se u tome koji se redovi zadržavaju u konačnom rezultatu i kako se tretiraju zapisi koji nemaju odgovarajući par u drugom podatkovnom okviru.</span>
<span id="cb46-97"><a href="#cb46-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-98"><a href="#cb46-98" aria-hidden="true" tabindex="-1"></a>Postoji dvije vrste pridruživanja koje se mogu koristiti <span class="in">`dplyr`</span> paketom:</span>
<span id="cb46-99"><a href="#cb46-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-100"><a href="#cb46-100" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Mutacijsko pridruživanje** (*mutating join*): Omogućuje kombiniranje varijabli iz dva podatkovna okvira na način da najprije pronalazi odgovarajuće parove zapisa pomoću ključeva, a zatim kopira varijable iz jednog podatkovnog okvira u drugi. Mutacijsko pridruživanje uključuje:</span>
<span id="cb46-101"><a href="#cb46-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-102"><a href="#cb46-102" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`full_join()`</span>: Zadržava sve opservacije iz obja podatkovna okvira te, ako nema podudaranja u nekom od njih, onda se to mjesto popunjava s <span class="in">`NA`</span>, a koristiti se kada želimo zadržati sve podatke iz oba podatkovna okvira bez obzira postoji li podudaranje ili ne.</span>
<span id="cb46-103"><a href="#cb46-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-104"><a href="#cb46-104" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`inner_join()`</span>: Zadržava samo opservacije koje imaju odgovarajuće vrijednosti u obja podatkovna okvira, odnosno samo zajedničke za oba podatkovna okvira, a koristi se kada želimo zadržati samo podatke koji su zajednički.</span>
<span id="cb46-105"><a href="#cb46-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-106"><a href="#cb46-106" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`left_join()`</span>: Zadržava sva opažanja iz lijevog (prvog) podatkovnog okvira i dodaje odgovarajuće vrijednosti iz desnog (drugog) podatkovnog okvira, a koristiti se kada želimo zadržati sve podatke iz lijevog podatkovnog okvira bez obzira postoji li podudaranje u desnom.</span>
<span id="cb46-107"><a href="#cb46-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-108"><a href="#cb46-108" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`right_join()`</span>: Zadržava sva opažanja iz desnog (drugog) podatkovnog okvira i dodaje odgovarajuće vrijednosti iz lijevog (prvog) podatkovnog okvira, a koristiti se kada želimo zadržati sve podatke iz desnog podatkovnog okvira bez obzira postoji li podudaranje u lijevom.</span>
<span id="cb46-109"><a href="#cb46-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-110"><a href="#cb46-110" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Filtrirano pridruživanje** (*filtering join*) je pridruživanje podataka temeljeno na principu filtriranja. Postoje dvije vrste filtrirnih pridruživanja:</span>
<span id="cb46-111"><a href="#cb46-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-112"><a href="#cb46-112" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`semi_join()`</span>: Vraća retke iz prvog podatkovnog okvira koji imaju odgovarajuće vrijednosti u drugom podatkovnom okviru, ali ne dodaje stupce iz drugog podatkovnog okvira, a koristi se kada želimo filtrirati prvi podatkovni okvir prema podacima koji postoje u drugom podatkovnom okviru, ali nas pritom ne zanimaju dodatni stupci iz druge tablice.</span>
<span id="cb46-113"><a href="#cb46-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-114"><a href="#cb46-114" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`anti_join()`</span>: Vraća retke iz prvog podatkovnog okvira koji nemaju podudaranje u drugom podatkovnom okviru, a koristi se kada želimo pronaći retke u prvom podatkovnom okviru koji nemaju podudaranje u drugom podatkovnom okviru.</span>
<span id="cb46-115"><a href="#cb46-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-116"><a href="#cb46-116" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon="false" collapse="true" title="Glagoli pridruživanja"}</span>
<span id="cb46-117"><a href="#cb46-117" aria-hidden="true" tabindex="-1"></a>Glagoli iz <span class="in">`dplyr`</span> paketa za pridruživanje podatkovnih okvira koriste slične argumente. Zajednički argumenti za <span class="in">`*_join()`</span> glagole su:</span>
<span id="cb46-118"><a href="#cb46-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-119"><a href="#cb46-119" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Argument <span class="pp">|</span> Objašnjenje <span class="pp">|</span></span>
<span id="cb46-120"><a href="#cb46-120" aria-hidden="true" tabindex="-1"></a><span class="pp">|------------------------------------|------------------------------------|</span></span>
<span id="cb46-121"><a href="#cb46-121" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`x`</span> i <span class="in">`y`</span> <span class="pp">|</span> podatkovni okviri za kombiniranje - <span class="in">`x`</span> predstavlja lijevi podatkovni okvir, a <span class="in">`y`</span> desni <span class="pp">|</span></span>
<span id="cb46-122"><a href="#cb46-122" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`by`</span> <span class="pp">|</span> kontrolira koje se varijable koriste za podudaranje opažanja u dvije tablice: 1. <span class="in">`NULL`</span> (zadana vrijednost) koji koristi zajedničke stupce s istim imenima u obje tablice, 2. vektor koji koristi samo neke od zajedničkih varijabli i 3. imenovani vektor, npr. <span class="in">`by = c("a" = "b")`</span>, ako su imena stupaca različita <span class="pp">|</span></span>
<span id="cb46-123"><a href="#cb46-123" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`suffx`</span> <span class="pp">|</span> sufiksi koji se dodaju imenima stupaca koji se pojavljuju u obje tablice (moguće je proslijediti vektor sufiksa, jedan za prvi i jedan za drugi podatkovni okvir) <span class="pp">|</span></span>
<span id="cb46-124"><a href="#cb46-124" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`copy`</span> <span class="pp">|</span> što se događa kada podatkovni okviri nisu na istoj lokaciji (npr. jedna je u memoriji, druga u bazi podataka): ako je <span class="in">`TRUE`</span>, onda će se drugi podatkovni okvir kopirati na istu lokaciju kao prvi, a ako nije, onda će ostati na različitim lokacijama (zadana vrijednost je <span class="in">`FALSE`</span>) <span class="pp">|</span></span>
<span id="cb46-125"><a href="#cb46-125" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`keep`</span> <span class="pp">|</span> kontrolira koje varijable se zadržavaju u rezultatu - kada je <span class="in">`NULL`</span> (zadano), zadržavaju se ključevi samo iz x tabele <span class="pp">|</span></span>
<span id="cb46-126"><a href="#cb46-126" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`na_matches`</span> <span class="pp">|</span> kontrolira kako se tretiraju <span class="in">`NA`</span> vrijednosti prilikom spajanja: 1. <span class="in">`"na"`</span> (zadano) - <span class="in">`NA`</span> vrijednosti se podudaraju s drugim <span class="in">`NA`</span> vrijednostima međusobno, 2. <span class="in">`"never"`</span> - <span class="in">`NA`</span> vrijednosti se ne podudaraju <span class="pp">|</span></span>
<span id="cb46-127"><a href="#cb46-127" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`multiple`</span> <span class="pp">|</span> kontrolira što se događa kada jedan red iz prvog podatkovnog okvira odgovara više redova iz drugog podatkovnog okvira: 1. <span class="in">`"all"`</span> (zadano) - zadržavaju se sva podudaranja (može rezultirati više redova nego u originalnoj tabeli), 2. <span class="in">`"any"`</span> - zadržava se bilo koje od podudaranja (obično prvo), 3. <span class="in">`"first"`</span> - zadržava se samo prvo podudaranje, 4. <span class="in">`"last"`</span> - zadržava se samo zadnje podudaranje <span class="pp">|</span></span>
<span id="cb46-128"><a href="#cb46-128" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`unmatched`</span> <span class="pp">|</span> određuje što se događa s redovima koji nemaju podudaranja: 1. <span class="in">`"drop"`</span> (zadano) - redovi bez podudaranja se uklanjaju (standardno ponašanje inner_join-a), 2. <span class="in">`"error"`</span> - funkcija će baciti grešku ako postoje redovi bez podudaranja <span class="pp">|</span></span>
<span id="cb46-129"><a href="#cb46-129" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`relationship`</span> <span class="pp">|</span> omogućuje eksplicitno definiranje očekivane prirode veze između tabela: 1. <span class="in">`NULL`</span> (zadano) - ne provjerava se tip veze, 2. <span class="in">`"one-to-one"`</span> - svaki red iz prvog podatkovnog okvira odgovara točno jednom redu iz drugog, 3. <span class="in">`"one-to-many"`</span> - svaki red iz prvog podatkovnog okvira može odgovarati više podatkovnih okvira iz drugog, 4. <span class="in">`"many-to-one"`</span> - više redova iz prvog podatkovnog okvira može odgovarati jednom redu iz drugog, 5. <span class="in">`"many-to-many"`</span> - više redova iz oba podatkovna okvira može se međusobno podudarati <span class="pp">|</span></span>
<span id="cb46-130"><a href="#cb46-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-131"><a href="#cb46-131" aria-hidden="true" tabindex="-1"></a>Prilikom strukturiranja kodova, pravila su slična uobičajenima. U prvi se red navodi prvi, odnosno **lijevi podatkovni okvir** kojem se pridružuje drugi. U novi se red piše glagol povezivanja, a podatkovni okvir i glagol povezivanja, kao i eventualni budući glagoli, povezuju se poveznicima.</span>
<span id="cb46-132"><a href="#cb46-132" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-133"><a href="#cb46-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-134"><a href="#cb46-134" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pridruživanje podataka `dplyr` paketom</span></span>
<span id="cb46-135"><a href="#cb46-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-136"><a href="#cb46-136" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mutacijsko pridruživanje</span></span>
<span id="cb46-137"><a href="#cb46-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-138"><a href="#cb46-138" aria-hidden="true" tabindex="-1"></a>**Mutacijsko pridruživanje** prvi je oblik pridruživanje koje omogućuje kombiniranje varijabli iz dva podatkovna okvira tako da prvo pronalazi parove zapisa pomoću funkcijom određenih ključeva, a zatim kopira varijable iz jednog podatkovnog okvira u drugi. Slično kao glagol <span class="in">`mutate()`</span>, koristi se za spajanje dodaju nove varijable s desne strane podatkovnog okvira.</span>
<span id="cb46-139"><a href="#cb46-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-140"><a href="#cb46-140" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Unutarnje pridruživanje</span></span>
<span id="cb46-141"><a href="#cb46-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-142"><a href="#cb46-142" aria-hidden="true" tabindex="-1"></a>Prvi oblik pridruživanja podatkovnih okvira je je **Unutarnje pridruživanje** kojim se spajaju dvija podatkovna okvira, ali samo unutar zajedničkih opažanja u oba podatkovna okvira. Drugim riječima, u novi se podatkovni okvir uvrštavaju samo ona opažanja zajednička za oba podatkovna okvira. Ono se izvodi glagolom <span class="in">`inner_join()`</span>.</span>
<span id="cb46-143"><a href="#cb46-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-144"><a href="#cb46-144" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-145"><a href="#cb46-145" aria-hidden="true" tabindex="-1"></a>Korištenje glagola <span class="in">`inner_join()`</span> na primjeru podatkovnih okvira <span class="in">`pokemon_names`</span> i <span class="in">`pokemon_strength`</span> vraća samo one Pokemone koji se nalaze u oba podatkovna okvira. U ovom slučaju to je ukupno 7 Pokemona: Bulbasaur, Rattata, Pikachu, Venonat, Rhyhorn, Mewtwo i Blaziken. Svi Pokemoni koji se nalaze samo u <span class="in">`pokemon_names`</span> ili samo u <span class="in">`pokemon_strength`</span> biti će isključeni iz ispisa.</span>
<span id="cb46-146"><a href="#cb46-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-149"><a href="#cb46-149" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-150"><a href="#cb46-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Unutarnje spajanje - zadržavaju se samo Pokemoni koji postoje u oba podatkovna okvira</span></span>
<span id="cb46-151"><a href="#cb46-151" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(</span>
<span id="cb46-152"><a href="#cb46-152" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-153"><a href="#cb46-153" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-154"><a href="#cb46-154" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-155"><a href="#cb46-155" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-156"><a href="#cb46-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-157"><a href="#cb46-157" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-158"><a href="#cb46-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-159"><a href="#cb46-159" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Vanjska pridruživanja</span></span>
<span id="cb46-160"><a href="#cb46-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-161"><a href="#cb46-161" aria-hidden="true" tabindex="-1"></a>Iste principe možemo primijeniti za **vanjska pridruživanja** koja zadržavaju opažanja koja se pojavljuju u barem jednom od podatkovnih okvira. Ova pridruživanja funkcioniraju dodavanjem dodatnog retka svakom podatkovnom okviru koji ima ključ koji odgovara svim slučajevima kada nijedan drugi ključ ne odgovara, a vrijednosti su popunjene s <span class="in">`NA`</span>. Postoje tri vrste vanjskih spajanja, a razlikuju se po tome koji podatkovni okvir dobiva dodatni redak s <span class="in">`NA`</span> vrijednostima: potpuno, lijevo i desno.</span>
<span id="cb46-162"><a href="#cb46-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-163"><a href="#cb46-163" aria-hidden="true" tabindex="-1"></a>**Lijevo pridruživanje** zadržava sve zapise iz lijevog ili prvog podatkovnog okvira, odnosno onog koji je među kodovima označen argumentom <span class="in">`x`</span>. Pritom će svaki redak iz lijevog podatkovnog okvira biti prisutan u rezultatu jer može, u najgorem slučaju, biti sparen s retkom <span class="in">`NA`</span> vrijednosti iz desnog podatkovnog okvira.</span>
<span id="cb46-164"><a href="#cb46-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-165"><a href="#cb46-165" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-166"><a href="#cb46-166" aria-hidden="true" tabindex="-1"></a>Glagol <span class="in">`left_join()`</span> vraća točno 15 redaka - koliko ih i ima u početnim podatkovnim okvirima. U prvom slučaju u kojem se u lijevi podatkovni okvir <span class="in">`pokemon_names`</span> dodaju vrijednosti iz <span class="in">`pokemon_strenght`</span>, za Pokemone koji postoje i u <span class="in">`pokemon_strength`</span>, vrijednosti "special_attack" i "special_defense" bit će popunjene stvarnim vrijednostima iz toga podatkovnog okvira. Za Pokemone koji postoje samo u <span class="in">`pokemon_names`</span> te vrijednosti biti će <span class="in">`NA`</span>. Suprotno vrijedi za drugi slučaj.</span>
<span id="cb46-167"><a href="#cb46-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-170"><a href="#cb46-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-171"><a href="#cb46-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Lijevo spajanje - svi Pokemoni iz pokemon_names su zadržani</span></span>
<span id="cb46-172"><a href="#cb46-172" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(</span>
<span id="cb46-173"><a href="#cb46-173" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-174"><a href="#cb46-174" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-175"><a href="#cb46-175" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-176"><a href="#cb46-176" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-177"><a href="#cb46-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-178"><a href="#cb46-178" aria-hidden="true" tabindex="-1"></a><span class="co"># Lijevo spajanje - svi Pokemoni iz pokemon_strength su zadržani</span></span>
<span id="cb46-179"><a href="#cb46-179" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(</span>
<span id="cb46-180"><a href="#cb46-180" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_strength,</span>
<span id="cb46-181"><a href="#cb46-181" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_names,</span>
<span id="cb46-182"><a href="#cb46-182" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-183"><a href="#cb46-183" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-184"><a href="#cb46-184" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-185"><a href="#cb46-185" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-186"><a href="#cb46-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-187"><a href="#cb46-187" aria-hidden="true" tabindex="-1"></a>**Desno pridruživanje** zadržava sve zapise iz desnog podatkovnog okvira koji je u kodovima označen argumentima <span class="in">`y`</span>. Svaki redak iz desnog podatkovnog okvira bit će prisutan u rezultatu jer može biti sparen s retkom <span class="in">`NA`</span> vrijednosti iz lijevog podatkovnog okvira. Rezultat i dalje odgovara strukturi podatkovnog okvira lijevog podatkovnog okvira koliko je to moguće.</span>
<span id="cb46-188"><a href="#cb46-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-189"><a href="#cb46-189" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-190"><a href="#cb46-190" aria-hidden="true" tabindex="-1"></a>Glagol <span class="in">`right_join()`</span> vraća 15 redaka kao i glagol <span class="in">`left_join()`</span> - koliko i ima u početnim podatkovnim okvirima. U prvom primjeru, za Pokemone koji postoje samo u <span class="in">`pokemon_strength`</span>, vrijednosti varijabli "id", "name" i "type_1" bit će <span class="in">`NA`</span> jer ti Pokemoni nisu prisutni u <span class="in">`pokemon_names`</span>, a isto, ali obrnuto, vrijedi u drugom primjeru.</span>
<span id="cb46-191"><a href="#cb46-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-194"><a href="#cb46-194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-195"><a href="#cb46-195" aria-hidden="true" tabindex="-1"></a><span class="co"># Desno spajanje - svi Pokemoni iz pokemon_strength su zadržani</span></span>
<span id="cb46-196"><a href="#cb46-196" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(</span>
<span id="cb46-197"><a href="#cb46-197" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-198"><a href="#cb46-198" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-199"><a href="#cb46-199" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-200"><a href="#cb46-200" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-201"><a href="#cb46-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-202"><a href="#cb46-202" aria-hidden="true" tabindex="-1"></a><span class="co"># Desno spajanje - svi Pokemoni iz pokemon_names su zadržani</span></span>
<span id="cb46-203"><a href="#cb46-203" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(</span>
<span id="cb46-204"><a href="#cb46-204" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_strength,</span>
<span id="cb46-205"><a href="#cb46-205" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_names,</span>
<span id="cb46-206"><a href="#cb46-206" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-207"><a href="#cb46-207" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-208"><a href="#cb46-208" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-209"><a href="#cb46-209" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-210"><a href="#cb46-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-211"><a href="#cb46-211" aria-hidden="true" tabindex="-1"></a>Konačno, **potpuno pridruživanje** (*full join*) zadržava sve zapise koji se pojavljuju u oba podatkovna okvira. Svaki redak i iz podatkovnog okvira označenog argumentom <span class="in">`x`</span> i iz onog označenog <span class="in">`y`</span> bit će uključen u rezultat jer obje tablice imaju rezervni redak s <span class="in">`NA`</span> vrijednostima.</span>
<span id="cb46-212"><a href="#cb46-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-213"><a href="#cb46-213" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-214"><a href="#cb46-214" aria-hidden="true" tabindex="-1"></a>Glagol <span class="in">`full_join()`</span> vraća 23 redaka, odnosno zbroj svih jedinstvenih Pokemona iz oba izvora. Pritom 16 Pokemona ima <span class="in">`NA`</span> ili za "special_attack" i "special_defense" ili pak za "name", "type_1" i "type_2". Samo sedam Pokemona imat će potpune podatke iz oba izvora jer su to oni pokemoni čije se vrijednosti nalaze u oba podatkovna okvira.</span>
<span id="cb46-215"><a href="#cb46-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-218"><a href="#cb46-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-219"><a href="#cb46-219" aria-hidden="true" tabindex="-1"></a><span class="co"># Potpuno spajanje - svi Pokemoni iz oba podatkovna okvira su zadržani</span></span>
<span id="cb46-220"><a href="#cb46-220" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(</span>
<span id="cb46-221"><a href="#cb46-221" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-222"><a href="#cb46-222" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-223"><a href="#cb46-223" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-224"><a href="#cb46-224" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-225"><a href="#cb46-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-226"><a href="#cb46-226" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-227"><a href="#cb46-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-228"><a href="#cb46-228" aria-hidden="true" tabindex="-1"></a><span class="fu">### Filtrirano pridruživanje</span></span>
<span id="cb46-229"><a href="#cb46-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-230"><a href="#cb46-230" aria-hidden="true" tabindex="-1"></a>Broj podudarnosti također određuje ponašanje filtrirnih pridruživanja. Pritom se razlikuju dvije funkcije koje imaju namjenu filtriranja, polu i anti pridruživanje. U oba slučaja važno je samo postojanje podudarnosti, a ne koliko ih puta ima. To znači da filtrirna spajanja nikada ne dupliciraju retke kao što to čine mutacijska spajanja.</span>
<span id="cb46-231"><a href="#cb46-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-232"><a href="#cb46-232" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Polu-pridruživanje</span></span>
<span id="cb46-233"><a href="#cb46-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-234"><a href="#cb46-234" aria-hidden="true" tabindex="-1"></a>Glagol <span class="in">`semi_join()`</span> zadržava sve retke iz podatkovnog okvira koji su označeni argumentom <span class="in">`x`</span>, a koji imaju barem jednu podudarnost u podatkovnom okviru <span class="in">`y`</span>.</span>
<span id="cb46-235"><a href="#cb46-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-236"><a href="#cb46-236" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-237"><a href="#cb46-237" aria-hidden="true" tabindex="-1"></a>Rezultat glagola <span class="in">`semi_join()`</span> je ispis od 7 Pokemona koji se nalaze i u <span class="in">`pokemon_names`</span> i u <span class="in">`pokemon_strength`</span>. Važno je primijetiti da rezultat sadrži samo stupce iz <span class="in">`pokemon_names`</span> jer <span class="in">`semi_join()`</span> ne dodaje nove stupce, nego samo filtrira retke na temelju postojanja podudarnosti.</span>
<span id="cb46-238"><a href="#cb46-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-241"><a href="#cb46-241" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-242"><a href="#cb46-242" aria-hidden="true" tabindex="-1"></a><span class="co"># Zadržavanje samo Pokemona koji imaju podatke o snazi</span></span>
<span id="cb46-243"><a href="#cb46-243" aria-hidden="true" tabindex="-1"></a><span class="fu">semi_join</span>(</span>
<span id="cb46-244"><a href="#cb46-244" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-245"><a href="#cb46-245" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-246"><a href="#cb46-246" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-247"><a href="#cb46-247" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-248"><a href="#cb46-248" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-249"><a href="#cb46-249" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-250"><a href="#cb46-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-251"><a href="#cb46-251" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Anti-pridruživanje</span></span>
<span id="cb46-252"><a href="#cb46-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-253"><a href="#cb46-253" aria-hidden="true" tabindex="-1"></a>Glagol <span class="in">`anti_join()`</span> predstavlja suprotnost glagolu <span class="in">`semi_join()`</span> jer vraća sve retke iz podatkovnog okvira <span class="in">`x`</span> koji nemaju podudarnost u podatkovnom okviru <span class="in">`y`</span>. Glagol je korista za pronalaženje nedostajućih vrijednosti koje su implicitno prisutne u podacima. Takve implicitno nedostajuće vrijednosti ne pojavljuju se kao <span class="in">`NA`</span>, nego postoje samo kao odsutnost određenih kombinacija vrijednosti.</span>
<span id="cb46-254"><a href="#cb46-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-255"><a href="#cb46-255" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-256"><a href="#cb46-256" aria-hidden="true" tabindex="-1"></a>Na primjer, možemo koristiti funkciju <span class="in">`anti_join()`</span> kako bismo pronašli Pokemone za koje nemamo podatke o specijalnim sposobnostima. Rezultat će sadržavati osam Pokemona koji se nalaze u <span class="in">`pokemon_names`</span>, ali ne i u <span class="in">`pokemon_strength`</span>. Ovi Pokemoni predstavljaju praznine u podacima o specijalnim sposobnostima. Funkcija <span class="in">`anti_join()`</span> olakšava identifikaciju takvih praznina što je prvi korak prema njihovom popunjavanju prikupljanjem dodatnih podataka ili razumijevanju zašto ti podaci nedostaju.</span>
<span id="cb46-257"><a href="#cb46-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-260"><a href="#cb46-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-261"><a href="#cb46-261" aria-hidden="true" tabindex="-1"></a><span class="co"># Pronalaženje Pokemona bez podataka o snazi</span></span>
<span id="cb46-262"><a href="#cb46-262" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(</span>
<span id="cb46-263"><a href="#cb46-263" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-264"><a href="#cb46-264" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-265"><a href="#cb46-265" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-266"><a href="#cb46-266" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-267"><a href="#cb46-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-268"><a href="#cb46-268" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-269"><a href="#cb46-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-270"><a href="#cb46-270" aria-hidden="true" tabindex="-1"></a>Primijetimo da zbroj redaka iz <span class="in">`semi_join()`</span> (7 Pokemona) i <span class="in">`anti_join()`</span> (8 Pokemona) daje točno ukupan broj redaka u <span class="in">`pokemon_names`</span> (15 Pokemona). To je zato što filtrirana pridruživanja zajedno predstavljaju komplementarne operacije koje zajedno pokrivaju sve retke iz početnog podatkovnog okvira.</span>
<span id="cb46-271"><a href="#cb46-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-272"><a href="#cb46-272" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dodatne funkcionalnosti `*_join()` glagola</span></span>
<span id="cb46-273"><a href="#cb46-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-274"><a href="#cb46-274" aria-hidden="true" tabindex="-1"></a><span class="fu">### Organizacija kodova</span></span>
<span id="cb46-275"><a href="#cb46-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-276"><a href="#cb46-276" aria-hidden="true" tabindex="-1"></a>Prilikom spajanja podatkovnih okvira u R-u, postoje dva osnovna pristupa organizaciji koda koji vode istom rezultatu, ali se razlikuju u sintaksi i čitljivosti.</span>
<span id="cb46-277"><a href="#cb46-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-278"><a href="#cb46-278" aria-hidden="true" tabindex="-1"></a>Prvi je pristup organizacije funkcijski te temelji se na tradicionalnoj sintaksi pozivanja funkcija u R-u. U ovom pristupu, <span class="in">`*_join()`</span> glagol poziva se eksplicitno, a svi argumenti navode se prema njihovim imenima. Prvi argument <span class="in">`x`</span> predstavlja prvi ili lijevi podatkovni okvir, a drugi argument <span class="in">`y`</span> predstavlja drugi ili desni podatkovni okvir, dok argument <span class="in">`by`</span> specificira ključeve prema kojima se spajanje izvršava. Ovakav zapis omogućuje potpunu jasnoću o tome koji se podaci nalaze na kojoj poziciji i koja je uloga svakog argumenta.</span>
<span id="cb46-279"><a href="#cb46-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-282"><a href="#cb46-282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-283"><a href="#cb46-283" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb46-284"><a href="#cb46-284" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-285"><a href="#cb46-285" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(</span>
<span id="cb46-286"><a href="#cb46-286" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-287"><a href="#cb46-287" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-288"><a href="#cb46-288" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-289"><a href="#cb46-289" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-290"><a href="#cb46-290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-291"><a href="#cb46-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-292"><a href="#cb46-292" aria-hidden="true" tabindex="-1"></a>Međutim, ova organizacija kodova ima i određena ograničenja. Kada je potrebno izvršiti više uzastopnih transformacija podataka, ugniježđavanje funkcijskih poziva postaje nepraktično i teško čitljivo, primjerice ako nakon spajanja želimo filtrirati podatke i odabrati samo određene stupce:</span>
<span id="cb46-293"><a href="#cb46-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-296"><a href="#cb46-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-297"><a href="#cb46-297" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb46-298"><a href="#cb46-298" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-299"><a href="#cb46-299" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(</span>
<span id="cb46-300"><a href="#cb46-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb46-301"><a href="#cb46-301" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(</span>
<span id="cb46-302"><a href="#cb46-302" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> pokemon_names,</span>
<span id="cb46-303"><a href="#cb46-303" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> pokemon_strength,</span>
<span id="cb46-304"><a href="#cb46-304" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> <span class="fu">join_by</span>(id, name)</span>
<span id="cb46-305"><a href="#cb46-305" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-306"><a href="#cb46-306" aria-hidden="true" tabindex="-1"></a>    special_attack <span class="sc">&gt;</span> <span class="dv">50</span></span>
<span id="cb46-307"><a href="#cb46-307" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb46-308"><a href="#cb46-308" aria-hidden="true" tabindex="-1"></a>  id, name, type_1, special_attack</span>
<span id="cb46-309"><a href="#cb46-309" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-310"><a href="#cb46-310" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-311"><a href="#cb46-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-312"><a href="#cb46-312" aria-hidden="true" tabindex="-1"></a>Drugi, pristupom koristi operator cjevovoda <span class="in">`|&gt;`</span>. Njime se podatkovni okvir <span class="in">`pokemon_names`</span> "prosljeđuje" glagolu <span class="in">`inner_join()`</span> kao njezin prvi argument, a operator <span class="in">`|&gt;`</span> uzima rezultat s lijeve strane i automatski ga postavlja kao prvi argument funkcije s desne strane. Budući da <span class="in">`inner_join()`</span> očekuje podatkovni okvir <span class="in">`x`</span>, ili prvi podatkovni okvir, kao prvi argument, <span class="in">`pokemon_names`</span> zauzima tu poziciju, dok <span class="in">`pokemon_strength`</span> postaje argument <span class="in">`y`</span> ili drugi podatkovni okvir.</span>
<span id="cb46-313"><a href="#cb46-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-316"><a href="#cb46-316" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-317"><a href="#cb46-317" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb46-318"><a href="#cb46-318" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-319"><a href="#cb46-319" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb46-320"><a href="#cb46-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id, name))</span>
<span id="cb46-321"><a href="#cb46-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-322"><a href="#cb46-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-323"><a href="#cb46-323" aria-hidden="true" tabindex="-1"></a>Primjerice, isti niz operacija koji smo prethodno prikazali u funkcijskom stilu, u onom kod kojeg se koristi operator <span class="in">`|&gt;`</span> izgleda bi ovako:</span>
<span id="cb46-324"><a href="#cb46-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-327"><a href="#cb46-327" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-328"><a href="#cb46-328" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb46-329"><a href="#cb46-329" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb46-330"><a href="#cb46-330" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb46-331"><a href="#cb46-331" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id, name)) <span class="sc">|&gt;</span></span>
<span id="cb46-332"><a href="#cb46-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(special_attack <span class="sc">&gt;</span> <span class="dv">50</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-333"><a href="#cb46-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, type_1, special_attack)</span>
<span id="cb46-334"><a href="#cb46-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-335"><a href="#cb46-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-336"><a href="#cb46-336" aria-hidden="true" tabindex="-1"></a>Ovaj kod jasno pokazuje slijed operacija: započinjemo s <span class="in">`pokemon_names`</span>, kombiniramo ga s <span class="in">`pokemon_strength`</span>, filtriramo retke gdje je specijalni napad veći od 50 i konačno odabiremo samo željene stupce. Svaki korak logički slijedi iz prethodnog što čini kod intuitivnim za čitanje i razumijevanje.</span>
<span id="cb46-337"><a href="#cb46-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-338"><a href="#cb46-338" aria-hidden="true" tabindex="-1"></a>Iako su oba pristupa organizaciji kodova validna, u nastavku ćemo koristiti pristup s operatorom <span class="in">`|&gt;`</span> jer on bolje odgovara načinu na koji ljudi razmišljaju o obradi podataka kao o nizu logički povezanih koraka transformacije. Ovaj pristup također se usklađuje s filozofijom paketa <span class="in">`dplyr`</span> i preporukama većeg dijela stručne literature.</span>
<span id="cb46-339"><a href="#cb46-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-340"><a href="#cb46-340" aria-hidden="true" tabindex="-1"></a><span class="fu">### Korištenje dodatnih argumenata</span></span>
<span id="cb46-341"><a href="#cb46-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-342"><a href="#cb46-342" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Specificiranje argumenta za ključeve</span></span>
<span id="cb46-343"><a href="#cb46-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-344"><a href="#cb46-344" aria-hidden="true" tabindex="-1"></a>Argument <span class="in">`by`</span> u funkcijama za spajanje podatkovnih okvira služi za eksplicitno specificiranje ključeva - varijabli koje se koriste za povezivanje zapisa iz dva podatkovna okvira. Ovaj argument govori R-u koje stupce treba usporediti prilikom traženja odgovarajućih parova redaka između dva podatkovna okvira. <span class="in">`by`</span> može specificirati jedan ili više ključeva, a može se koristiti i za spajanje stupaca koji imaju različita imena u dva podatkovna okvira.</span>
<span id="cb46-345"><a href="#cb46-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-346"><a href="#cb46-346" aria-hidden="true" tabindex="-1"></a>U modernoj sintaksi, preporučuje se korištenje funkcije <span class="in">`join_by()`</span> kao nastavak na <span class="in">`by`</span> argument umjesto starijeg pristupa s tekstualnim vektorima. Funkcija <span class="in">`join_by()`</span> jasnija je, fleksibilnija i omogućuje specifikaciju složenijih uvjeta spajanja. U funkciju se zapravo umeću nazivi varijabli na temelju kojih se nastoji spojiti podatkovne okvire.</span>
<span id="cb46-347"><a href="#cb46-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-348"><a href="#cb46-348" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-349"><a href="#cb46-349" aria-hidden="true" tabindex="-1"></a>Često želimo spajanje izvršiti samo prema jednom ključu, čak i kada postoje drugi zajednički stupci. Na primjer, može biti korisno zadržati oba stupca name kako bismo provjerili jesu li potpuno identični.</span>
<span id="cb46-350"><a href="#cb46-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-353"><a href="#cb46-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-354"><a href="#cb46-354" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb46-355"><a href="#cb46-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id, name))</span>
<span id="cb46-356"><a href="#cb46-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-357"><a href="#cb46-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-358"><a href="#cb46-358" aria-hidden="true" tabindex="-1"></a>U ovom slučaju, R će spojiti redove samo na temelju "id" i "name" vrijednosti.</span>
<span id="cb46-359"><a href="#cb46-359" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-360"><a href="#cb46-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-361"><a href="#cb46-361" aria-hidden="true" tabindex="-1"></a>Pritom argument <span class="in">`by`</span> nije obavezan. Ako se ne navedete, onda će R automatski primijeniti **prirodno spajanje** (*natural join*) koje znači da će R automatski prepoznati sve stupce koji imaju identična imena u oba podatkovna okvira i koristiti ih kao ključeve za spajanje. Ova automatska detekcija temelji se na heuristici koja u mnogim situacijama daje željene rezultate, ali nije uvijek pouzdana. Upravo zato je dobra praksa eksplicitno navoditi argument <span class="in">`by`</span>, čak i kada očekujemo da će automatska detekcija raditi ispravno.</span>
<span id="cb46-362"><a href="#cb46-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-363"><a href="#cb46-363" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-366"><a href="#cb46-366" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-367"><a href="#cb46-367" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb46-368"><a href="#cb46-368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength)</span>
<span id="cb46-369"><a href="#cb46-369" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-370"><a href="#cb46-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-371"><a href="#cb46-371" aria-hidden="true" tabindex="-1"></a>Kada izvršimo ovu naredbu, R automatski prepoznaje da obje tablice imaju zajedničku varijablu "id" i "name" te ju koristi kao ključ za spajanje. U konzoli ćemo vidjeti poruku koja potvrđuje ovaj automatski odabir: <span class="in">`Joining with 'by = join_by(id)'`</span>. Rezultat će biti podatkovni okvir koji sadrži sve Pokemone iz <span class="in">`pokemon_names`</span> (svi redci su zadržani) obogaćen dodatnim stupcima "special_attack" i "special_defense" iz podatkovnog okvira <span class="in">`pokemon_strength`</span>.</span>
<span id="cb46-372"><a href="#cb46-372" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-373"><a href="#cb46-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-374"><a href="#cb46-374" aria-hidden="true" tabindex="-1"></a>Konačno, ponekad je potrebno pridružiti podatke gdje ključevi imaju različita imena u dva podatkovna okvira. Na primjer, možda imamo podatkovni okvir u kojem se Pokemon ID nalazi pod nazivom "pokemon_id", a u drugom samo "id". U ovom primjeru koristimo sintaksu <span class="in">`join_by(pokemon_id == id)`</span> koja jasno specificira da stupac "pokemon_id" iz prvog okvira odgovara stupcu "id" iz drugog okvira.</span>
<span id="cb46-375"><a href="#cb46-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-376"><a href="#cb46-376" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Sufiksi</span></span>
<span id="cb46-377"><a href="#cb46-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-378"><a href="#cb46-378" aria-hidden="true" tabindex="-1"></a>Argument <span class="in">`suffix`</span> u glagolima za pridruživanje podatkovnih okvira služi za razlikovanje stupaca koji imaju identična imena u oba podatkovna okvira, ali nisu korišteni kao ključevi za spajanje. Kada R spaja dva podatkovna okvira, svi stupci iz oba izvora zadržavaju se u konačnom rezultatu. Međutim, ako oba podatkovna okvira sadrže stupac s istim nazivom, R mora dodati oznake tim stupcima kako bi ih razlikovao. Argument <span class="in">`suffix`</span> prima vektor od dva tekstualna elementa gdje prvi element označava sufiks koji će se dodati stupcima iz prvog podatkovnog okvira (<span class="in">`x`</span>), a drugi element označava sufiks za stupce iz drugog podatkovnog okvira (<span class="in">`y`</span>). Na ovaj način, korisnik može kontrolirati kako će se duplicirani nazivi stupaca razlikovati u konačnom rezultatu čineći kod čitljivijim i smislenijim.</span>
<span id="cb46-379"><a href="#cb46-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-380"><a href="#cb46-380" aria-hidden="true" tabindex="-1"></a>Ako se argument ne navede, R će automatski primijeniti zadane sufikse koji su <span class="in">`.x`</span> za stupce iz prvog podatkovnog okvira i <span class="in">`.y`</span> za stupce iz drugog podatkovnog okvira. Ovi zadani sufiksi relativno su neutralni i univerzalni, ali nisu uvijek najdeskriptivniji za specifičan kontekst analize.</span>
<span id="cb46-381"><a href="#cb46-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-382"><a href="#cb46-382" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-383"><a href="#cb46-383" aria-hidden="true" tabindex="-1"></a>Ako kreiramo podatkovni okvir gdje oba podatkovna okvira sadrže stupac "name", ali se kombiniraju samo prema varijabli "id", bez argumenta <span class="in">`suffix`</span>, rezultat će imati stupce "name.x" (iz <span class="in">`pokemon_names`</span>) i "name.y" (iz <span class="in">`pokemon_strength`</span>). U drugom slučaju, ako je argument <span class="in">`suffix`</span> s vrijednostima <span class="in">`_elemental_df`</span> i <span class="in">`_stat`</span> naveden, sufiks jasno označava da stupac dolazi iz <span class="in">`pokemon_names`</span> podatkovnog okvira ako naziv stupca sadrži sufiks "<span class="sc">\_</span>elemental_df" u nazivu ili <span class="in">`pokemon_strength`</span> ako sadrži "<span class="sc">\_</span>stat" sufiks u nazivu. Ovakvi nazivi čine kod daleko čitljivijim.</span>
<span id="cb46-384"><a href="#cb46-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-387"><a href="#cb46-387" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-388"><a href="#cb46-388" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb46-389"><a href="#cb46-389" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id))</span>
<span id="cb46-390"><a href="#cb46-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-391"><a href="#cb46-391" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="sc">|&gt;</span></span>
<span id="cb46-392"><a href="#cb46-392" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_strength, <span class="fu">join_by</span>(id), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_elemental_df"</span>, <span class="st">"_stat"</span>))</span>
<span id="cb46-393"><a href="#cb46-393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-394"><a href="#cb46-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-395"><a href="#cb46-395" aria-hidden="true" tabindex="-1"></a>Konačno, ako u argumentu <span class="in">`by`</span> definiramo dva ključa za pridruživanje, u ovom slučaju i "id" i "name", neće biti potrebno definiranje sufiksa jer se neće stvarati dupli stupci za podatke o imenima Pokemona.</span>
<span id="cb46-396"><a href="#cb46-396" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-397"><a href="#cb46-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-398"><a href="#cb46-398" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Nejednako pridruživanje</span></span>
<span id="cb46-399"><a href="#cb46-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-400"><a href="#cb46-400" aria-hidden="true" tabindex="-1"></a>Do su bila navedena samo jednaka pridruživanja, odnosno ona pridruživanja gdje se redci podudaraju ako je ključ iz <span class="in">`x`</span> jednak ključu iz <span class="in">`y`</span> argumenta. Ipak, postoje i drugi načini određivanja podudarnosti između parova redaka.</span>
<span id="cb46-401"><a href="#cb46-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-402"><a href="#cb46-402" aria-hidden="true" tabindex="-1"></a>U jednakim pridruživanjima ključevi iz <span class="in">`x`</span> i <span class="in">`y`</span> uvijek su jednaki pa je dovoljno prikazati samo jedan ključ u rezultatu. Međutim, kod nejednakih pridruživanja ključevi mogu imati različite vrijednosti što znači da je potrebno prikazati oba ključa što se kod <span class="in">`*_join()`</span> glagola omogućuje postavljanjem argumenta <span class="in">`keep = TRUE`</span>.</span>
<span id="cb46-403"><a href="#cb46-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-404"><a href="#cb46-404" aria-hidden="true" tabindex="-1"></a><span class="in">`dplyr`</span> identificira četiri posebno korisne vrste nejednakih pridruživanja:</span>
<span id="cb46-405"><a href="#cb46-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-406"><a href="#cb46-406" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>križna pridruživanja koja podudaruju svaki par redaka;</span>
<span id="cb46-407"><a href="#cb46-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-408"><a href="#cb46-408" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>nejednakosna pridruživanja s operatorima <span class="in">`&lt;`</span>, <span class="in">`&lt;=`</span>, <span class="in">`&gt;`</span> i <span class="in">`&gt;=`</span> umjesto <span class="in">`==`</span>;</span>
<span id="cb46-409"><a href="#cb46-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-410"><a href="#cb46-410" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>klizna pridruživanja koja pronalaze samo najbližu podudarnost te</span>
<span id="cb46-411"><a href="#cb46-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-412"><a href="#cb46-412" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>preklopna pridruživanja koja se koriste za rad s rasponima vrijednosti.</span>
<span id="cb46-413"><a href="#cb46-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-414"><a href="#cb46-414" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Nejednakosno pridruživanja</span></span>
<span id="cb46-415"><a href="#cb46-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-416"><a href="#cb46-416" aria-hidden="true" tabindex="-1"></a>Nejednakosna spajanja (engl. *inequality joins*) koriste operatore <span class="in">`&lt;`</span>, <span class="in">`&lt;=`</span>, <span class="in">`&gt;=`</span> ili <span class="in">`&gt;`</span> za ograničavanje skupa mogućih podudarnosti.</span>
<span id="cb46-417"><a href="#cb46-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-418"><a href="#cb46-418" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-419"><a href="#cb46-419" aria-hidden="true" tabindex="-1"></a>Jedan koristan primjer s Pokemon podacima bio bi rangiranje Pokemona prema njihovoj ukupnoj snazi. Pretpostavimo da želimo za svakog Pokemona pronaći sve one koji su jači od njega.</span>
<span id="cb46-420"><a href="#cb46-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-423"><a href="#cb46-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-424"><a href="#cb46-424" aria-hidden="true" tabindex="-1"></a><span class="co"># Priprema podataka - izračun ukupne snage</span></span>
<span id="cb46-425"><a href="#cb46-425" aria-hidden="true" tabindex="-1"></a>pokemon_power <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-426"><a href="#cb46-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_power =</span> attack <span class="sc">+</span> defense <span class="sc">+</span> special_attack <span class="sc">+</span> special_defense) <span class="sc">|&gt;</span></span>
<span id="cb46-427"><a href="#cb46-427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, total_power) <span class="sc">|&gt;</span></span>
<span id="cb46-428"><a href="#cb46-428" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_power))</span>
<span id="cb46-429"><a href="#cb46-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-430"><a href="#cb46-430" aria-hidden="true" tabindex="-1"></a><span class="co"># Nejednakosno spajanje - pronalaženje svih jačih protivnika</span></span>
<span id="cb46-431"><a href="#cb46-431" aria-hidden="true" tabindex="-1"></a>stronger_pokemon <span class="ot">&lt;-</span> pokemon_power <span class="sc">|&gt;</span></span>
<span id="cb46-432"><a href="#cb46-432" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pokemon_power, <span class="at">by =</span> <span class="fu">join_by</span>(total_power <span class="sc">&lt;</span> total_power), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_base"</span>, <span class="st">"_opponent"</span>))</span>
<span id="cb46-433"><a href="#cb46-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-434"><a href="#cb46-434" aria-hidden="true" tabindex="-1"></a><span class="co"># Brojanje jačih Pokemona i izračun ranga</span></span>
<span id="cb46-435"><a href="#cb46-435" aria-hidden="true" tabindex="-1"></a>pokemon_ranking <span class="ot">&lt;-</span> stronger_pokemon <span class="sc">|&gt;</span></span>
<span id="cb46-436"><a href="#cb46-436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name_base, total_power_base) <span class="sc">|&gt;</span></span>
<span id="cb46-437"><a href="#cb46-437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb46-438"><a href="#cb46-438" aria-hidden="true" tabindex="-1"></a>    <span class="at">stronger_count =</span> <span class="fu">n</span>(),</span>
<span id="cb46-439"><a href="#cb46-439" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb46-440"><a href="#cb46-440" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb46-441"><a href="#cb46-441" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> stronger_count <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-442"><a href="#cb46-442" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rank)</span>
<span id="cb46-443"><a href="#cb46-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-444"><a href="#cb46-444" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb46-445"><a href="#cb46-445" aria-hidden="true" tabindex="-1"></a>pokemon_ranking</span>
<span id="cb46-446"><a href="#cb46-446" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-447"><a href="#cb46-447" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-448"><a href="#cb46-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-449"><a href="#cb46-449" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-450"><a href="#cb46-450" aria-hidden="true" tabindex="-1"></a>Drugi praktični primjer je kategorizacija Pokemona po razinama snage. Pretpostavimo da želimo razvrstati Pokemone u kategorije "Slabiji", "Srednji" i "Jači" na temelju njihovog napada, a zatim pronaći sve Pokemone u tim kategorijama.</span>
<span id="cb46-451"><a href="#cb46-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-454"><a href="#cb46-454" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-455"><a href="#cb46-455" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiranje granica kategorija</span></span>
<span id="cb46-456"><a href="#cb46-456" aria-hidden="true" tabindex="-1"></a>power_tiers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb46-457"><a href="#cb46-457" aria-hidden="true" tabindex="-1"></a>  <span class="at">tier_name =</span> <span class="fu">c</span>(<span class="st">"Weak"</span>, <span class="st">"Middle"</span>, <span class="st">"Strong"</span>),</span>
<span id="cb46-458"><a href="#cb46-458" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_attack =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">100</span>),</span>
<span id="cb46-459"><a href="#cb46-459" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_attack =</span> <span class="fu">c</span>(<span class="dv">49</span>, <span class="dv">99</span>, <span class="dv">200</span>)</span>
<span id="cb46-460"><a href="#cb46-460" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-461"><a href="#cb46-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-462"><a href="#cb46-462" aria-hidden="true" tabindex="-1"></a><span class="co"># Kategorizacija Pokemona prema snazi napada</span></span>
<span id="cb46-463"><a href="#cb46-463" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-464"><a href="#cb46-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(power_tiers, <span class="fu">join_by</span>(attack <span class="sc">&gt;=</span> min_attack, attack <span class="sc">&lt;=</span> max_attack)) <span class="sc">|&gt;</span></span>
<span id="cb46-465"><a href="#cb46-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, tier_name) <span class="sc">|&gt;</span></span>
<span id="cb46-466"><a href="#cb46-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(attack)</span>
<span id="cb46-467"><a href="#cb46-467" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-468"><a href="#cb46-468" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-469"><a href="#cb46-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-470"><a href="#cb46-470" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Klizna spajanja</span></span>
<span id="cb46-471"><a href="#cb46-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-472"><a href="#cb46-472" aria-hidden="true" tabindex="-1"></a>**Klizna spajanja** (engl. *rolling joins*) predstavljaju poseban tip nejednakosnih spajanja gdje umjesto dobivanja svakog retka koji zadovoljava nejednakost, dobivamo samo najbliži redak. Bilo koje nejednakosno spajanje možemo pretvoriti u klizno spajanje dodavanjem funkcije <span class="in">`closest()`</span>.</span>
<span id="cb46-473"><a href="#cb46-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-474"><a href="#cb46-474" aria-hidden="true" tabindex="-1"></a>Klizna spajanja posebno su korisna kada imamo dva podatkovna okvira s datumima koji se ne poklapaju savršeno i želimo pronaći najbliži datum u jednom podatkovnom okviru koji dolazi prije ili nakon nekog datuma u drugom podatkovnom okviru.</span>
<span id="cb46-475"><a href="#cb46-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-476"><a href="#cb46-476" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-477"><a href="#cb46-477" aria-hidden="true" tabindex="-1"></a>Za demonstraciju kliznog spajanja s Pokemon podacima, zamislimo scenarij gdje imamo podatke o Pokemon generacijama i želimo svakom Pokemonu dodijeliti generaciju u kojoj je predstavljen. Stvorit ćemo tablicu generacija i koristit ćemo klizno spajanje za pronalaženje odgovarajuće generacije:</span>
<span id="cb46-478"><a href="#cb46-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-481"><a href="#cb46-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-482"><a href="#cb46-482" aria-hidden="true" tabindex="-1"></a><span class="co"># Tablica s godinama predstavljanja generacija</span></span>
<span id="cb46-483"><a href="#cb46-483" aria-hidden="true" tabindex="-1"></a>pokemon_generations <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb46-484"><a href="#cb46-484" aria-hidden="true" tabindex="-1"></a>  <span class="at">generation =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb46-485"><a href="#cb46-485" aria-hidden="true" tabindex="-1"></a>  <span class="at">year_introduced =</span> <span class="fu">c</span>(<span class="dv">1996</span>, <span class="dv">1999</span>, <span class="dv">2002</span>, <span class="dv">2006</span>, <span class="dv">2010</span>, <span class="dv">2013</span>),</span>
<span id="cb46-486"><a href="#cb46-486" aria-hidden="true" tabindex="-1"></a>  <span class="at">generation_name =</span> <span class="fu">c</span>(<span class="st">"Kanto"</span>, <span class="st">"Johto"</span>, <span class="st">"Hoenn"</span>, <span class="st">"Sinnoh"</span>, <span class="st">"Unova"</span>, <span class="st">"Kalos"</span>)</span>
<span id="cb46-487"><a href="#cb46-487" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-488"><a href="#cb46-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-489"><a href="#cb46-489" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulirajmo podatke o godinama predstavljanja Pokemona</span></span>
<span id="cb46-490"><a href="#cb46-490" aria-hidden="true" tabindex="-1"></a>pokemon_with_years <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-491"><a href="#cb46-491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">&lt;=</span> <span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-492"><a href="#cb46-492" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-493"><a href="#cb46-493" aria-hidden="true" tabindex="-1"></a>    <span class="at">introduced_year =</span> <span class="fu">case_when</span>(</span>
<span id="cb46-494"><a href="#cb46-494" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1996</span>,</span>
<span id="cb46-495"><a href="#cb46-495" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1999</span>,</span>
<span id="cb46-496"><a href="#cb46-496" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="dv">2002</span>,</span>
<span id="cb46-497"><a href="#cb46-497" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="dv">2006</span>,</span>
<span id="cb46-498"><a href="#cb46-498" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">2010</span>,</span>
<span id="cb46-499"><a href="#cb46-499" aria-hidden="true" tabindex="-1"></a>      generation <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="dv">2013</span>,</span>
<span id="cb46-500"><a href="#cb46-500" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb46-501"><a href="#cb46-501" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-502"><a href="#cb46-502" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb46-503"><a href="#cb46-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, generation, introduced_year)</span>
<span id="cb46-504"><a href="#cb46-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-505"><a href="#cb46-505" aria-hidden="true" tabindex="-1"></a><span class="co"># Klizno spajanje za pronalaženje odgovarajuće generacije</span></span>
<span id="cb46-506"><a href="#cb46-506" aria-hidden="true" tabindex="-1"></a>pokemon_with_generation <span class="ot">&lt;-</span> pokemon_with_years <span class="sc">|&gt;</span></span>
<span id="cb46-507"><a href="#cb46-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(pokemon_generations, <span class="fu">join_by</span>(<span class="fu">closest</span>(introduced_year <span class="sc">&gt;=</span> year_introduced)))</span>
<span id="cb46-508"><a href="#cb46-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-509"><a href="#cb46-509" aria-hidden="true" tabindex="-1"></a><span class="co"># Prikaz rezultata</span></span>
<span id="cb46-510"><a href="#cb46-510" aria-hidden="true" tabindex="-1"></a>pokemon_with_generation</span>
<span id="cb46-511"><a href="#cb46-511" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-512"><a href="#cb46-512" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-513"><a href="#cb46-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-514"><a href="#cb46-514" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-515"><a href="#cb46-515" aria-hidden="true" tabindex="-1"></a>Drugi primjer kliznog spajanja mogao bi uključivati usporedbu statistika Pokemona. Pretpostavimo da želimo za svakog Pokemona pronaći onog s najbližom vrijednošću napada.</span>
<span id="cb46-516"><a href="#cb46-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-519"><a href="#cb46-519" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-520"><a href="#cb46-520" aria-hidden="true" tabindex="-1"></a><span class="co"># Pronalaženje Pokemona s najbližom vrijednošću napada</span></span>
<span id="cb46-521"><a href="#cb46-521" aria-hidden="true" tabindex="-1"></a>closest_attack <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-522"><a href="#cb46-522" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb46-523"><a href="#cb46-523" aria-hidden="true" tabindex="-1"></a>    pokemon_dataset,</span>
<span id="cb46-524"><a href="#cb46-524" aria-hidden="true" tabindex="-1"></a>    <span class="fu">join_by</span>(<span class="fu">closest</span>(attack <span class="sc">&gt;=</span> attack)),</span>
<span id="cb46-525"><a href="#cb46-525" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_original"</span>, <span class="st">"_closest"</span>)</span>
<span id="cb46-526"><a href="#cb46-526" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-527"><a href="#cb46-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-528"><a href="#cb46-528" aria-hidden="true" tabindex="-1"></a><span class="co"># Prikaz rezultata</span></span>
<span id="cb46-529"><a href="#cb46-529" aria-hidden="true" tabindex="-1"></a>closest_attack <span class="sc">|&gt;</span></span>
<span id="cb46-530"><a href="#cb46-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name_original, attack_original, name_closest, attack_closest)</span>
<span id="cb46-531"><a href="#cb46-531" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-532"><a href="#cb46-532" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-533"><a href="#cb46-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-534"><a href="#cb46-534" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Križna pridruživanja</span></span>
<span id="cb46-535"><a href="#cb46-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-536"><a href="#cb46-536" aria-hidden="true" tabindex="-1"></a>**Križno pridruživanja** (engl. *cross join*) podudara sve kombinacije redaka generirajući Kartezijev produkt redaka. To znači da će rezultat imati <span class="in">`nrow(x) * nrow(y)`</span> redaka. Križna pridruživanja korisna su prilikom generiranja svih mogućih kombinacija podudaranja.</span>
<span id="cb46-537"><a href="#cb46-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-538"><a href="#cb46-538" aria-hidden="true" tabindex="-1"></a>Ona koriste drugačiju funkciju jer ne postoji razlika između unutarnjeg, lijevog, desnog i potpunog pridruživanja kada se podudara svaki redak, nego se koristi funkcija <span class="in">`cross_join()`</span> koja direktno kreira Kartezijev produkt bez obzira na vrijednosti u stupcima.</span>
<span id="cb46-539"><a href="#cb46-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-540"><a href="#cb46-540" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-541"><a href="#cb46-541" aria-hidden="true" tabindex="-1"></a>Zamislimo scenarij u kojem organiziramo Pokemon turnir gdje se svaki Pokemon mora boriti protiv svakog drugog Pokemona iz podatkovnog okvira <span class="in">`pokemon_names`</span>. Ograničit ćemo turnir na samo četiri Pokemona: Bulbasaur, Charmander, Squirtle i Pikachu. Ovo je klasičan primjer situacije gdje je križno spajanje idealno rješenje koje se ostvaruje funkcijom <span class="in">`cross_join()`</span>.</span>
<span id="cb46-542"><a href="#cb46-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-545"><a href="#cb46-545" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-546"><a href="#cb46-546" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiranje podatkovnog okvira s Pokemonima</span></span>
<span id="cb46-547"><a href="#cb46-547" aria-hidden="true" tabindex="-1"></a>tournament_pokemon <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-548"><a href="#cb46-548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"bulbasaur"</span>, <span class="st">"charmander"</span>, <span class="st">"squirtle"</span>, <span class="st">"pikachu"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb46-549"><a href="#cb46-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name)</span>
<span id="cb46-550"><a href="#cb46-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-551"><a href="#cb46-551" aria-hidden="true" tabindex="-1"></a><span class="co"># Križno pridruživanje</span></span>
<span id="cb46-552"><a href="#cb46-552" aria-hidden="true" tabindex="-1"></a>all_tournament_matches <span class="ot">&lt;-</span> tournament_pokemon <span class="sc">|&gt;</span></span>
<span id="cb46-553"><a href="#cb46-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cross_join</span>(tournament_pokemon, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_1"</span>, <span class="st">"_2"</span>))</span>
<span id="cb46-554"><a href="#cb46-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-555"><a href="#cb46-555" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb46-556"><a href="#cb46-556" aria-hidden="true" tabindex="-1"></a>all_tournament_matches</span>
<span id="cb46-557"><a href="#cb46-557" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-558"><a href="#cb46-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-559"><a href="#cb46-559" aria-hidden="true" tabindex="-1"></a>Funkcije <span class="in">`cross_join()`</span> stvara 225 redaka koji predstavljaju sve moguće kombinacije borbi. Argument <span class="in">`suffix = c("_1", "_2")`</span> dodaje sufikse stupcima kako bi razlikovali prvog borca ("<span class="sc">\_</span>1") od drugog borca ("<span class="sc">\_</span>2").</span>
<span id="cb46-560"><a href="#cb46-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-561"><a href="#cb46-561" aria-hidden="true" tabindex="-1"></a>Ipak, rezultati uključuju i borbe protiv samog sebe, primjerice Bulbasaur protiv Bulbasaura (redak 1), i duplikate prema različitom redoslijedu, primjerice Bulbasaur protiv Charmander (redak 2) i Charmander protiv Bulbasaura (redak 5).</span>
<span id="cb46-562"><a href="#cb46-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-563"><a href="#cb46-563" aria-hidden="true" tabindex="-1"></a>Borbe samih protiv sebe eliminiraju se glagolom <span class="in">`filter()`</span> iz <span class="in">`dplyr`</span> paketa i logičkim operatorom <span class="in">`!=`</span> čime je moguće eliminirati retke u kojima su dvije vrijednosti u dvije varijable iste. Ovdje je zapravo riječ o obliku nejednakosnog pridruživanja.</span>
<span id="cb46-564"><a href="#cb46-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-567"><a href="#cb46-567" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-568"><a href="#cb46-568" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminiranje borbi samih protiv sebe</span></span>
<span id="cb46-569"><a href="#cb46-569" aria-hidden="true" tabindex="-1"></a>valid_tournament_matches <span class="ot">&lt;-</span> all_tournament_matches <span class="sc">|&gt;</span></span>
<span id="cb46-570"><a href="#cb46-570" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id_1 <span class="sc">!=</span> id_2)</span>
<span id="cb46-571"><a href="#cb46-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-572"><a href="#cb46-572" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb46-573"><a href="#cb46-573" aria-hidden="true" tabindex="-1"></a>valid_tournament_matches</span>
<span id="cb46-574"><a href="#cb46-574" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-575"><a href="#cb46-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-576"><a href="#cb46-576" aria-hidden="true" tabindex="-1"></a>Što se tiče duplikata, možemo koristiti nejednako pridruživanje s operatorom <span class="in">`&lt;`</span> kako bismo generirali samo jedinstvene kombinacije unutar funkcije <span class="in">`join_by()`</span> u <span class="in">`by`</span> argumentu.</span>
<span id="cb46-577"><a href="#cb46-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-580"><a href="#cb46-580" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-581"><a href="#cb46-581" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminiranje duplikata</span></span>
<span id="cb46-582"><a href="#cb46-582" aria-hidden="true" tabindex="-1"></a>unique_matches <span class="ot">&lt;-</span> tournament_pokemon <span class="sc">|&gt;</span></span>
<span id="cb46-583"><a href="#cb46-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(tournament_pokemon, <span class="fu">join_by</span>(id <span class="sc">&lt;</span> id), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_1"</span>, <span class="st">"_2"</span>))</span>
<span id="cb46-584"><a href="#cb46-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-585"><a href="#cb46-585" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled podataka</span></span>
<span id="cb46-586"><a href="#cb46-586" aria-hidden="true" tabindex="-1"></a>unique_matches</span>
<span id="cb46-587"><a href="#cb46-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-588"><a href="#cb46-588" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb46-589"><a href="#cb46-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-590"><a href="#cb46-590" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Preklopna spajanja</span></span>
<span id="cb46-591"><a href="#cb46-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-592"><a href="#cb46-592" aria-hidden="true" tabindex="-1"></a>**Preklopna spajanja** (engl. *overlap joins*) pružaju tri pomoćne funkcije koje koriste nejednakosna spajanja kako bi olakšale rad s intervalima vrijednosti:</span>
<span id="cb46-593"><a href="#cb46-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-594"><a href="#cb46-594" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span><span class="in">`between(x, y_lower, y_upper)`</span> je skraćenica za <span class="in">`x &gt;= y_lower, x &lt;= y_upper`</span>,</span>
<span id="cb46-595"><a href="#cb46-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-596"><a href="#cb46-596" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span><span class="in">`within(x_lower, x_upper, y_lower, y_upper)`</span> je skraćenica za <span class="in">`x_lower &gt;= y_lower, x_upper &lt;= y_upper`</span> i</span>
<span id="cb46-597"><a href="#cb46-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-598"><a href="#cb46-598" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span><span class="in">`overlaps(x_lower, x_upper, y_lower, y_upper)`</span> je skraćenica za <span class="in">`x_lower &lt;= y_upper, x_upper &gt;= y_lower`</span>.</span>
<span id="cb46-599"><a href="#cb46-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-600"><a href="#cb46-600" aria-hidden="true" tabindex="-1"></a>Preklopna spajanja omogućuju elegantan način rada s intervalima i rasponima vrijednosti čineći kod čitljivijim i izražajnijim u usporedbi s eksplicitnim navođenjem svih nejednakosnih uvjeta. Ova tehnika posebno je korisna u situacijama gdje trebamo kategorizirati kontinuirane varijable ili pronalaziti preklapanja između vremenskih perioda, geografskih regija ili bilo kojih drugih raspon vrijednosti.</span>
<span id="cb46-601"><a href="#cb46-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-602"><a href="#cb46-602" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb46-603"><a href="#cb46-603" aria-hidden="true" tabindex="-1"></a>Demonstrirajmo preklopna spajanja s Pokemon podacima kategorizirajući Pokemone prema njihovim statistikama.</span>
<span id="cb46-604"><a href="#cb46-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-605"><a href="#cb46-605" aria-hidden="true" tabindex="-1"></a>Stvorit ćemo raspone za različite razine snage i koristiti <span class="in">`between()`</span> za razvrstavanje.</span>
<span id="cb46-606"><a href="#cb46-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-609"><a href="#cb46-609" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-610"><a href="#cb46-610" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiranje raspon razina za HP (hit points)</span></span>
<span id="cb46-611"><a href="#cb46-611" aria-hidden="true" tabindex="-1"></a>hp_tiers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb46-612"><a href="#cb46-612" aria-hidden="true" tabindex="-1"></a>  <span class="at">tier_name =</span> <span class="fu">c</span>(<span class="st">"Low HP"</span>, <span class="st">"Middle HP"</span>, <span class="st">"High HP"</span>, <span class="st">"Highest HP"</span>),</span>
<span id="cb46-613"><a href="#cb46-613" aria-hidden="true" tabindex="-1"></a>  <span class="at">hp_min =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">120</span>),</span>
<span id="cb46-614"><a href="#cb46-614" aria-hidden="true" tabindex="-1"></a>  <span class="at">hp_max =</span> <span class="fu">c</span>(<span class="dv">49</span>, <span class="dv">79</span>, <span class="dv">119</span>, <span class="dv">255</span>)</span>
<span id="cb46-615"><a href="#cb46-615" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-616"><a href="#cb46-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-617"><a href="#cb46-617" aria-hidden="true" tabindex="-1"></a><span class="co"># Preklopno spajanje koristeći between()</span></span>
<span id="cb46-618"><a href="#cb46-618" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-619"><a href="#cb46-619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(hp_tiers, <span class="fu">join_by</span>(<span class="fu">between</span>(HP, hp_min, hp_max))) <span class="sc">|&gt;</span></span>
<span id="cb46-620"><a href="#cb46-620" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, HP, tier_name) <span class="sc">|&gt;</span></span>
<span id="cb46-621"><a href="#cb46-621" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(HP))</span>
<span id="cb46-622"><a href="#cb46-622" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-623"><a href="#cb46-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-624"><a href="#cb46-624" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`overlaps()`</span> posebno je korisna za pronalaženje preklapanja između raspona. Pretpostavimo da želimo identificirati Pokemone čiji se rasponi snage (definiran kao minimum i maksimum njihovih napada i obrane) preklapaju.</span>
<span id="cb46-625"><a href="#cb46-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-628"><a href="#cb46-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb46-629"><a href="#cb46-629" aria-hidden="true" tabindex="-1"></a><span class="co"># Stvaranje raspon snage za nekoliko Pokemona</span></span>
<span id="cb46-630"><a href="#cb46-630" aria-hidden="true" tabindex="-1"></a>pokemon_power_ranges <span class="ot">&lt;-</span> pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb46-631"><a href="#cb46-631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-632"><a href="#cb46-632" aria-hidden="true" tabindex="-1"></a>    <span class="at">power_min =</span> <span class="fu">pmin</span>(attack, defense),</span>
<span id="cb46-633"><a href="#cb46-633" aria-hidden="true" tabindex="-1"></a>    <span class="at">power_max =</span> <span class="fu">pmax</span>(attack, defense)</span>
<span id="cb46-634"><a href="#cb46-634" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb46-635"><a href="#cb46-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, power_min, power_max)</span>
<span id="cb46-636"><a href="#cb46-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-637"><a href="#cb46-637" aria-hidden="true" tabindex="-1"></a><span class="co"># Pronalaženje Pokemona s preklapajućim rasponima snage</span></span>
<span id="cb46-638"><a href="#cb46-638" aria-hidden="true" tabindex="-1"></a>pokemon_power_ranges <span class="sc">|&gt;</span></span>
<span id="cb46-639"><a href="#cb46-639" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(</span>
<span id="cb46-640"><a href="#cb46-640" aria-hidden="true" tabindex="-1"></a>    pokemon_power_ranges,</span>
<span id="cb46-641"><a href="#cb46-641" aria-hidden="true" tabindex="-1"></a>    <span class="fu">join_by</span>(<span class="fu">overlaps</span>(power_min, power_max, power_min, power_max), id <span class="sc">&lt;</span> id),</span>
<span id="cb46-642"><a href="#cb46-642" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_1"</span>, <span class="st">"_2"</span>)</span>
<span id="cb46-643"><a href="#cb46-643" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb46-644"><a href="#cb46-644" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name_1, power_min_1, power_max_1, name_2, power_min_2, power_max_2)</span>
<span id="cb46-645"><a href="#cb46-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb46-646"><a href="#cb46-646" aria-hidden="true" tabindex="-1"></a>:::</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>