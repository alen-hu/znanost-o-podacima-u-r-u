<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="hr" xml:lang="hr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Brojevi – Znanost o podacima u R-u</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03_05_logicke_vrijednosti.html" rel="next">
<link href="./03_03_pridruzivanje_podataka.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-86b712c1a9842e5c5be4cb0afbdd663e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #483D8B;
      }
</style>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03_00_transformacija_podataka.html">Transformacija podataka</a></li><li class="breadcrumb-item"><a href="./03_04_brojevi.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Brojevi</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03_00_transformacija_podataka.html">Transformacija podataka</a></li><li class="breadcrumb-item"><a href="./03_04_brojevi.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Brojevi</span></a></li></ol></nav>
      <div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Brojevi</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Znanost o podacima u R-u</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Uvod</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Uvod u znanost o podacima</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_01_uvod_u_znanost_o_podacima.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Uvod u znanost o podacima</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Uvoz i uređivanje podataka</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_01_uvoz_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Uvoz podataka u R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_02_uredivanje_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Uređivanje podataka</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03_00_transformacija_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transformacija podataka</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dplyr</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_01_manipulacija_podacima.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulacija podacima</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_02_nedostajajuce_vrijednosti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Nedostajajuće vrijednosti</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_03_pridruzivanje_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pridruživanje podataka</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_04_brojevi.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Brojevi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_05_logicke_vrijednosti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Logičke vrijednosti</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_06_faktori.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Faktori</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_07_nizovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Nizovi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_08_regularni_izrazi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Regularni izrazi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_09_datum_i_vrijeme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Datum i vrijeme</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#brojčane-transformacije" id="toc-brojčane-transformacije" class="nav-link active" data-scroll-target="#brojčane-transformacije"><span class="header-section-number">1</span> Brojčane transformacije</a></li>
  <li><a href="#opće-transformacije" id="toc-opće-transformacije" class="nav-link" data-scroll-target="#opće-transformacije"><span class="header-section-number">2</span> Opće transformacije</a></li>
  <li><a href="#sažimanje-brojeva" id="toc-sažimanje-brojeva" class="nav-link" data-scroll-target="#sažimanje-brojeva"><span class="header-section-number">3</span> Sažimanje brojeva</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Brojčani podaci predstavljaju temelj znanosti o podacima i statistike općenito, a numerički vektori čine temelj večine analiza podataka te su ključni za izgradnju prediktivnih modela i donošenje odluka temeljenih na podacima. Brojevi omogućuju kvantifikaciju stvarnosti, mjerenje promjena, usporedbu između različitih entiteta te otkrivanje skrivenih obrazaca u podacima. U kontekstu analize podataka, brojčani podaci koriste se za mjerenje različitih varijabli od interesa, bilo da se radi o financijskim prihodima tvrtke, demografskim karakteristikama populacije ili performansnim metrikama modela strojnog učenja. U svim ovim slučajevima numerički vektori su fundamentalni građevni blokovi analize.</p>
<p>Važnost brojeva očituje se kroz nekoliko ključnih dimenzija:</p>
<ol type="1">
<li><p>Brojevi omogućuju precizno mjerenje i kvantifikaciju fenomena. Umjesto kvalitativnih opisa poput “visoka cijena” ili “niska prodaja”, numerički podaci omogućuju precizne vrijednosti koje se mogu uspoređivati, kombinirati i analizirati matematičkim metodama.</p></li>
<li><p>Brojevi služe kao osnova za primjenu statističkih testova koje omogućuju donošenje zaključaka temeljenih na kvantificiranim vrijednostima umjesto na intuiciji ili pretpostavkama.</p></li>
<li><p>Numerički podaci omogućuju primjenu algoritama strojnog učenja koji otkrivaju složene obrasce i relacije u podacima koje bi ljudska analiza teško mogla detektirati.</p></li>
</ol>
<p>Kada govorimo o <code>pokemon_dataset</code>, varijable poput “HP”, “attack”, “defense” i “speed” predstavljaju numeričke vrijednosti koje opisuju različite karakteristike Pokemona. Ove brojčane vrijednosti omogućuju provedbu raznovrsnih analiza, od jednostavnih deskriptivnih statistika (prosječna snaga napada po generaciji) do složenijih prediktivnih modela (predviđanje je li Pokemon legendaran na temelju njegovih atributa).</p>
<p>U većini slučajeva brojevi u R-u dolaze već spremni za analizu iz podatkovnih okvira koje učitavamo pomoću funkcija poput <code>read_csv()</code>. Međutim, postoje situacije u kojima je potrebno stvoriti brojeve iz drugih vrsta podataka ili ih pretvoriti iz različitih formata. Kada učitavamo podatke iz CSV datoteka, <code>readr</code> koristi heuristiku koja pokušava automatski prepoznati tip podataka u svakom stupcu. Ako stupac sadrži samo brojeve i možda posebne vrijednosti kao što su <code>NA</code>, <code>readr</code> će ga automatski definirati kao numerički vektor. Na primjer, u <code>pokemon_dataset</code> podatkovnom okviru varijable poput “HP”, “attack”, “defense”, “special_attack”, “special_defense” i “speed” automatski se prepoznaju kao numeričke vrijednosti jer sadrže isključivo brojčane podatke koje predstavljaju različite statističke karakteristike Pokemona.</p>
<p>Ponekad se dogodi da podaci koji bi trebali biti brojevi budu definirani kao znakovi. To se najčešće događa kada su brojevi u izvornoj datoteci formatirani na poseban način, primjerice kada sadrže zareze kao separatore tisućica, valutne simbole, postotke ili druge ne-numeričke znakove. U takvim situacijama R ne može automatski prepoznati brojčanu prirodu podataka i tretira ih kao tekst. Za pretvaranje takvih znakova u brojeve koristi se funkcija <code>parse_number()</code> koja je dizajnirana da izvuče brojčane vrijednosti ignorirajući sve ne-numeričke znakove koji okružuju broj.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Funkcija parse_number()">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Funkcija parse_number()
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>parse_number()</code> je funkcija iz paketa <code>readr</code> koja iz tekstualnih vrijednosti izvlači broj i pretvara ga u numerički tip. Funkcija je fleksibilna jer ignorira znakove koji nisu dio broja odbacujući nenumeričke znakove prije i poslije prvog pronađenog broja, pa je korisna za varijable poput cijena, iznosa s valutom, postotaka i sličnih zapisa.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x</td>
<td>Znakovni vektor vrijednosti koje se parsiraju.</td>
</tr>
<tr class="even">
<td>na</td>
<td>Znakovni vektor nizova koje treba tretirati kao nedostajuće vrijednosti. Zadano je <code>c("", "NA")</code>. Ako želimo isključiti ovu logiku, možemo postaviti <code>na = character()</code>.</td>
</tr>
<tr class="odd">
<td>locale</td>
<td>Objekt lokalizacije koji određuje regionalne postavke (npr. decimalni znak i znak grupiranja, encoding itd.). Zadano je <code>default_locale()</code>, a prilagođava se funkcijom <code>locale()</code>.</td>
</tr>
<tr class="even">
<td>trim_ws</td>
<td>Logička vrijednost koja određuje hoće li se prije parsiranja ukloniti vodeći i završni razmaci. Zadano je <code>TRUE</code>.</td>
</tr>
</tbody>
</table>
<p>Važno je napomenuti da <code>parse_number()</code> radi tako što ignorira sve nenumeričke znakove prije i poslije broja, ali zadržava decimalnu točku i negativni predznak ako postoje. Ova funkcija je posebno korisna pri čišćenju podataka koji dolaze iz različitih izvora gdje numerički podaci nisu standardizirano formatirani, što omogućava brzu i jednostavnu pretvorbu u format pogodan za daljnju analizu i vizualizaciju.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Primjer primjene <code>parse_number()</code> funkcije može se ilustrirati na hipotetskoj situaciji u kojoj bi podaci o težini Pokemona bili formatirani s dodatnim tekstom. Pretpostavimo da umjesto čistih brojčanih vrijednosti u varijabli <code>weight_kg</code> imamo zapise poput “12.5 kg” ili “weight: 89.3”. U takvom slučaju bi <code>parse_number()</code> funkcija izvukla samo brojčane vrijednosti.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Primjer s formatiranim podacima o težini</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>formatted_weight <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"12.5 kg"</span>, <span class="st">"weight: 89.3"</span>, <span class="st">"45.7kg"</span>, <span class="st">"150.2 kilograms"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_number</span>(formatted_weight)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  12.5  89.3  45.7 150.2</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Iznenađujuće je koliko se analize podataka može provesti samo pomoću brojanja i osnovnih aritmetičkih operacija, stoga paket <code>dplyr</code> nastoji učiniti brojanje što jednostavnijim putem funkcije <code>count()</code>. Ova funkcija predstavlja moćan alat za brzu eksploraciju podataka i provjeru tijekom analize, omogućujući istraživačima da brzo dobiju uvid u distribuciju vrijednosti unutar podatkovnog okvira.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Primjerice, ako želimo saznati koliko Pokémona pripada svakoj vrsti (type_1) u <code>pokemon_dataset</code> podatkovnom okviru, možemo jednostavno koristiti.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">count</span>(type_1, <span class="at">sort =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 2
   type_1       n
   &lt;fct&gt;    &lt;int&gt;
 1 water      112
 2 normal      98
 3 grass       70
 4 bug         69
 5 psychic     57
 6 fire        52
 7 electric    44
 8 rock        44
 9 dragon      32
10 ghost       32
11 ground      32
12 dark        31
13 poison      28
14 fighting    27
15 steel       27
16 ice         24
17 fairy       17
18 flying       4</code></pre>
</div>
</div>
<p>Ovaj kod vraća tibble koji prikazuje svaku jedinstvenu vrstu Pokémona zajedno s brojem Pokémona koji pripadaju toj vrsti. Takav pristup omogućuje brzu identifikaciju najčešćih i najrjeđih vrsta u skupu podataka. Ova naredba daje popis vrsta Pokémona poredanih od najčešćih prema najrjeđima. Ovo je osobito korisno kada radimo s podatkovnim okvirima koji sadrže mnogo jedinstvenih vrijednosti i želimo brzo identificirati dominantne kategorije. U slučaju pokemon_dataset podatkovnog okvira, takva analiza otkriva da su Pokémoni vodenog tipa (water) najčešći, dok su neki specijalizirani tipovi znatno rjeđi.</p>
</div>
</div>
</div>
<p>Važno je napomenuti da ako želimo vidjeti sve vrijednosti u rezultatu funkcije count(), možemo koristiti <code>|&gt; View()</code> za otvaranje interaktivnog pregleda u RStudio-u ili <code>|&gt; print(n = Inf)</code> za ispisivanje svih redaka u konzoli. Ovo je korisno kada radimo s varijablama koje imaju umjeren broj jedinstvenih vrijednosti i želimo dobiti potpun pregled distribucije. Istu računsku operaciju možemo postići “ručno” koristeći kombinaciju funkcija <code>group_by()</code>, <code>summarize()</code> i specijalne funkcije <code>n()</code>:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 2
   type_1       n
   &lt;fct&gt;    &lt;int&gt;
 1 water      112
 2 normal      98
 3 grass       70
 4 bug         69
 5 psychic     57
 6 fire        52
 7 electric    44
 8 rock        44
 9 dragon      32
10 ghost       32
11 ground      32
12 dark        31
13 poison      28
14 fighting    27
15 steel       27
16 ice         24
17 fairy       17
18 flying       4</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj pristup je koristan jer omogućuje istovremeno računanje drugih sažetaka uz brojanje. Funkcija <code>n()</code> je posebna funkcija sažimanja koja ne prima nikakve argumente, već pristupa informacijama o trenutnoj grupi podataka. To znači da funkcionira samo unutar dplyr funkcija poput <code>mutate()</code>, <code>filter()</code> i <code>group_by()</code>. Ako pokušamo koristiti <code>n()</code> izvan konteksta ovih funkcija, dobit ćemo grešku. Primjerice, možemo brojati Pokémone po vrsti i istovremeno izračunati prosječnu snagu napada:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_attack =</span> <span class="fu">mean</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 3
   type_1       n avg_attack
   &lt;fct&gt;    &lt;int&gt;      &lt;dbl&gt;
 1 water      112       74.2
 2 normal      98       73.5
 3 grass       70       73.2
 4 bug         69       71.0
 5 psychic     57       71.5
 6 fire        52       84.8
 7 electric    44       69.1
 8 rock        44       92.9
 9 dragon      32      112. 
10 ghost       32       73.8
11 ground      32       95.8
12 dark        31       88.4
13 poison      28       74.7
14 fighting    27       96.8
15 steel       27       92.7
16 ice         24       72.8
17 fairy       17       61.5
18 flying       4       78.8</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj kod grupira Pokémone prema njihovoj primarnoj vrsti, broji koliko ih ima u svakoj grupi pomoću <code>n()</code>, i izračunava prosječnu vrijednost napada za svaku grupu.</p>
<p>Postoji nekoliko varijanti funkcija <code>n()</code> i <code>count()</code> koje mogu biti korisne u različitim situacijama. Funkcija <code>n_distinct()</code> broji broj različitih, odnosno jedinstvenih vrijednosti jedne ili više varijabli. Na primjer, možemo saznati koliko različitih generacija Pokémona postoji za svaku vrstu:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">generations =</span> <span class="fu">n_distinct</span>(generation)) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(generations))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 2
   type_1   generations
   &lt;fct&gt;          &lt;int&gt;
 1 water              6
 2 normal             6
 3 grass              6
 4 bug                6
 5 psychic            6
 6 fire               6
 7 electric           6
 8 rock               6
 9 ghost              6
10 poison             6
11 fighting           6
12 ice                6
13 dragon             5
14 ground             5
15 dark               5
16 steel              5
17 fairy              4
18 flying             2</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj pristup omogućuje identificiranje vrsta Pokémona koje su prisutne kroz više generacija igara.</p>
<p>Ponderirano brojanje predstavlja još jednu korisnu varijantu standardnog brojanja. Zapravo, ponderirano brojanje je suma određene varijable. Primjerice, mogli bismo “prebrojati” ukupnu snagu svih Pokémona određene vrste zbrajajući njihove vrijednosti napada:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_attack =</span> <span class="fu">sum</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 2
   type_1   total_attack
   &lt;fct&gt;           &lt;dbl&gt;
 1 water            8305
 2 normal           7200
 3 grass            5125
 4 bug              4897
 5 psychic          4073
 6 fire             4408
 7 electric         3040
 8 rock             4086
 9 dragon           3588
10 ghost            2361
11 ground           3064
12 dark             2740
13 poison           2091
14 fighting         2613
15 steel            2503
16 ice              1746
17 fairy            1046
18 flying            315</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Budući da je ponderirano brojanje čest problem u analizi podataka, funkcija <code>count()</code> ima argument <code>wt</code> koji omogućuje istu operaciju na jednostavniji način:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">count</span>(type_1, <span class="at">wt =</span> attack)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 2
   type_1       n
   &lt;fct&gt;    &lt;dbl&gt;
 1 water     8305
 2 normal    7200
 3 grass     5125
 4 bug       4897
 5 psychic   4073
 6 fire      4408
 7 electric  3040
 8 rock      4086
 9 dragon    3588
10 ghost     2361
11 ground    3064
12 dark      2740
13 poison    2091
14 fighting  2613
15 steel     2503
16 ice       1746
17 fairy     1046
18 flying     315</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj pristup je elegantniji i čitljiviji od eksplicitnog korištenja <code>group_by()</code> i <code>summarize()</code>.</p>
<p>Možemo brojati i nedostajuće vrijednosti kombiniranjem funkcija <code>sum()</code> i <code>is.na()</code>. Primjerice, ako želimo saznati koliko Pokémona u svakoj generaciji ima nedostajuće podatke o tipu 2, možemo koristiti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">missing_height =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(type_2)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  generation missing_height
  &lt;fct&gt;               &lt;int&gt;
1 1                      88
2 5                      83
3 3                      78
4 4                      54
5 2                      51
6 6                      32</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj pristup koristi činjenicu da is.na() vraća logičku vrijednost (<code>TRUE</code> ili <code>FALSE</code>), a <code>sum()</code> tretira <code>TRUE</code> kao 1 i <code>FALSE</code> kao 0, što rezultira brojem nedostajućih vrijednosti. U kontekstu <code>pokemon_dataset</code> podatkovnog okvira, analiza nedostajućih vrijednosti može otkriti probleme s kvalitetom podataka ili sistematske razlike između generacija u dostupnosti određenih informacija o Pokémonima.</p>
<section id="brojčane-transformacije" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="brojčane-transformacije"><span class="header-section-number">1</span> Brojčane transformacije</h2>
<p>Funkcije transformacije dobro funkcioniraju s <code>mutate()</code> jer njihov rezultat ima istu duljinu kao ulazni podaci. Velika većina funkcija transformacije već je ugrađena u osnovni R. Nepraktično je navesti sve takve funkcije, stoga će ovo poglavlje prikazati najkorisnije od njih. Kao primjer, iako R pruža sve trigonometrijske funkcije koje biste mogli zamisliti, one ovdje nisu navedene jer se rijetko koriste u analizi podataka.</p>
<p><strong>Aritmetika i pravila recikliranja</strong></p>
<p>Osnove aritmetike (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>) često se koriste pri radu s podacima. Ove funkcije ne zahtijevaju opsežno objašnjenje jer izvršavaju operacije koje su poznate iz osnovne matematike. Međutim, potrebno je kratko razmotriti pravila recikliranja koja određuju što se događa kada lijeva i desna strana operacije imaju različite duljine. Ovo je važno za operacije poput <code>pokemon_dataset |&gt; mutate(attack_per_gen = attack / generation)</code> jer postoji 800 brojeva na lijevoj strani operatora <code>/</code>, ali samo šest različitih vrijednosti generacija na desnoj strani.</p>
<p>R rješava neusklađene duljine vektora pomoću recikliranja, odnosno ponavljanja kraćeg vektora. Ovu operaciju možemo lakše vidjeti ako stvorimo vektore izvan podatkovnog okvira:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> y</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  10  40  30  80  50 120</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Općenito, poželjno je reciklirati samo pojedinačne brojeve (odnosno vektore duljine 1), ali R će reciklirati bilo koji kraći vektor. Obično (ali ne uvijek) R daje upozorenje ako duži vektor nije višekratnik kraćeg vektora:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> y</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in x * y: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 40 30 80 50</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ova pravila recikliranja primjenjuju se i na logičke usporedbe (<code>==</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code>) i mogu dovesti do iznenađujućih rezultata ako slučajno koristite <code>==</code> umjesto <code>%in%</code> i podatkovni okvir ima nepovoljan broj redaka. Na primjer, uzmimo ovaj kod koji pokušava pronaći sve Pokémone iz prve i druge generacije:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(generation <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 136 × 13
      id name            type_1 type_2 total    HP attack defense special_attack
   &lt;dbl&gt; &lt;chr&gt;           &lt;fct&gt;  &lt;fct&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;          &lt;dbl&gt;
 1     1 bulbasaur       grass  poison   318    45     49      49             65
 2     3 venusaur        grass  poison   525    80     82      83            100
 3     4 charmander      fire   &lt;NA&gt;     309    39     52      43             60
 4     6 charizard       fire   flying   534    78     84      78            109
 5     6 charizardmega … fire   flying   634    78    104      78            159
 6     8 wartortle       water  &lt;NA&gt;     405    59     63      80             65
 7     9 blastoisemega … water  &lt;NA&gt;     630    79    103     120            135
 8    11 metapod         bug    &lt;NA&gt;     205    50     20      55             25
 9    13 weedle          bug    poison   195    40     35      30             20
10    15 beedrill        bug    poison   395    65     90      40             45
# ℹ 126 more rows
# ℹ 4 more variables: special_defense &lt;dbl&gt;, speed &lt;dbl&gt;, generation &lt;fct&gt;,
#   legendary &lt;lgl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Kod se izvršava bez greške, ali ne vraća ono što želimo. Zbog pravila recikliranja, ovaj kod pronalazi Pokémone u redovima s neparnim brojevima koji su iz generacije 1 i Pokémone u redovima s parnim brojevima koji su iz generacije 2. Nažalost, nema upozorenja jer pokemon_dataset ima paran broj redaka.</p>
<p>Da bi se zaštitili od ovakvog tihog neuspjeha, većina <code>tidyverse</code> funkcija koristi strožu formu recikliranja koja reciklira samo pojedinačne vrijednosti. Nažalost, to ne pomaže u ovom slučaju, niti u mnogim drugim, jer se ključni izračun provodi osnovnom R funkcijom <code>==</code>, a ne <code>filter()</code>. Ispravno rješenje za ovaj problem je korištenje operatora <code>%in%</code>:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(generation <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 272 × 13
      id name            type_1 type_2 total    HP attack defense special_attack
   &lt;dbl&gt; &lt;chr&gt;           &lt;fct&gt;  &lt;fct&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;          &lt;dbl&gt;
 1     1 bulbasaur       grass  poison   318    45     49      49             65
 2     2 ivysaur         grass  poison   405    60     62      63             80
 3     3 venusaur        grass  poison   525    80     82      83            100
 4     3 venusaurmega v… grass  poison   625    80    100     123            122
 5     4 charmander      fire   &lt;NA&gt;     309    39     52      43             60
 6     5 charmeleon      fire   &lt;NA&gt;     405    58     64      58             80
 7     6 charizard       fire   flying   534    78     84      78            109
 8     6 charizardmega … fire   dragon   634    78    130     111            130
 9     6 charizardmega … fire   flying   634    78    104      78            159
10     7 squirtle        water  &lt;NA&gt;     314    44     48      65             50
# ℹ 262 more rows
# ℹ 4 more variables: special_defense &lt;dbl&gt;, speed &lt;dbl&gt;, generation &lt;fct&gt;,
#   legendary &lt;lgl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><strong>Minimum i maksimum</strong></p>
<p>Aritmetičke funkcije rade s parovima varijabli. Dvije usko povezane funkcije su <code>pmin()</code> i <code>pmax()</code> koje, kada im se daju dvije ili više varijabli, vraćaju najmanju ili najveću vrijednost u svakom retku:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_stat =</span> <span class="fu">pmin</span>(attack, defense),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">higher_stat =</span> <span class="fu">pmax</span>(attack, defense)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, defense, lower_stat, higher_stat)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 800 × 5
   name                      attack defense lower_stat higher_stat
   &lt;chr&gt;                      &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
 1 bulbasaur                     49      49         49          49
 2 ivysaur                       62      63         62          63
 3 venusaur                      82      83         82          83
 4 venusaurmega venusaur        100     123        100         123
 5 charmander                    52      43         43          52
 6 charmeleon                    64      58         58          64
 7 charizard                     84      78         78          84
 8 charizardmega charizard x    130     111        111         130
 9 charizardmega charizard y    104      78         78         104
10 squirtle                      48      65         48          65
# ℹ 790 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje kako možemo usporediti napad i obranu svakog Pokémona i identificirati koja je statistika niža, a koja viša.</p>
<p>Važno je razlikovati ove funkcije od funkcija sažimanja <code>min()</code> i <code>max()</code> koje uzimaju više opservacija i vraćaju jednu vrijednost. Možete prepoznati da ste koristili pogrešnu formu kada su svi minimumi i svi maksimumi iste vrijednosti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_stat =</span> <span class="fu">min</span>(attack, defense),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">higher_stat =</span> <span class="fu">max</span>(attack, defense)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, defense, lower_stat, higher_stat)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 800 × 5
   name                      attack defense lower_stat higher_stat
   &lt;chr&gt;                      &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
 1 bulbasaur                     49      49          5         230
 2 ivysaur                       62      63          5         230
 3 venusaur                      82      83          5         230
 4 venusaurmega venusaur        100     123          5         230
 5 charmander                    52      43          5         230
 6 charmeleon                    64      58          5         230
 7 charizard                     84      78          5         230
 8 charizardmega charizard x    130     111          5         230
 9 charizardmega charizard y    104      78          5         230
10 squirtle                      48      65          5         230
# ℹ 790 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U ovom slučaju, <code>min()</code> i <code>max()</code> vraćaju globalni minimum i maksimum svih vrijednosti napada i obrane u cijelom podatkovnom skupu, što nije željeni rezultat.</p>
<p><strong>Modularna aritmetika</strong></p>
<p>Modularna aritmetika je tehnički naziv za vrstu matematike koju ste radili prije nego što ste naučili o decimalnim brojevima, odnosno dijeljenje koje daje cijeli broj i ostatak. U R-u, <code>%/%</code> izvodi cjelobrojno dijeljenje, a <code>%%</code> izračunava ostatak:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="sc">%/%</span> <span class="dv">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="sc">%%</span> <span class="dv">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Modularna aritmetika je korisna u pokemon_dataset podatkovnom okviru jer je možemo koristiti za kategorizaciju Pokémona. Na primjer, možemo grupirati Pokémone prema tome da li je njihov broj djeljiv s 10, što bi moglo otkriti obrazac u dizajnu:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">divisible_by_10 =</span> id <span class="sc">%%</span> <span class="dv">10</span> <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(divisible_by_10)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  divisible_by_10     n
  &lt;lgl&gt;           &lt;int&gt;
1 FALSE             716
2 TRUE               84</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Možemo kombinirati modularnu aritmetiku s <code>mean(is.na(x))</code> trikom za analizu proporcija. Na primjer, možemo vidjeti kako se proporcija legendarnih Pokémona mijenja kroz generacije:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_legendary =</span> <span class="fu">mean</span>(legendary, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  generation prop_legendary     n
  &lt;fct&gt;               &lt;dbl&gt; &lt;int&gt;
1 1                  0.0361   166
2 5                  0.0909   165
3 3                  0.112    160
4 4                  0.107    121
5 2                  0.0472   106
6 6                  0.0976    82</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Rezultati pokazuju da proporcija legendarnih Pokémona varira između generacija, s nešto većim udjelom u kasnijim generacijama.</p>
<p><strong>Logaritmi</strong></p>
<p>Logaritmi su izuzetno korisna transformacija za rad s podacima koji se protežu kroz više redova veličine i za pretvaranje eksponencijalnog rasta u linearni rast. U R-u možete odabrati između tri logaritma: <code>log()</code> (prirodni logaritam, baza e), <code>log2()</code> (baza 2) i <code>log10()</code> (baza 10). Preporučuje se korištenje <code>log2()</code> ili <code>log10()</code>. Funkcija <code>log2()</code> je laka za interpretaciju jer razlika od 1 na logaritamskoj skali odgovara udvostručenju na originalnoj skali, a razlika od -1 odgovara prepolovljenju. Funkcija <code>log10()</code> je laka za povratnu transformaciju jer je, na primjer, 3 jednako <code>10^3 = 1000</code>. Inverzna funkcija za <code>log()</code> je <code>exp()</code>, a za izračun inverzne funkcije za <code>log2()</code> ili <code>log10()</code> potrebno je koristiti <code>2^</code> ili <code>10^</code>.</p>
<p>U kontekstu pokemon_dataset podatkovnog okvira, logaritamska transformacija može biti korisna za analizu statistika koje imaju širok raspon vrijednosti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_hp =</span> <span class="fu">log10</span>(HP),</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_attack =</span> <span class="fu">log10</span>(attack)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, HP, log_hp, attack, log_attack)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 800 × 5
   name                         HP log_hp attack log_attack
   &lt;chr&gt;                     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
 1 bulbasaur                    45   1.65     49       1.69
 2 ivysaur                      60   1.78     62       1.79
 3 venusaur                     80   1.90     82       1.91
 4 venusaurmega venusaur        80   1.90    100       2   
 5 charmander                   39   1.59     52       1.72
 6 charmeleon                   58   1.76     64       1.81
 7 charizard                    78   1.89     84       1.92
 8 charizardmega charizard x    78   1.89    130       2.11
 9 charizardmega charizard y    78   1.89    104       2.02
10 squirtle                     44   1.64     48       1.68
# ℹ 790 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ova transformacija može pomoći u vizualizaciji podataka kada postoje ekstremne vrijednosti ili kada želimo usporediti relativne, a ne apsolutne razlike između Pokémona.</p>
<p><strong>Zaokruživanje</strong></p>
<p>Funkcija <code>round()</code> zaokružuje broj na najbliži cijeli broj:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">123.456</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Preciznost zaokruživanja možete kontrolirati pomoću drugog argumenta digits. Funkcija <code>round(x, digits)</code> zaokružuje na najbliži <code>10^-n</code>, tako da <code>digits = 2</code> zaokružuje na najbliže 0.01. Ova definicija je korisna jer implicira da će <code>round(x, -3)</code> zaokružiti na najbližu tisuću:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">123.456</span>, <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123.46</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">123.456</span>, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 120</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Postoji jedna neobičnost kod <code>round()</code> koja na prvi pogled izgleda iznenađujuće: ova funkcija koristi ono što je poznato kao “zaokruživanje polovice na parno” ili bankovno zaokruživanje. Ako je broj točno na sredini između dva cijela broja, zaokružit će se na parni broj. Ovo je dobra strategija jer održava zaokruživanje nepristranim: polovica svih 0.5 vrijednosti zaokružuje se prema gore, a polovica prema dolje:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">3.5</span>, <span class="fl">4.5</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2 4 4</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Funkcija <code>round()</code> uparena je s <code>floor()</code> koja uvijek zaokružuje prema dolje i <code>ceiling()</code> koja uvijek zaokružuje prema gore:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(<span class="fl">123.456</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling</span>(<span class="fl">123.456</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 124</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ove funkcije nemaju argument <code>digits</code>, stoga možete umjesto toga skalirati prema dolje, zaokružiti, a zatim skalirati natrag:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(x <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Istu tehniku možete koristiti ako želite zaokružiti na višekratnik nekog drugog broja:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x <span class="sc">/</span> <span class="dv">5</span>) <span class="sc">*</span> <span class="dv">5</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 5 5 5</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U kontekstu <code>pokemon_dataset</code> podatkovnog okvira, zaokruživanje može biti korisno za kategorizaciju statistika:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_rounded =</span> <span class="fu">round</span>(HP, <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed_category =</span> <span class="fu">round</span>(speed <span class="sc">/</span> <span class="dv">25</span>) <span class="sc">*</span> <span class="dv">25</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, HP, hp_rounded, speed, speed_category)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 800 × 5
   name                         HP hp_rounded speed speed_category
   &lt;chr&gt;                     &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;          &lt;dbl&gt;
 1 bulbasaur                    45         40    45             50
 2 ivysaur                      60         60    60             50
 3 venusaur                     80         80    80             75
 4 venusaurmega venusaur        80         80    80             75
 5 charmander                   39         40    65             75
 6 charmeleon                   58         60    80             75
 7 charizard                    78         80   100            100
 8 charizardmega charizard x    78         80   100            100
 9 charizardmega charizard y    78         80   100            100
10 squirtle                     44         40    43             50
# ℹ 790 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><strong>Rezanje brojeva u raspone</strong></p>
<p>Funkcija <code>cut()</code> koristi se za razbijanje (odnosno biniranje) numeričkog vektora u diskretne kategorije:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-27-contents" aria-controls="callout-27" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-27" class="callout-27-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] (0,5]   (0,5]   (5,10]  (10,15] (15,20]
Levels: (0,5] (5,10] (10,15] (15,20]</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Granice ne moraju biti jednako raspoređene:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">15</span>, <span class="dv">20</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] (0,5]   (0,5]   (5,15]  (5,15]  (15,20]
Levels: (0,5] (5,15] (15,20]</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Možete opcionalno definirati vlastite oznake (<code>labels</code>). Imajte na umu da bi trebalo biti za jednu oznaku manje nego što ima granica:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-29-contents" aria-controls="callout-29" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-29" class="callout-29-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"very low"</span>, <span class="st">"low"</span>, <span class="st">"medium"</span>, <span class="st">"high"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] very low very low low      medium   high    
Levels: very low low medium high</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Bilo koje vrijednosti izvan raspona granica postat će <code>NA</code>:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &lt;NA&gt;    &lt;NA&gt;    (5,10]  (10,15] &lt;NA&gt;   
Levels: (5,10] (10,15]</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U <code>pokemon_dataset</code> podatkovnom okviru, <code>cut()</code> možemo koristiti za kategorizaciju Pokémona prema njihovim statistikama:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-31-contents" aria-controls="callout-31" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-31" class="callout-31-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">attack_category =</span> <span class="fu">cut</span>(attack, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">150</span>, <span class="dv">200</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"weak"</span>, <span class="st">"average"</span>, <span class="st">"strong"</span>, <span class="st">"very strong"</span>))</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, attack_category) <span class="sc">|&gt;</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(attack_category)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  attack_category     n
  &lt;fct&gt;           &lt;int&gt;
1 weak              170
2 average           460
3 strong            152
4 very strong        18</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ova analiza pokazuje da većina Pokémona ima prosječnu snagu napada (između 50 i 100), dok je samo manji broj izuzetno snažan.</p>
<p><strong>Kumulativni i pomični agregati</strong></p>
<p>Osnovni R pruža <code>cumsum()</code>, <code>cumprod()</code>, <code>cummin()</code> i <code>cummax()</code> za tekuće ili kumulativne sume, produkte, minimume i maksimume. Paket dplyr pruža cummean() za kumulativne prosjeke. Kumulativne sume najčešće se koriste u praksi:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-32-contents" aria-controls="callout-32" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-32" class="callout-32-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cumsum</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  3  6 10 15 21 28 36 45 55</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ako trebate složenije pomične ili klizne agregate, pokušajte koristiti paket <code>slider</code>.</p>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo koristiti kumulativne funkcije za praćenje kako se ukupna snaga Pokémona akumulira kroz generacije:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-33-contents" aria-controls="callout-33" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-33" class="callout-33-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative_total =</span> <span class="fu">cumsum</span>(total),</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative_mean =</span> <span class="fu">cummean</span>(total)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, total, cumulative_total, cumulative_mean) <span class="sc">|&gt;</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">&lt;=</span> <span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 5
      id name                      total cumulative_total cumulative_mean
   &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;            &lt;dbl&gt;           &lt;dbl&gt;
 1     1 bulbasaur                   318              318            318 
 2     2 ivysaur                     405              723            362.
 3     3 venusaur                    525             1248            416 
 4     3 venusaurmega venusaur       625             1873            468.
 5     4 charmander                  309             2182            436.
 6     5 charmeleon                  405             2587            431.
 7     6 charizard                   534             3121            446.
 8     6 charizardmega charizard x   634             3755            469.
 9     6 charizardmega charizard y   634             4389            488.
10     7 squirtle                    314             4703            470.
11     8 wartortle                   405             5108            464.
12     9 blastoise                   530             5638            470.
13     9 blastoisemega blastoise     630             6268            482.
14    10 caterpie                    195             6463            462.</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje kako se ukupna snaga akumulira kroz prve Pokémone, a kumulativni prosjek pruža uvid u prosječnu snagu do određenog Pokémona u redoslijedu.</p>
</section>
<section id="opće-transformacije" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="opće-transformacije"><span class="header-section-number">2</span> Opće transformacije</h2>
<p>Sljedeći odjeljci opisuju neke opće transformacije koje se često koriste s numeričkim vektorima, ali se mogu primijeniti i na sve druge vrste stupaca podatkovnog okvira.</p>
<p><strong>Rangovi</strong></p>
<p>Paket dplyr pruža niz funkcija rangiranja inspiriranih SQL-om, ali uvijek biste trebali započeti s <code>min_rank()</code>. Ova funkcija koristi tipičnu metodu za rješavanje izjednačenih vrijednosti, na primjer 1., 2., 2., 4. mjesto:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-34-contents" aria-controls="callout-34" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-34" class="callout-34-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">NA</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">min_rank</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  2  2  4  5 NA</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Važno je primijetiti da najmanje vrijednosti dobivaju najniže rangove. Koristite <code>desc(x)</code> da biste najvećim vrijednostima dali najniže rangove:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-35-contents" aria-controls="callout-35" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-35" class="callout-35-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min_rank</span>(<span class="fu">desc</span>(x))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5  3  3  2  1 NA</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U kontekstu pokemon_dataset podatkovnog okvira, možemo rangirati Pokémone prema njihovim različitim statistikama:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-36-contents" aria-controls="callout-36" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-36" class="callout-36-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(attack)),</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">defense_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(defense)),</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(speed))</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, attack_rank, defense, defense_rank, speed, speed_rank) <span class="sc">|&gt;</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(attack_rank) <span class="sc">|&gt;</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
   name                 attack attack_rank defense defense_rank speed speed_rank
   &lt;chr&gt;                 &lt;dbl&gt;       &lt;int&gt;   &lt;dbl&gt;        &lt;int&gt; &lt;dbl&gt;      &lt;int&gt;
 1 mewtwomega mewtwo x     190           1     100          124   130         14
 2 heracrossmega herac…    185           2     115           75    75        307
 3 groudonprimal groud…    180           3     160           11    90        187
 4 rayquazamega rayqua…    180           3     100          124   115         38
 5 deoxysattack forme      180           3      20          790   150          3
 6 garchompmega garcho…    170           6     115           75    92        179
 7 kyuremblack kyurem      170           6     100          124    95        150
 8 banettemega banette     165           8      75          327    75        307
 9 rampardos               165           8      60          487    58        483
10 gallademega gallade     165           8      95          159   110         56</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje Pokémone s najvišim rangovima napada, zajedno s njihovim rangovima obrane i brzine, što omogućuje usporedbu različitih dimenzija snage.</p>
<p>Ako <code>min_rank()</code> ne radi ono što vam treba, pogledajte varijante <code>row_number()</code>, <code>dense_rank()</code>, <code>percent_rank()</code> i <code>cume_dist()</code>. Pogledajte dokumentaciju za detalje:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-37-contents" aria-controls="callout-37" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-37" class="callout-37-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> x)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_number =</span> <span class="fu">row_number</span>(x),</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dense_rank =</span> <span class="fu">dense_rank</span>(x),</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_rank =</span> <span class="fu">percent_rank</span>(x),</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">cume_dist =</span> <span class="fu">cume_dist</span>(x)</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
      x row_number dense_rank percent_rank cume_dist
  &lt;dbl&gt;      &lt;int&gt;      &lt;int&gt;        &lt;dbl&gt;     &lt;dbl&gt;
1     1          1          1         0          0.2
2     2          2          2         0.25       0.6
3     2          3          2         0.25       0.6
4     3          4          3         0.75       0.8
5     4          5          4         1          1  
6    NA         NA         NA        NA         NA  </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo usporediti različite metode rangiranja:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-38-contents" aria-controls="callout-38" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-38" class="callout-38-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, total) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total)) <span class="sc">|&gt;</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(total)),</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dense_rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(total)),</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_number =</span> <span class="fu">row_number</span>(<span class="fu">desc</span>(total)),</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_rank =</span> <span class="fu">percent_rank</span>(<span class="fu">desc</span>(total))</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 6
   name                    total min_rank dense_rank row_number percent_rank
   &lt;chr&gt;                   &lt;dbl&gt;    &lt;int&gt;      &lt;int&gt;      &lt;int&gt;        &lt;dbl&gt;
 1 mewtwomega mewtwo x       780        1          1          1      0      
 2 mewtwomega mewtwo y       780        1          1          2      0      
 3 rayquazamega rayquaza     780        1          1          3      0      
 4 kyogreprimal kyogre       770        4          2          4      0.00375
 5 groudonprimal groudon     770        4          2          5      0.00375
 6 arceus                    720        6          3          6      0.00626
 7 tyranitarmega tyranitar   700        7          4          7      0.00751
 8 salamencemega salamence   700        7          4          8      0.00751
 9 metagrossmega metagross   700        7          4          9      0.00751
10 latiasmega latias         700        7          4         10      0.00751</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje razlike između <code>min_rank()</code> (koji daje isti rang izjednačenim vrijednostima i preskače sljedeći rang), <code>dense_rank()</code> (koji daje isti rang izjednačenim vrijednostima ali ne preskače rangove), <code>row_number()</code> (koji daje jedinstvene rangove čak i za izjednačene vrijednosti), i <code>percent_rank()</code> (koji daje proporciju vrijednosti koje su manje).</p>
<p>Funkciju <code>row_number()</code> također možete koristiti bez ikakvih argumenata kada je unutar <code>dplyr</code> funkcije. U tom slučaju, dat će broj “trenutnog” retka. Kada se kombinira s <code>%%</code> ili <code>%/%</code>, ovo može biti koristan alat za dijeljenje podataka u grupe slične veličine:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-39-contents" aria-controls="callout-39" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-39" class="callout-39-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">row0 =</span> <span class="fu">row_number</span>() <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">three_groups =</span> row0 <span class="sc">%%</span> <span class="dv">3</span>,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">three_in_each_group =</span> row0 <span class="sc">%/%</span> <span class="dv">3</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
      id  row0 three_groups three_in_each_group
   &lt;int&gt; &lt;dbl&gt;        &lt;dbl&gt;               &lt;dbl&gt;
 1     1     0            0                   0
 2     2     1            1                   0
 3     3     2            2                   0
 4     4     3            0                   1
 5     5     4            1                   1
 6     6     5            2                   1
 7     7     6            0                   2
 8     8     7            1                   2
 9     9     8            2                   2
10    10     9            0                   3</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo koristiti ovu tehniku za dijeljenje Pokémona u grupe:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-40-contents" aria-controls="callout-40" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-40" class="callout-40-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">row0 =</span> <span class="fu">row_number</span>() <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_of_5 =</span> row0 <span class="sc">%%</span> <span class="dv">5</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">batch =</span> row0 <span class="sc">%/%</span> <span class="dv">100</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, row0, group_of_5, batch) <span class="sc">|&gt;</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 5
      id name                       row0 group_of_5 batch
   &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;
 1     1 bulbasaur                     0          0     0
 2     2 ivysaur                       1          1     0
 3     3 venusaur                      2          2     0
 4     3 venusaurmega venusaur         3          3     0
 5     4 charmander                    4          4     0
 6     5 charmeleon                    5          0     0
 7     6 charizard                     6          1     0
 8     6 charizardmega charizard x     7          2     0
 9     6 charizardmega charizard y     8          3     0
10     7 squirtle                      9          4     0
11     8 wartortle                    10          0     0
12     9 blastoise                    11          1     0
13     9 blastoisemega blastoise      12          2     0
14    10 caterpie                     13          3     0
15    11 metapod                      14          4     0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ova tehnika omogućuje stvaranje rotacijskih grupa ili grupa za procesiranje u serijama.</p>
<p><strong>Pomaci</strong></p>
<p>Funkcije <code>lag()</code> i <code>lead()</code> omogućuju vam da se referencirate na vrijednosti neposredno prije ili neposredno poslije “trenutne” vrijednosti. Vraćaju vektor iste duljine kao ulazni vektor, dopunjen s <code>NA</code> vrijednostima na početku ili kraju:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-41-contents" aria-controls="callout-41" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-41" class="callout-41-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">19</span>, <span class="dv">35</span>)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA  2  5 11 11 19</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5 11 11 19 35 NA</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Izrazi <code>x - lag(x)</code> daju vam razliku između trenutne i prethodne vrijednosti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-42-contents" aria-controls="callout-42" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-42" class="callout-42-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">-</span> <span class="fu">lag</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA  3  6  0  8 16</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Izraz <code>x == lag(x)</code> govori vam kada se trenutna vrijednost mijenja:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-43-contents" aria-controls="callout-43" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-43" class="callout-43-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="fu">lag</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    NA FALSE FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo koristiti ove funkcije za usporedbu uzastopnih Pokémona:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-44-contents" aria-controls="callout-44" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-44" class="callout-44-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_diff =</span> total <span class="sc">-</span> <span class="fu">lag</span>(total),</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_change =</span> total <span class="sc">!=</span> <span class="fu">lag</span>(total),</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">next_total =</span> <span class="fu">lead</span>(total)</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, total, total_diff, total_change, next_total) <span class="sc">|&gt;</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 6
      id name                      total total_diff total_change next_total
   &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;      &lt;dbl&gt; &lt;lgl&gt;             &lt;dbl&gt;
 1     1 bulbasaur                   318         NA NA                  405
 2     2 ivysaur                     405         87 TRUE                525
 3     3 venusaur                    525        120 TRUE                625
 4     3 venusaurmega venusaur       625        100 TRUE                309
 5     4 charmander                  309       -316 TRUE                405
 6     5 charmeleon                  405         96 TRUE                534
 7     6 charizard                   534        129 TRUE                634
 8     6 charizardmega charizard x   634        100 TRUE                634
 9     6 charizardmega charizard y   634          0 FALSE               314
10     7 squirtle                    314       -320 TRUE                405</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje kako se ukupna snaga Pokémona mijenja od jednog do drugog, što može otkriti evolucijske skokove u snazi.</p>
<p>Možete pomicati ili voditi za više od jedne pozicije koristeći drugi argument <code>n</code>:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-45-contents" aria-controls="callout-45" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-45" class="callout-45-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">-</span> <span class="fu">lag</span>(x, <span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA  9  6  8 24</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo usporediti Pokémone s onima dva mjesta ranije:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-46-contents" aria-controls="callout-46" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-46" class="callout-46-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_diff_2 =</span> total <span class="sc">-</span> <span class="fu">lag</span>(total, <span class="at">n =</span> <span class="dv">2</span>)) <span class="sc">|&gt;</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, total, total_diff_2) <span class="sc">|&gt;</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
      id name                      total total_diff_2
   &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;        &lt;dbl&gt;
 1     1 bulbasaur                   318           NA
 2     2 ivysaur                     405           NA
 3     3 venusaur                    525          207
 4     3 venusaurmega venusaur       625          220
 5     4 charmander                  309         -216
 6     5 charmeleon                  405         -220
 7     6 charizard                   534          225
 8     6 charizardmega charizard x   634          229
 9     6 charizardmega charizard y   634          100
10     7 squirtle                    314         -320</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><strong>Uzastopni identifikatori</strong></p>
<p>Ponekad želite započeti novu grupu svaki put kada se dogodi neki događaj. Na primjer, kada gledate podatke s web stranice, uobičajeno je da želite razbiti događaje u sesije, gdje započinjete novu sesiju nakon praznine od više od x minuta od posljednje aktivnosti. Na primjer, zamislite da imate vremena kada je netko posjetio web stranicu:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-47-contents" aria-controls="callout-47" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-47" class="callout-47-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>events <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">time =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">30</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
<p>I izračunali ste vrijeme između svakog događaja i otkrili postoji li praznina dovoljno velika da kvalificira:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-48-contents" aria-controls="callout-48" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-48" class="callout-48-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>events <span class="ot">&lt;-</span> events <span class="sc">|&gt;</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff =</span> time <span class="sc">-</span> <span class="fu">lag</span>(time, <span class="at">default =</span> <span class="fu">first</span>(time)),</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">has_gap =</span> diff <span class="sc">&gt;=</span> <span class="dv">5</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>events</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 3
    time  diff has_gap
   &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  
 1     0     0 FALSE  
 2     1     1 FALSE  
 3     2     1 FALSE  
 4     3     1 FALSE  
 5     5     2 FALSE  
 6    10     5 TRUE   
 7    12     2 FALSE  
 8    15     3 FALSE  
 9    17     2 FALSE  
10    19     2 FALSE  
11    20     1 FALSE  
12    27     7 TRUE   
13    28     1 FALSE  
14    30     2 FALSE  </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ali kako prijeći s tog logičkog vektora na nešto što možemo koristiti s <code>group_by()</code>? Funkcija <code>cumsum()</code> dolazi u pomoć jer svaki put kada praznina (odnosno has_gap) postaje <code>TRUE</code>, grupa će se povećati za jedan:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-49-contents" aria-controls="callout-49" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-49" class="callout-49-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>events <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">cumsum</span>(has_gap)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 4
    time  diff has_gap group
   &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;   &lt;int&gt;
 1     0     0 FALSE       0
 2     1     1 FALSE       0
 3     2     1 FALSE       0
 4     3     1 FALSE       0
 5     5     2 FALSE       0
 6    10     5 TRUE        1
 7    12     2 FALSE       1
 8    15     3 FALSE       1
 9    17     2 FALSE       1
10    19     2 FALSE       1
11    20     1 FALSE       1
12    27     7 TRUE        2
13    28     1 FALSE       2
14    30     2 FALSE       2</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Drugi pristup za stvaranje grupnih varijabli je <code>consecutive_id()</code> koja započinje novu grupu svaki put kada se promijeni jedan od njezinih argumenata. Na primjer, inspiriran ovim Stack Overflow pitanjem, zamislite da imate podatkovni okvir s mnogo ponovljenih vrijednosti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-50-contents" aria-controls="callout-50" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-50" class="callout-50-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>),</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">199</span>)</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</div>
<p>Ako želite zadržati prvi redak iz svakog ponovljenog x, možete koristiti <code>group_by()</code>, <code>consecutive_id()</code> i <code>slice_head()</code>:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-51-contents" aria-controls="callout-51" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-51" class="callout-51-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">id =</span> <span class="fu">consecutive_id</span>(x)) <span class="sc">|&gt;</span> </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
# Groups:   id [7]
  x         y    id
  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;
1 a         1     1
2 b         2     2
3 c         4     3
4 d         3     4
5 e         9     5
6 a         4     6
7 b        10     7</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo koristiti consecutive_id() za identifikaciju skupina uzastopnih Pokémona iste vrste:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-52-contents" aria-controls="callout-52" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-52" class="callout-52-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type_group =</span> <span class="fu">consecutive_id</span>(type_1)) <span class="sc">|&gt;</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, type_1, type_group) <span class="sc">|&gt;</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
      id name                      type_1 type_group
   &lt;dbl&gt; &lt;chr&gt;                     &lt;fct&gt;       &lt;int&gt;
 1     1 bulbasaur                 grass           1
 2     2 ivysaur                   grass           1
 3     3 venusaur                  grass           1
 4     3 venusaurmega venusaur     grass           1
 5     4 charmander                fire            2
 6     5 charmeleon                fire            2
 7     6 charizard                 fire            2
 8     6 charizardmega charizard x fire            2
 9     6 charizardmega charizard y fire            2
10     7 squirtle                  water           3
11     8 wartortle                 water           3
12     9 blastoise                 water           3
13     9 blastoisemega blastoise   water           3
14    10 caterpie                  bug             4
15    11 metapod                   bug             4
16    12 butterfree                bug             4
17    13 weedle                    bug             4
18    14 kakuna                    bug             4
19    15 beedrill                  bug             4
20    15 beedrillmega beedrill     bug             4</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje kako <code>consecutive_id()</code> stvara nove grupe svaki put kada se promijeni primarna vrsta Pokémona, što može biti korisno za analizu evolucijskih linija ili grupiranja sličnih Pokémona u Pokédexu.</p>
<p>Možemo također analizirati kako se uzastopne grupe legendarnih i ne-legendarnih Pokémona mijenjaju:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-53-contents" aria-controls="callout-53" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-53" class="callout-53-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">legendary_group =</span> <span class="fu">consecutive_id</span>(legendary)</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(legendary_group) <span class="sc">|&gt;</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">legendary =</span> <span class="fu">first</span>(legendary),</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_pokemon =</span> <span class="fu">first</span>(name),</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_pokemon =</span> <span class="fu">last</span>(name)</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   legendary_group legendary count first_pokemon last_pokemon           
             &lt;int&gt; &lt;lgl&gt;     &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;                  
 1               1 FALSE       156 bulbasaur     snorlax                
 2               2 TRUE          3 articuno      moltres                
 3               3 FALSE         3 dratini       dragonite              
 4               4 TRUE          3 mewtwo        mewtwomega mewtwo y    
 5               5 FALSE        97 mew           blissey                
 6               6 TRUE          3 raikou        suicune                
 7               7 FALSE         4 larvitar      tyranitarmega tyranitar
 8               8 TRUE          2 lugia         ho-oh                  
 9               9 FALSE       143 celebi        metagrossmega metagross
10              10 TRUE         18 regirock      deoxysspeed forme      </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer otkriva obrazac distribucije legendarnih Pokémona kroz Pokédex, pokazujući da se obično pojavljuju u skupinama na kraju svake generacije.</p>
</section>
<section id="sažimanje-brojeva" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="sažimanje-brojeva"><span class="header-section-number">3</span> Sažimanje brojeva</h2>
<p>Samo korištenje brojanja, prosjeka i suma koje smo već uveli može vas odvesti daleko u analizi podataka, ali R pruža mnoge druge korisne funkcije sažimanja. Ovdje je izbor funkcija koje možda smatrate korisnima u radu s numeričkim podacima</p>
<p><strong>Središte</strong></p>
<p>Do sada smo većinom koristili <code>mean()</code> za sažimanje središta vektora vrijednosti. Kao što smo vidjeli u ranijim poglavljima, budući da je prosjek suma podijeljena s brojem opservacija, osjetljiv je čak i na samo nekoliko neobično visokih ili niskih vrijednosti. Alternativa je korištenje <code>median()</code> koja pronalazi vrijednost koja leži u “sredini” vektora, odnosno 50 % vrijednosti je iznad nje, a 50% je ispod nje. Ovisno o obliku distribucije varijable koja vas zanima, prosjek ili medijan mogu biti bolja mjera središta. Na primjer, za simetrične distribucije općenito prijavljujemo prosjek, dok za asimetrične distribucije obično prijavljujemo medijan.</p>
<p>U kontekstu <code>pokemon_dataset</code> podatkovnog okvira možemo usporediti prosjek i medijan za različite statistike:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-54-contents" aria-controls="callout-54" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-54" class="callout-54-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_attack =</span> <span class="fu">mean</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_attack =</span> <span class="fu">median</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_defense =</span> <span class="fu">mean</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_defense =</span> <span class="fu">median</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_speed =</span> <span class="fu">mean</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_speed =</span> <span class="fu">median</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  mean_attack median_attack mean_defense median_defense mean_speed median_speed
        &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
1        79.0            75         73.8             70       68.3           65</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje da su prosjeci svih statistika nešto viši od medijana, što sugerira blagu pozitivnu asimetričnost u distribucijama - postoje neki Pokémoni s izuzetno visokim vrijednostima koji povlače prosjek prema gore.</p>
<p>Možemo usporediti prosjek i medijan ukupne snage Pokémona po vrsti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-55-contents" aria-controls="callout-55" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-55" class="callout-55-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 4
   type_1   mean_total median_total     n
   &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;int&gt;
 1 dragon         551.         600     32
 2 steel          488.         500     27
 3 flying         485          558.     4
 4 psychic        476.         485     57
 5 fire           458.         482     52
 6 rock           454.         468.    44
 7 dark           446.         465     31
 8 electric       443.         478.    44
 9 ghost          440.         464.    32
10 ground         438.         440     32
11 ice            433.         468.    24
12 water          430.         455    112
13 grass          421.         430     70
14 fighting       416.         455     27
15 fairy          413.         405     17
16 normal         402.         415     98
17 poison         399.         402.    28
18 bug            379.         395     69</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Za većinu vrsta Pokémona, prosjek i medijan su relativno bliski, što ukazuje na relativno simetrične distribucije unutar svake vrste.</p>
<p>Možda biste se također pitali o modalnoj vrijednosti, odnosno najčešćoj vrijednosti. Ovo je sažetak koji dobro funkcionira samo za vrlo jednostavne slučajeve, ali ne funkcionira dobro za mnoge stvarne skupove podataka. Ako su podaci diskretni, može postojati više najčešćih vrijednosti, a ako su podaci kontinuirani, možda ne postoji najčešća vrijednost jer je svaka vrijednost malo drugačija. Iz ovih razloga, modus se obično ne koristi od strane statističara i ne postoji funkcija za modus uključena u osnovni R.</p>
<p><strong>Minimum, maksimum i kvantili</strong></p>
<p>Što ako vas zanimaju pozicije različite od središta? Funkcije <code>min()</code> i <code>max()</code> dat će vam najveću i najmanju vrijednost. Još jedan moćan alat je <code>quantile()</code>, koji je generalizacija medijana. Funkcija <code>quantile(x, 0.25)</code> pronaći će vrijednost x koja je veća od 25 % vrijednosti, <code>quantile(x, 0.5)</code> je ekvivalentna medijanu, a <code>quantile(x, 0.95)</code> pronaći će vrijednost koja je veća od 95% vrijednosti.</p>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo istražiti raspon i kvantile različitih statistika:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-56-contents" aria-controls="callout-56" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-56" class="callout-56-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_attack =</span> <span class="fu">min</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">q25_attack =</span> <span class="fu">quantile</span>(attack, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_attack =</span> <span class="fu">median</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">q75_attack =</span> <span class="fu">quantile</span>(attack, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_attack =</span> <span class="fu">max</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  min_attack q25_attack median_attack q75_attack max_attack
       &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1          5         55            75        100        190</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj rezultat pokazuje da najslabiji Pokémon ima napad od samo 5, dok najjači ima 190. Medijalna vrijednost od 75 i kvartili pokazuju da je distribucija napada relativno ravnomjerno raspoređena.</p>
<p>Možemo pogledati 95. percentil napada umjesto maksimuma, jer će ignorirati 5 % Pokémona s najjačim napadom koji mogu biti ekstremni:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-57-contents" aria-controls="callout-57" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-57" class="callout-57-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_attack =</span> <span class="fu">max</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">q95_attack =</span> <span class="fu">quantile</span>(attack, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  generation max_attack q95_attack     n
  &lt;fct&gt;           &lt;dbl&gt;      &lt;dbl&gt; &lt;int&gt;
1 1                 190       130    166
2 5                 170       135    165
3 3                 180       150    160
4 4                 170       136    121
5 2                 185       130    106
6 6                 160       131.    82</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje da, iako maksimalni napad raste kroz generacije (posebno u generaciji 6), 95. percentil je stabilniji i pruža bolji uvid u tipične vrijednosti napada.</p>
<p>Možemo analizirati kvantile ukupne snage po vrsti kako bismo dobili potpuniju sliku distribucije:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-58-contents" aria-controls="callout-58" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-58" class="callout-58-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">min =</span> <span class="fu">min</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">q25 =</span> <span class="fu">quantile</span>(total, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(total, <span class="fl">0.5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">q75 =</span> <span class="fu">quantile</span>(total, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">max =</span> <span class="fu">max</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 7
   type_1     min   q25 median   q75   max     n
   &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
 1 dragon     300  420    600   680    780    32
 2 flying     245  462.   558.  580    580     4
 3 steel      300  425    500   580    700    27
 4 psychic    198  336    485   600    780    57
 5 fire       250  368    482   534    680    52
 6 electric   205  362.   478.  520    610    44
 7 rock       280  360.   468.  516.   700    44
 8 ice        250  305    468.  526.   580    24
 9 dark       220  359    465   510    680    31
10 ghost      275  335    464.  496.   680    32
11 water      200  329.   455   502.   770   112
12 fighting   210  326.   455   498.   625    27
13 ground     265  330.   440   512.   770    32
14 grass      180  318.   430   497    630    70
15 normal     190  302.   415   482.   720    98
16 fairy      218  323    405   483    680    17
17 poison     245  324.   402.  490    535    28
18 bug        194  269    395   475    600    69</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ova analiza otkriva da zmajevi (dragon) imaju najviši medijalan ukupnu snagu, dok razlika između kvartila pokazuje koliko varijabilnosti postoji unutar svake vrste.</p>
<p><strong>Raspršenost</strong></p>
<p>Ponekad niste toliko zainteresirani za to gdje leži glavni dio podataka, već za to kako su podaci raspoređeni. Dva često korištena sažetka su standardna devijacija <code>sd(x)</code> i interkvartilni raspon <code>IQR()</code>. Nećemo ovdje objašnjavati <code>sd()</code> jer je vjerojatno već poznata, ali <code>IQR()</code> je <code>quantile(x, 0.75) - quantile(x, 0.25)</code> i daje vam raspon koji sadrži srednjih 50 % podataka.</p>
<p>U <code>pokemon_dataset</code> podatkovnom okviru možemo koristiti ove mjere za analizu varijabilnosti:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-59-contents" aria-controls="callout-59" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-59" class="callout-59-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_attack =</span> <span class="fu">sd</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_attack =</span> <span class="fu">IQR</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_defense =</span> <span class="fu">sd</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_defense =</span> <span class="fu">IQR</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_speed =</span> <span class="fu">sd</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_speed =</span> <span class="fu">IQR</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  sd_attack iqr_attack sd_defense iqr_defense sd_speed iqr_speed
      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1      32.5         45       31.2          40     29.1        45</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovi rezultati pokazuju da napad ima najveću standardnu devijaciju i interkvartilni raspon, što znači da postoji najveća varijabilnost u napadnim statistikama među Pokémonima.</p>
<p>Možemo usporediti raspršenost različitih vrsta Pokémona:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-60-contents" aria-controls="callout-60" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-60" class="callout-60-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_total =</span> <span class="fu">sd</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_total =</span> <span class="fu">IQR</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(sd_total))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 4
   type_1   sd_total iqr_total     n
   &lt;fct&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;
 1 flying      161.       118.     4
 2 dragon      146.       260     32
 3 psychic     139.       264     57
 4 ground      124.       183.    32
 5 fairy       124.       160     17
 6 bug         118.       206     69
 7 normal      116.       179     98
 8 steel       115.       155     27
 9 water       113.       174.   112
10 ghost       110.       161.    32
11 fire        110.       166     52
12 dark        109.       151     31
13 ice         108.       221.    24
14 rock        108.       156.    44
15 grass       107.       178.    70
16 electric    106.       158.    44
17 fighting    102.       171     27
18 poison       92.4      166.    28</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Normalni tipovi Pokémona pokazuju najveću standardnu devijaciju, što sugerira da ova kategorija sadrži vrlo različite Pokémone - od vrlo slabih do vrlo jakih.</p>
<p>Možemo koristiti <code>IQR()</code> za otkrivanje neobičnosti u podacima. Na primjer, možemo istražiti postoji li varijabilnost u visini Pokémona iste vrste:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-61-contents" aria-controls="callout-61" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-61" class="callout-61-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">HP_iqr =</span> <span class="fu">IQR</span>(HP, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HP_iqr <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(HP_iqr))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 3
   type_1   HP_iqr     n
   &lt;fct&gt;     &lt;dbl&gt; &lt;int&gt;
 1 water      38     112
 2 ice        36      24
 3 normal     35      98
 4 fairy      35      17
 5 ground     34.5    32
 6 dragon     33.8    32
 7 poison     30.2    28
 8 psychic    30      57
 9 rock       30      44
10 fighting   29      27
11 bug        25      69
12 grass      23.8    70
13 dark       22.5    31
14 fire       22      52
15 electric   20      44
16 ghost      19.2    32
17 steel      18      27
18 flying     11.2     4</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Zmajevi pokazuju najveću varijabilnost u visini, što ima smisla jer ova kategorija uključuje i male zmajeve i ogromne legendarne zmajeve.</p>
<p><strong>Distribucije</strong></p>
<p>Važno je zapamtiti da su sve gore opisane statistike sažimanja način sažimanja distribucije na jedan broj. To znači da su fundamentalno reduktivne i ako odaberete pogrešan sažetak, lako možete propustiti važne razlike između grupa. Zbog toga je uvijek dobra ideja vizualizirati distribuciju prije nego što se posvetite vašim statistikama sažimanja.</p>
<p>Možemo vizualizirati cjelokupnu distribuciju napada u pokemon_dataset podatkovnom okviru:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-62-contents" aria-controls="callout-62" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-62" class="callout-62-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> attack)) <span class="sc">+</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribucija napada Pokémona"</span>, <span class="at">x =</span> <span class="st">"Napad"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_04_brojevi_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Distribucija je asimetrična s dugim repom prema višim vrijednostima, što sugerira da je medijana vjerojatno bolji sažetak od prosjeka. Možemo detaljnije pogledati podatke zumiranjem na područje između 0 i 150:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-63-contents" aria-controls="callout-63" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-63" class="callout-63-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(attack <span class="sc">&lt;=</span> <span class="dv">150</span>) <span class="sc">|&gt;</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> attack)) <span class="sc">+</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribucija napada Pokémona (do 150)"</span>, <span class="at">x =</span> <span class="st">"Napad"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_04_brojevi_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Također je dobra ideja provjeriti da li distribucije za podgrupe nalikuju cjelini. U sljedećem grafu prikazujemo histograme ukupne snage za svaku generaciju:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-64-contents" aria-controls="callout-64" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-64" class="callout-64-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> total, <span class="at">fill =</span> <span class="fu">factor</span>(generation))) <span class="sc">+</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> generation, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribucija ukupne snage po generacijama"</span>, <span class="at">x =</span> <span class="st">"Ukupna snaga"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>, <span class="at">fill =</span> <span class="st">"Generacija"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_04_brojevi_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Distribucije izgledaju kao da slijede sličan obrazac kroz sve generacije, što sugerira da je u redu koristiti isti sažetak za svaku generaciju.</p>
<p>Možemo također koristiti frekvencijske poligone za usporedbu distribucija između vrsta:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-65-contents" aria-controls="callout-65" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-65" class="callout-65-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type_1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"water"</span>, <span class="st">"fire"</span>, <span class="st">"grass"</span>, <span class="st">"electric"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> total, <span class="at">color =</span> type_1)) <span class="sc">+</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Usporedba distribucija ukupne snage"</span>, <span class="at">x =</span> <span class="st">"Ukupna snaga"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>, <span class="at">color =</span> <span class="st">"Vrsta"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_04_brojevi_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Ne bojte se istraživati vlastite prilagođene sažetke specifično prilagođene podacima s kojima radite. U ovom slučaju, to može značiti odvojeno sažimanje legendarnih i ne-legendarnih Pokémona:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-66-contents" aria-controls="callout-66" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-66" class="callout-66-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(legendary) <span class="sc">|&gt;</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_total =</span> <span class="fu">sd</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  legendary mean_total median_total sd_total     n
  &lt;lgl&gt;          &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
1 FALSE           417.          425    107.    735
2 TRUE            637.          600     60.9    65</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj rezultat jasno pokazuje da legendarni Pokémoni imaju znatno veću prosječnu ukupnu snagu (638 naspram 417), ali manju varijabilnost (standardna devijacija od 60.3 naspram 101), što sugerira da su legendarni Pokémoni konzistentno snažni.</p>
<p>Budući da su vrijednosti tako asimetrične, možete pokušati logaritamsku transformaciju za bolju analizu:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-67-contents" aria-controls="callout-67" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-67" class="callout-67-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_total =</span> <span class="fu">log10</span>(total)) <span class="sc">|&gt;</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_total)) <span class="sc">+</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.1</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Logaritamska transformacija ukupne snage"</span>, <span class="at">x =</span> <span class="st">"log10(Ukupna snaga)"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_04_brojevi_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Na kraju, nemojte zaboraviti što ste naučili u ranijim poglavljima: kad god stvarate numeričke sažetke, dobra je ideja uključiti broj opservacija u svakoj grupi.</p>
<p><strong>Pozicije</strong></p>
<p>Postoji još jedna završna vrsta sažetka koja je korisna za numeričke vektore, ali također funkcionira sa svakom drugom vrstom vrijednosti: izvlačenje vrijednosti na specifičnoj poziciji pomoću funkcija <code>first(x)</code>, <code>last(x)</code> i <code>nth(x, n)</code>.</p>
<p>Na primjer, možemo pronaći prvog, petog i posljednjeg Pokémona za svaku generaciju:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-68-contents" aria-controls="callout-68" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-68" class="callout-68-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_pokemon =</span> <span class="fu">first</span>(name),</span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fifth_pokemon =</span> <span class="fu">nth</span>(name, <span class="dv">5</span>),</span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_pokemon =</span> <span class="fu">last</span>(name),</span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  generation first_pokemon fifth_pokemon last_pokemon          n
  &lt;fct&gt;      &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;             &lt;int&gt;
1 1          bulbasaur     charmander    mew                 166
2 5          victini       tepig         genesect            165
3 3          treecko       torchic       deoxysspeed forme   160
4 4          turtwig       monferno      arceus              121
5 2          chikorita     quilava       celebi              106
6 6          chespin       braixen       volcanion            82</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Budući da dplyr funkcije koriste <code>_</code> za odvajanje komponenti naziva funkcija i argumenata, ove funkcije koriste <code>na_rm</code> umjesto <code>na.rm</code>. Ako izvlačite vrijednosti na pozicijama, možete pružiti zadanu vrijednost ako navedena pozicija ne postoji, argument <code>order_by</code> omogućuje vam lokalno prepisivanje redoslijeda redaka, a argument <code>na_rm</code> omogućuje vam ispuštanje nedostajućih vrijednosti.</p>
<p>Možemo pronaći Pokémone s najjačim napadom u svakoj generaciji koristeći kombinaciju pozicija i rangiranja:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-69-contents" aria-controls="callout-69" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-69" class="callout-69-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(attack)) <span class="sc">|&gt;</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">strongest_pokemon =</span> <span class="fu">first</span>(name),</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">strongest_attack =</span> <span class="fu">first</span>(attack),</span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  generation strongest_pokemon       strongest_attack     n
  &lt;fct&gt;      &lt;chr&gt;                              &lt;dbl&gt; &lt;int&gt;
1 1          mewtwomega mewtwo x                  190   166
2 5          kyuremblack kyurem                   170   165
3 3          groudonprimal groudon                180   160
4 4          garchompmega garchomp                170   121
5 2          heracrossmega heracross              185   106
6 6          dianciemega diancie                  160    82</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj primjer pokazuje kako se najjači Pokémoni mijenjaju kroz generacije, s mega evolucijom Mewtwoa u generaciji 6 koja drži apsolutni rekord napada.</p>
<p>Izvlačenje vrijednosti na pozicijama komplementarno je filtriranju na rangovima. Filtriranje daje sve varijable, sa svakom opservacijom u odvojenom retku:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-70-contents" aria-controls="callout-70" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-70" class="callout-70-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">r =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(attack))) <span class="sc">|&gt;</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fu">max</span>(r))) <span class="sc">|&gt;</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, attack, r) <span class="sc">|&gt;</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(generation, r)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 4
# Groups:   generation [6]
   generation name                    attack     r
   &lt;fct&gt;      &lt;chr&gt;                    &lt;dbl&gt; &lt;int&gt;
 1 1          mewtwomega mewtwo x        190     1
 2 1          chansey                      5   166
 3 5          kyuremblack kyurem         170     1
 4 5          munna                       25   165
 5 3          groudonprimal groudon      180     1
 6 3          rayquazamega rayquaza      180     1
 7 3          deoxysattack forme         180     1
 8 3          feebas                      15   160
 9 4          garchompmega garchomp      170     1
10 4          happiny                      5   121
11 2          heracrossmega heracross    185     1
12 2          shuckle                     10   105
13 2          blissey                     10   105
14 6          dianciemega diancie        160     1
15 6          hoopahoopa unbound         160     1
16 6          spewpa                      22    82</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ovaj pristup omogućuje nam da vidimo i najjače i najslabije Pokémone u svakoj generaciji zajedno sa svim njihovim varijablama.</p>
<p><strong>S glagolom <code>mutate()</code></strong></p>
<p>Kao što nazivi sugeriraju, funkcije sažimanja obično se koriste s <code>summarize()</code>. Međutim, zbog pravila recikliranja o kojima smo raspravljali ranije, one se također mogu korisno kombinirati s <code>mutate()</code>, osobito kada želite provesti neku vrstu grupne standardizacije.</p>
<p>Izraz <code>x / sum(x)</code> izračunava proporciju ukupnog iznosa:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-71-contents" aria-controls="callout-71" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-71" class="callout-71-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_of_total =</span> total <span class="sc">/</span> <span class="fu">sum</span>(total)</span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, total, prop_of_total) <span class="sc">|&gt;</span></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(generation, <span class="fu">desc</span>(prop_of_total)) <span class="sc">|&gt;</span></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
# Groups:   generation [1]
   generation name                      total prop_of_total
   &lt;fct&gt;      &lt;chr&gt;                     &lt;dbl&gt;         &lt;dbl&gt;
 1 1          mewtwomega mewtwo x         780       0.0110 
 2 1          mewtwomega mewtwo y         780       0.0110 
 3 1          mewtwo                      680       0.00960
 4 1          gyaradosmega gyarados       640       0.00903
 5 1          charizardmega charizard x   634       0.00895
 6 1          charizardmega charizard y   634       0.00895
 7 1          blastoisemega blastoise     630       0.00889
 8 1          venusaurmega venusaur       625       0.00882
 9 1          aerodactylmega aerodactyl   615       0.00868
10 1          gengarmega gengar           600       0.00847
11 1          pinsirmega pinsir           600       0.00847
12 1          dragonite                   600       0.00847</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Izraz <code>(x - mean(x)) / sd(x)</code> izračunava Z-score (standardiziran na prosjek 0 i standardnu devijaciju 1):</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-72-contents" aria-controls="callout-72" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-72" class="callout-72-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack_zscore =</span> (attack <span class="sc">-</span> <span class="fu">mean</span>(attack)) <span class="sc">/</span> <span class="fu">sd</span>(attack)</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(type_1, name, attack, attack_zscore) <span class="sc">|&gt;</span></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(type_1, <span class="fu">desc</span>(attack_zscore)) <span class="sc">|&gt;</span></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
# Groups:   type_1 [1]
   type_1 name                  attack attack_zscore
   &lt;fct&gt;  &lt;chr&gt;                  &lt;dbl&gt;         &lt;dbl&gt;
 1 water  gyaradosmega gyarados    155          2.85
 2 water  swampertmega swampert    150          2.67
 3 water  kyogreprimal kyogre      150          2.67
 4 water  sharpedomega sharpedo    140          2.32
 5 water  kingler                  130          1.97
 6 water  gyarados                 125          1.79
 7 water  sharpedo                 120          1.62
 8 water  crawdaunt                120          1.62
 9 water  palkia                   120          1.62
10 water  swampert                 110          1.26
11 water  carracosta               108          1.19
12 water  krabby                   105          1.09</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Izraz <code>(x - min(x)) / (max(x) - min(x))</code> standardizira na raspon [0, 1]:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-73-contents" aria-controls="callout-73" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-73" class="callout-73-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">attack_scaled =</span> (attack <span class="sc">-</span> <span class="fu">min</span>(attack)) <span class="sc">/</span> (<span class="fu">max</span>(attack) <span class="sc">-</span> <span class="fu">min</span>(attack))) <span class="sc">|&gt;</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, attack, attack_scaled) <span class="sc">|&gt;</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(generation, <span class="fu">desc</span>(attack_scaled)) <span class="sc">|&gt;</span></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
# Groups:   generation [1]
   generation name                      attack attack_scaled
   &lt;fct&gt;      &lt;chr&gt;                      &lt;dbl&gt;         &lt;dbl&gt;
 1 1          mewtwomega mewtwo x          190         1    
 2 1          pinsirmega pinsir            155         0.811
 3 1          gyaradosmega gyarados        155         0.811
 4 1          beedrillmega beedrill        150         0.784
 5 1          mewtwomega mewtwo y          150         0.784
 6 1          aerodactylmega aerodactyl    135         0.703
 7 1          dragonite                    134         0.697
 8 1          charizardmega charizard x    130         0.676
 9 1          machamp                      130         0.676
10 1          kingler                      130         0.676
11 1          rhydon                       130         0.676
12 1          flareon                      130         0.676</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Izraz <code>x / first(x)</code> izračunava indeks temeljen na prvoj opservaciji:</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Primjer">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-74-contents" aria-controls="callout-74" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Primjer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-74" class="callout-74-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">attack_index =</span> attack <span class="sc">/</span> <span class="fu">first</span>(attack)) <span class="sc">|&gt;</span></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, attack, attack_index) <span class="sc">|&gt;</span></span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
# Groups:   generation [1]
   generation name                      attack attack_index
   &lt;fct&gt;      &lt;chr&gt;                      &lt;dbl&gt;        &lt;dbl&gt;
 1 1          bulbasaur                     49        1    
 2 1          ivysaur                       62        1.27 
 3 1          venusaur                      82        1.67 
 4 1          venusaurmega venusaur        100        2.04 
 5 1          charmander                    52        1.06 
 6 1          charmeleon                    64        1.31 
 7 1          charizard                     84        1.71 
 8 1          charizardmega charizard x    130        2.65 
 9 1          charizardmega charizard y    104        2.12 
10 1          squirtle                      48        0.980
11 1          wartortle                     63        1.29 
12 1          blastoise                     83        1.69 </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Ove tehnike omogućuju usporedbu Pokémona unutar njihovih grupa na relativnoj skali, što može biti korisnije od apsolutnih vrijednosti kada analizirate obrazce i odnose između različitih kategorija Pokémona.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03_03_pridruzivanje_podataka.html" class="pagination-link" aria-label="Pridruživanje podataka">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Pridruživanje podataka</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03_05_logicke_vrijednosti.html" class="pagination-link" aria-label="Logičke vrijednosti">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Logičke vrijednosti</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb152" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Brojevi"</span></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> ""</span></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> "#483D8B"</span></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"</span></span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a><span class="an">lang:</span><span class="co"> hr</span></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a><span class="an">crossref:</span></span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a><span class="co">  tbl-title: "Tablica"</span></span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a><span class="co">  fig-title: "Slika"</span></span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-15"><a href="#cb152-15" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-16"><a href="#cb152-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb152-17"><a href="#cb152-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-18"><a href="#cb152-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Aktiviranje paketa</span></span>
<span id="cb152-19"><a href="#cb152-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb152-20"><a href="#cb152-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RKaggle)</span>
<span id="cb152-21"><a href="#cb152-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-22"><a href="#cb152-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-25"><a href="#cb152-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-26"><a href="#cb152-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb152-27"><a href="#cb152-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-28"><a href="#cb152-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Učitavanje podataka</span></span>
<span id="cb152-29"><a href="#cb152-29" aria-hidden="true" tabindex="-1"></a>poke_raw <span class="ot">&lt;-</span> <span class="fu">get_dataset</span>(<span class="st">"abcsds/pokemon"</span>)</span>
<span id="cb152-30"><a href="#cb152-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-31"><a href="#cb152-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Prilagodba podatkovnog okvira</span></span>
<span id="cb152-32"><a href="#cb152-32" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="ot">&lt;-</span> poke_raw <span class="sc">|&gt;</span></span>
<span id="cb152-33"><a href="#cb152-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb152-34"><a href="#cb152-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb152-35"><a href="#cb152-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="st">`</span><span class="at">#</span><span class="st">`</span>,</span>
<span id="cb152-36"><a href="#cb152-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">`</span><span class="at">Name</span><span class="st">`</span>,</span>
<span id="cb152-37"><a href="#cb152-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_1 =</span> <span class="st">`</span><span class="at">Type 1</span><span class="st">`</span>,</span>
<span id="cb152-38"><a href="#cb152-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_2 =</span> <span class="st">`</span><span class="at">Type 2</span><span class="st">`</span>,</span>
<span id="cb152-39"><a href="#cb152-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> <span class="st">`</span><span class="at">Total</span><span class="st">`</span>,</span>
<span id="cb152-40"><a href="#cb152-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack =</span> <span class="st">`</span><span class="at">Attack</span><span class="st">`</span>,</span>
<span id="cb152-41"><a href="#cb152-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">defense =</span> <span class="st">`</span><span class="at">Defense</span><span class="st">`</span>,</span>
<span id="cb152-42"><a href="#cb152-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_attack =</span> <span class="st">`</span><span class="at">Sp. Atk</span><span class="st">`</span>,</span>
<span id="cb152-43"><a href="#cb152-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_defense =</span> <span class="st">`</span><span class="at">Sp. Def</span><span class="st">`</span>,</span>
<span id="cb152-44"><a href="#cb152-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> <span class="st">`</span><span class="at">Speed</span><span class="st">`</span>,</span>
<span id="cb152-45"><a href="#cb152-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">generation =</span> <span class="st">`</span><span class="at">Generation</span><span class="st">`</span>,</span>
<span id="cb152-46"><a href="#cb152-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">legendary =</span> <span class="st">`</span><span class="at">Legendary</span><span class="st">`</span></span>
<span id="cb152-47"><a href="#cb152-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-48"><a href="#cb152-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-49"><a href="#cb152-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">type_1</span><span class="st">`</span>, <span class="st">`</span><span class="at">type_2</span><span class="st">`</span>, generation), as.character),</span>
<span id="cb152-50"><a href="#cb152-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(legendary, as.logical),</span>
<span id="cb152-51"><a href="#cb152-51" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-52"><a href="#cb152-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">str_to_lower</span>(.x))) <span class="sc">|&gt;</span></span>
<span id="cb152-53"><a href="#cb152-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-54"><a href="#cb152-54" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">type_1</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fct_infreq</span>(<span class="st">`</span><span class="at">type_1</span><span class="st">`</span>),</span>
<span id="cb152-55"><a href="#cb152-55" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">type_2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fct_infreq</span>(<span class="st">`</span><span class="at">type_2</span><span class="st">`</span>),</span>
<span id="cb152-56"><a href="#cb152-56" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">generation</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">fct_infreq</span>(<span class="st">`</span><span class="at">generation</span><span class="st">`</span>)</span>
<span id="cb152-57"><a href="#cb152-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-58"><a href="#cb152-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-59"><a href="#cb152-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-60"><a href="#cb152-60" aria-hidden="true" tabindex="-1"></a>Brojčani podaci predstavljaju temelj znanosti o podacima i statistike općenito, a numerički vektori čine temelj večine analiza podataka te su ključni za izgradnju prediktivnih modela i donošenje odluka temeljenih na podacima. Brojevi omogućuju kvantifikaciju stvarnosti, mjerenje promjena, usporedbu između različitih entiteta te otkrivanje skrivenih obrazaca u podacima. U kontekstu analize podataka, brojčani podaci koriste se za mjerenje različitih varijabli od interesa, bilo da se radi o financijskim prihodima tvrtke, demografskim karakteristikama populacije ili performansnim metrikama modela strojnog učenja. U svim ovim slučajevima numerički vektori su fundamentalni građevni blokovi analize.</span>
<span id="cb152-61"><a href="#cb152-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-62"><a href="#cb152-62" aria-hidden="true" tabindex="-1"></a>Važnost brojeva očituje se kroz nekoliko ključnih dimenzija:</span>
<span id="cb152-63"><a href="#cb152-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-64"><a href="#cb152-64" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Brojevi omogućuju precizno mjerenje i kvantifikaciju fenomena. Umjesto kvalitativnih opisa poput "visoka cijena" ili "niska prodaja", numerički podaci omogućuju precizne vrijednosti koje se mogu uspoređivati, kombinirati i analizirati matematičkim metodama.</span>
<span id="cb152-65"><a href="#cb152-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-66"><a href="#cb152-66" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Brojevi služe kao osnova za primjenu statističkih testova koje omogućuju donošenje zaključaka temeljenih na kvantificiranim vrijednostima umjesto na intuiciji ili pretpostavkama.</span>
<span id="cb152-67"><a href="#cb152-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-68"><a href="#cb152-68" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Numerički podaci omogućuju primjenu algoritama strojnog učenja koji otkrivaju složene obrasce i relacije u podacima koje bi ljudska analiza teško mogla detektirati.</span>
<span id="cb152-69"><a href="#cb152-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-70"><a href="#cb152-70" aria-hidden="true" tabindex="-1"></a>Kada govorimo o <span class="in">`pokemon_dataset`</span>, varijable poput "HP", "attack", "defense" i "speed" predstavljaju numeričke vrijednosti koje opisuju različite karakteristike Pokemona. Ove brojčane vrijednosti omogućuju provedbu raznovrsnih analiza, od jednostavnih deskriptivnih statistika (prosječna snaga napada po generaciji) do složenijih prediktivnih modela (predviđanje je li Pokemon legendaran na temelju njegovih atributa).</span>
<span id="cb152-71"><a href="#cb152-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-72"><a href="#cb152-72" aria-hidden="true" tabindex="-1"></a>U većini slučajeva brojevi u R-u dolaze već spremni za analizu iz podatkovnih okvira koje učitavamo pomoću funkcija poput <span class="in">`read_csv()`</span>. Međutim, postoje situacije u kojima je potrebno stvoriti brojeve iz drugih vrsta podataka ili ih pretvoriti iz različitih formata. Kada učitavamo podatke iz CSV datoteka, <span class="in">`readr`</span> koristi heuristiku koja pokušava automatski prepoznati tip podataka u svakom stupcu. Ako stupac sadrži samo brojeve i možda posebne vrijednosti kao što su <span class="in">`NA`</span>, <span class="in">`readr`</span> će ga automatski definirati kao numerički vektor. Na primjer, u <span class="in">`pokemon_dataset`</span> podatkovnom okviru varijable poput "HP", "attack", "defense", "special_attack", "special_defense" i "speed" automatski se prepoznaju kao numeričke vrijednosti jer sadrže isključivo brojčane podatke koje predstavljaju različite statističke karakteristike Pokemona.</span>
<span id="cb152-73"><a href="#cb152-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-74"><a href="#cb152-74" aria-hidden="true" tabindex="-1"></a>Ponekad se dogodi da podaci koji bi trebali biti brojevi budu definirani kao znakovi. To se najčešće događa kada su brojevi u izvornoj datoteci formatirani na poseban način, primjerice kada sadrže zareze kao separatore tisućica, valutne simbole, postotke ili druge ne-numeričke znakove. U takvim situacijama R ne može automatski prepoznati brojčanu prirodu podataka i tretira ih kao tekst. Za pretvaranje takvih znakova u brojeve koristi se funkcija <span class="in">`parse_number()`</span> koja je dizajnirana da izvuče brojčane vrijednosti ignorirajući sve ne-numeričke znakove koji okružuju broj.</span>
<span id="cb152-75"><a href="#cb152-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-76"><a href="#cb152-76" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon="false" collapse="true" title="Funkcija parse_number()"}</span>
<span id="cb152-77"><a href="#cb152-77" aria-hidden="true" tabindex="-1"></a><span class="in">`parse_number()`</span> je funkcija iz paketa <span class="in">`readr`</span> koja iz tekstualnih vrijednosti izvlači broj i pretvara ga u numerički tip. Funkcija je fleksibilna jer ignorira znakove koji nisu dio broja odbacujući nenumeričke znakove prije i poslije prvog pronađenog broja, pa je korisna za varijable poput cijena, iznosa s valutom, postotaka i sličnih zapisa.</span>
<span id="cb152-78"><a href="#cb152-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-79"><a href="#cb152-79" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Argument <span class="pp">|</span> Objašnjenje <span class="pp">|</span></span>
<span id="cb152-80"><a href="#cb152-80" aria-hidden="true" tabindex="-1"></a><span class="pp">|---|---|</span></span>
<span id="cb152-81"><a href="#cb152-81" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> x <span class="pp">|</span> Znakovni vektor vrijednosti koje se parsiraju. <span class="pp">|</span></span>
<span id="cb152-82"><a href="#cb152-82" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> na <span class="pp">|</span> Znakovni vektor nizova koje treba tretirati kao nedostajuće vrijednosti. Zadano je <span class="in">`c("", "NA")`</span>. Ako želimo isključiti ovu logiku, možemo postaviti <span class="in">`na = character()`</span>. <span class="pp">|</span></span>
<span id="cb152-83"><a href="#cb152-83" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> locale <span class="pp">|</span> Objekt lokalizacije koji određuje regionalne postavke (npr. decimalni znak i znak grupiranja, encoding itd.). Zadano je <span class="in">`default_locale()`</span>, a prilagođava se funkcijom <span class="in">`locale()`</span>. <span class="pp">|</span></span>
<span id="cb152-84"><a href="#cb152-84" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> trim_ws <span class="pp">|</span> Logička vrijednost koja određuje hoće li se prije parsiranja ukloniti vodeći i završni razmaci. Zadano je <span class="in">`TRUE`</span>. <span class="pp">|</span></span>
<span id="cb152-85"><a href="#cb152-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-86"><a href="#cb152-86" aria-hidden="true" tabindex="-1"></a>Važno je napomenuti da <span class="in">`parse_number()`</span> radi tako što ignorira sve nenumeričke znakove prije i poslije broja, ali zadržava decimalnu točku i negativni predznak ako postoje. Ova funkcija je posebno korisna pri čišćenju podataka koji dolaze iz različitih izvora gdje numerički podaci nisu standardizirano formatirani, što omogućava brzu i jednostavnu pretvorbu u format pogodan za daljnju analizu i vizualizaciju.</span>
<span id="cb152-87"><a href="#cb152-87" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-88"><a href="#cb152-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-89"><a href="#cb152-89" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-90"><a href="#cb152-90" aria-hidden="true" tabindex="-1"></a>Primjer primjene <span class="in">`parse_number()`</span> funkcije može se ilustrirati na hipotetskoj situaciji u kojoj bi podaci o težini Pokemona bili formatirani s dodatnim tekstom. Pretpostavimo da umjesto čistih brojčanih vrijednosti u varijabli <span class="in">`weight_kg`</span> imamo zapise poput "12.5 kg" ili "weight: 89.3". U takvom slučaju bi <span class="in">`parse_number()`</span> funkcija izvukla samo brojčane vrijednosti.</span>
<span id="cb152-91"><a href="#cb152-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-94"><a href="#cb152-94" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-95"><a href="#cb152-95" aria-hidden="true" tabindex="-1"></a><span class="co"># Primjer s formatiranim podacima o težini</span></span>
<span id="cb152-96"><a href="#cb152-96" aria-hidden="true" tabindex="-1"></a>formatted_weight <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"12.5 kg"</span>, <span class="st">"weight: 89.3"</span>, <span class="st">"45.7kg"</span>, <span class="st">"150.2 kilograms"</span>)</span>
<span id="cb152-97"><a href="#cb152-97" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_number</span>(formatted_weight)</span>
<span id="cb152-98"><a href="#cb152-98" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-99"><a href="#cb152-99" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-100"><a href="#cb152-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-101"><a href="#cb152-101" aria-hidden="true" tabindex="-1"></a>Iznenađujuće je koliko se analize podataka može provesti samo pomoću brojanja i osnovnih aritmetičkih operacija, stoga paket <span class="in">`dplyr`</span> nastoji učiniti brojanje što jednostavnijim putem funkcije <span class="in">`count()`</span>. Ova funkcija predstavlja moćan alat za brzu eksploraciju podataka i provjeru tijekom analize, omogućujući istraživačima da brzo dobiju uvid u distribuciju vrijednosti unutar podatkovnog okvira.</span>
<span id="cb152-102"><a href="#cb152-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-103"><a href="#cb152-103" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-104"><a href="#cb152-104" aria-hidden="true" tabindex="-1"></a>Primjerice, ako želimo saznati koliko Pokémona pripada svakoj vrsti (type_1) u <span class="in">`pokemon_dataset`</span> podatkovnom okviru, možemo jednostavno koristiti.</span>
<span id="cb152-105"><a href="#cb152-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-108"><a href="#cb152-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-109"><a href="#cb152-109" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">count</span>(type_1, <span class="at">sort =</span> <span class="cn">FALSE</span>)</span>
<span id="cb152-110"><a href="#cb152-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-111"><a href="#cb152-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-112"><a href="#cb152-112" aria-hidden="true" tabindex="-1"></a>Ovaj kod vraća tibble koji prikazuje svaku jedinstvenu vrstu Pokémona zajedno s brojem Pokémona koji pripadaju toj vrsti. Takav pristup omogućuje brzu identifikaciju najčešćih i najrjeđih vrsta u skupu podataka. Ova naredba daje popis vrsta Pokémona poredanih od najčešćih prema najrjeđima. Ovo je osobito korisno kada radimo s podatkovnim okvirima koji sadrže mnogo jedinstvenih vrijednosti i želimo brzo identificirati dominantne kategorije. U slučaju pokemon_dataset podatkovnog okvira, takva analiza otkriva da su Pokémoni vodenog tipa (water) najčešći, dok su neki specijalizirani tipovi znatno rjeđi.</span>
<span id="cb152-113"><a href="#cb152-113" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-114"><a href="#cb152-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-115"><a href="#cb152-115" aria-hidden="true" tabindex="-1"></a>Važno je napomenuti da ako želimo vidjeti sve vrijednosti u rezultatu funkcije count(), možemo koristiti <span class="in">`|&gt; View()`</span> za otvaranje interaktivnog pregleda u RStudio-u ili <span class="in">`|&gt; print(n = Inf)`</span> za ispisivanje svih redaka u konzoli. Ovo je korisno kada radimo s varijablama koje imaju umjeren broj jedinstvenih vrijednosti i želimo dobiti potpun pregled distribucije. Istu računsku operaciju možemo postići "ručno" koristeći kombinaciju funkcija <span class="in">`group_by()`</span>, <span class="in">`summarize()`</span> i specijalne funkcije <span class="in">`n()`</span>:</span>
<span id="cb152-116"><a href="#cb152-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-117"><a href="#cb152-117" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-120"><a href="#cb152-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-121"><a href="#cb152-121" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-122"><a href="#cb152-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-123"><a href="#cb152-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb152-124"><a href="#cb152-124" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-125"><a href="#cb152-125" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-126"><a href="#cb152-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-127"><a href="#cb152-127" aria-hidden="true" tabindex="-1"></a>Ovaj pristup je koristan jer omogućuje istovremeno računanje drugih sažetaka uz brojanje. Funkcija <span class="in">`n()`</span> je posebna funkcija sažimanja koja ne prima nikakve argumente, već pristupa informacijama o trenutnoj grupi podataka. To znači da funkcionira samo unutar dplyr funkcija poput <span class="in">`mutate()`</span>, <span class="in">`filter()`</span> i <span class="in">`group_by()`</span>. Ako pokušamo koristiti <span class="in">`n()`</span> izvan konteksta ovih funkcija, dobit ćemo grešku. Primjerice, možemo brojati Pokémone po vrsti i istovremeno izračunati prosječnu snagu napada:</span>
<span id="cb152-128"><a href="#cb152-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-129"><a href="#cb152-129" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-132"><a href="#cb152-132" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-133"><a href="#cb152-133" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-134"><a href="#cb152-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-135"><a href="#cb152-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-136"><a href="#cb152-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb152-137"><a href="#cb152-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_attack =</span> <span class="fu">mean</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb152-138"><a href="#cb152-138" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-139"><a href="#cb152-139" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-140"><a href="#cb152-140" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-141"><a href="#cb152-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-142"><a href="#cb152-142" aria-hidden="true" tabindex="-1"></a>Ovaj kod grupira Pokémone prema njihovoj primarnoj vrsti, broji koliko ih ima u svakoj grupi pomoću <span class="in">`n()`</span>, i izračunava prosječnu vrijednost napada za svaku grupu.</span>
<span id="cb152-143"><a href="#cb152-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-144"><a href="#cb152-144" aria-hidden="true" tabindex="-1"></a>Postoji nekoliko varijanti funkcija <span class="in">`n()`</span> i <span class="in">`count()`</span> koje mogu biti korisne u različitim situacijama. Funkcija <span class="in">`n_distinct()`</span> broji broj različitih, odnosno jedinstvenih vrijednosti jedne ili više varijabli. Na primjer, možemo saznati koliko različitih generacija Pokémona postoji za svaku vrstu:</span>
<span id="cb152-145"><a href="#cb152-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-146"><a href="#cb152-146" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-149"><a href="#cb152-149" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-150"><a href="#cb152-150" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-151"><a href="#cb152-151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-152"><a href="#cb152-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">generations =</span> <span class="fu">n_distinct</span>(generation)) <span class="sc">|&gt;</span></span>
<span id="cb152-153"><a href="#cb152-153" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(generations))</span>
<span id="cb152-154"><a href="#cb152-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-155"><a href="#cb152-155" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-156"><a href="#cb152-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-157"><a href="#cb152-157" aria-hidden="true" tabindex="-1"></a>Ovaj pristup omogućuje identificiranje vrsta Pokémona koje su prisutne kroz više generacija igara.</span>
<span id="cb152-158"><a href="#cb152-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-159"><a href="#cb152-159" aria-hidden="true" tabindex="-1"></a>Ponderirano brojanje predstavlja još jednu korisnu varijantu standardnog brojanja. Zapravo, ponderirano brojanje je suma određene varijable. Primjerice, mogli bismo "prebrojati" ukupnu snagu svih Pokémona određene vrste zbrajajući njihove vrijednosti napada:</span>
<span id="cb152-160"><a href="#cb152-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-161"><a href="#cb152-161" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-164"><a href="#cb152-164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-165"><a href="#cb152-165" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-166"><a href="#cb152-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-167"><a href="#cb152-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_attack =</span> <span class="fu">sum</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb152-168"><a href="#cb152-168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-169"><a href="#cb152-169" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-170"><a href="#cb152-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-171"><a href="#cb152-171" aria-hidden="true" tabindex="-1"></a>Budući da je ponderirano brojanje čest problem u analizi podataka, funkcija <span class="in">`count()`</span> ima argument <span class="in">`wt`</span> koji omogućuje istu operaciju na jednostavniji način:</span>
<span id="cb152-172"><a href="#cb152-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-173"><a href="#cb152-173" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-176"><a href="#cb152-176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-177"><a href="#cb152-177" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">count</span>(type_1, <span class="at">wt =</span> attack)</span>
<span id="cb152-178"><a href="#cb152-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-179"><a href="#cb152-179" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-180"><a href="#cb152-180" aria-hidden="true" tabindex="-1"></a>Ovaj pristup je elegantniji i čitljiviji od eksplicitnog korištenja <span class="in">`group_by()`</span> i <span class="in">`summarize()`</span>.</span>
<span id="cb152-181"><a href="#cb152-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-182"><a href="#cb152-182" aria-hidden="true" tabindex="-1"></a>Možemo brojati i nedostajuće vrijednosti kombiniranjem funkcija <span class="in">`sum()`</span> i <span class="in">`is.na()`</span>. Primjerice, ako želimo saznati koliko Pokémona u svakoj generaciji ima nedostajuće podatke o tipu 2, možemo koristiti:</span>
<span id="cb152-183"><a href="#cb152-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-184"><a href="#cb152-184" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-187"><a href="#cb152-187" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-188"><a href="#cb152-188" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-189"><a href="#cb152-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-190"><a href="#cb152-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">missing_height =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(type_2)))</span>
<span id="cb152-191"><a href="#cb152-191" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-192"><a href="#cb152-192" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-193"><a href="#cb152-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-194"><a href="#cb152-194" aria-hidden="true" tabindex="-1"></a>Ovaj pristup koristi činjenicu da is.na() vraća logičku vrijednost (<span class="in">`TRUE`</span> ili <span class="in">`FALSE`</span>), a <span class="in">`sum()`</span> tretira <span class="in">`TRUE`</span> kao 1 i <span class="in">`FALSE`</span> kao 0, što rezultira brojem nedostajućih vrijednosti. U kontekstu <span class="in">`pokemon_dataset`</span> podatkovnog okvira, analiza nedostajućih vrijednosti može otkriti probleme s kvalitetom podataka ili sistematske razlike između generacija u dostupnosti određenih informacija o Pokémonima.</span>
<span id="cb152-195"><a href="#cb152-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-196"><a href="#cb152-196" aria-hidden="true" tabindex="-1"></a><span class="fu">## Brojčane transformacije</span></span>
<span id="cb152-197"><a href="#cb152-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-198"><a href="#cb152-198" aria-hidden="true" tabindex="-1"></a>Funkcije transformacije dobro funkcioniraju s <span class="in">`mutate()`</span> jer njihov rezultat ima istu duljinu kao ulazni podaci. Velika većina funkcija transformacije već je ugrađena u osnovni R. Nepraktično je navesti sve takve funkcije, stoga će ovo poglavlje prikazati najkorisnije od njih. Kao primjer, iako R pruža sve trigonometrijske funkcije koje biste mogli zamisliti, one ovdje nisu navedene jer se rijetko koriste u analizi podataka.</span>
<span id="cb152-199"><a href="#cb152-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-200"><a href="#cb152-200" aria-hidden="true" tabindex="-1"></a>**Aritmetika i pravila recikliranja**</span>
<span id="cb152-201"><a href="#cb152-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-202"><a href="#cb152-202" aria-hidden="true" tabindex="-1"></a>Osnove aritmetike (<span class="in">`+`</span>, <span class="in">`-`</span>, <span class="in">`*`</span>, <span class="in">`/`</span>, <span class="in">`^`</span>) često se koriste pri radu s podacima. Ove funkcije ne zahtijevaju opsežno objašnjenje jer izvršavaju operacije koje su poznate iz osnovne matematike. Međutim, potrebno je kratko razmotriti pravila recikliranja koja određuju što se događa kada lijeva i desna strana operacije imaju različite duljine. Ovo je važno za operacije poput <span class="in">`pokemon_dataset |&gt; mutate(attack_per_gen = attack / generation)`</span> jer postoji 800 brojeva na lijevoj strani operatora <span class="in">`/`</span>, ali samo šest različitih vrijednosti generacija na desnoj strani.</span>
<span id="cb152-203"><a href="#cb152-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-204"><a href="#cb152-204" aria-hidden="true" tabindex="-1"></a>R rješava neusklađene duljine vektora pomoću recikliranja, odnosno ponavljanja kraćeg vektora. Ovu operaciju možemo lakše vidjeti ako stvorimo vektore izvan podatkovnog okvira:</span>
<span id="cb152-205"><a href="#cb152-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-206"><a href="#cb152-206" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-209"><a href="#cb152-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-210"><a href="#cb152-210" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb152-211"><a href="#cb152-211" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb152-212"><a href="#cb152-212" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> y</span>
<span id="cb152-213"><a href="#cb152-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-214"><a href="#cb152-214" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-215"><a href="#cb152-215" aria-hidden="true" tabindex="-1"></a>Općenito, poželjno je reciklirati samo pojedinačne brojeve (odnosno vektore duljine 1), ali R će reciklirati bilo koji kraći vektor. Obično (ali ne uvijek) R daje upozorenje ako duži vektor nije višekratnik kraćeg vektora:</span>
<span id="cb152-216"><a href="#cb152-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-217"><a href="#cb152-217" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-220"><a href="#cb152-220" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-221"><a href="#cb152-221" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb152-222"><a href="#cb152-222" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb152-223"><a href="#cb152-223" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> y</span>
<span id="cb152-224"><a href="#cb152-224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-225"><a href="#cb152-225" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-226"><a href="#cb152-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-227"><a href="#cb152-227" aria-hidden="true" tabindex="-1"></a>Ova pravila recikliranja primjenjuju se i na logičke usporedbe (<span class="in">`==`</span>, <span class="in">`&lt;`</span>, <span class="in">`&lt;=`</span>, <span class="in">`&gt;`</span>, <span class="in">`&gt;=`</span>, <span class="in">`!=`</span>) i mogu dovesti do iznenađujućih rezultata ako slučajno koristite <span class="in">`==`</span> umjesto <span class="in">`%in%`</span> i podatkovni okvir ima nepovoljan broj redaka. Na primjer, uzmimo ovaj kod koji pokušava pronaći sve Pokémone iz prve i druge generacije:</span>
<span id="cb152-228"><a href="#cb152-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-229"><a href="#cb152-229" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-232"><a href="#cb152-232" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-233"><a href="#cb152-233" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(generation <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb152-234"><a href="#cb152-234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-235"><a href="#cb152-235" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-236"><a href="#cb152-236" aria-hidden="true" tabindex="-1"></a>Kod se izvršava bez greške, ali ne vraća ono što želimo. Zbog pravila recikliranja, ovaj kod pronalazi Pokémone u redovima s neparnim brojevima koji su iz generacije 1 i Pokémone u redovima s parnim brojevima koji su iz generacije 2. Nažalost, nema upozorenja jer pokemon_dataset ima paran broj redaka.</span>
<span id="cb152-237"><a href="#cb152-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-238"><a href="#cb152-238" aria-hidden="true" tabindex="-1"></a>Da bi se zaštitili od ovakvog tihog neuspjeha, većina <span class="in">`tidyverse`</span> funkcija koristi strožu formu recikliranja koja reciklira samo pojedinačne vrijednosti. Nažalost, to ne pomaže u ovom slučaju, niti u mnogim drugim, jer se ključni izračun provodi osnovnom R funkcijom <span class="in">`==`</span>, a ne <span class="in">`filter()`</span>. Ispravno rješenje za ovaj problem je korištenje operatora <span class="in">`%in%`</span>:</span>
<span id="cb152-239"><a href="#cb152-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-240"><a href="#cb152-240" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-243"><a href="#cb152-243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-244"><a href="#cb152-244" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(generation <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb152-245"><a href="#cb152-245" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-246"><a href="#cb152-246" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-247"><a href="#cb152-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-248"><a href="#cb152-248" aria-hidden="true" tabindex="-1"></a>**Minimum i maksimum**</span>
<span id="cb152-249"><a href="#cb152-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-250"><a href="#cb152-250" aria-hidden="true" tabindex="-1"></a>Aritmetičke funkcije rade s parovima varijabli. Dvije usko povezane funkcije su <span class="in">`pmin()`</span> i <span class="in">`pmax()`</span> koje, kada im se daju dvije ili više varijabli, vraćaju najmanju ili najveću vrijednost u svakom retku:</span>
<span id="cb152-251"><a href="#cb152-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-252"><a href="#cb152-252" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-255"><a href="#cb152-255" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-256"><a href="#cb152-256" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-257"><a href="#cb152-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-258"><a href="#cb152-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_stat =</span> <span class="fu">pmin</span>(attack, defense),</span>
<span id="cb152-259"><a href="#cb152-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">higher_stat =</span> <span class="fu">pmax</span>(attack, defense)</span>
<span id="cb152-260"><a href="#cb152-260" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-261"><a href="#cb152-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, defense, lower_stat, higher_stat)</span>
<span id="cb152-262"><a href="#cb152-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-263"><a href="#cb152-263" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-264"><a href="#cb152-264" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje kako možemo usporediti napad i obranu svakog Pokémona i identificirati koja je statistika niža, a koja viša.</span>
<span id="cb152-265"><a href="#cb152-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-266"><a href="#cb152-266" aria-hidden="true" tabindex="-1"></a>Važno je razlikovati ove funkcije od funkcija sažimanja <span class="in">`min()`</span> i <span class="in">`max()`</span> koje uzimaju više opservacija i vraćaju jednu vrijednost. Možete prepoznati da ste koristili pogrešnu formu kada su svi minimumi i svi maksimumi iste vrijednosti:</span>
<span id="cb152-267"><a href="#cb152-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-268"><a href="#cb152-268" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-271"><a href="#cb152-271" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-272"><a href="#cb152-272" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-273"><a href="#cb152-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-274"><a href="#cb152-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower_stat =</span> <span class="fu">min</span>(attack, defense),</span>
<span id="cb152-275"><a href="#cb152-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">higher_stat =</span> <span class="fu">max</span>(attack, defense)</span>
<span id="cb152-276"><a href="#cb152-276" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-277"><a href="#cb152-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, defense, lower_stat, higher_stat)</span>
<span id="cb152-278"><a href="#cb152-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-279"><a href="#cb152-279" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-280"><a href="#cb152-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-281"><a href="#cb152-281" aria-hidden="true" tabindex="-1"></a>U ovom slučaju, <span class="in">`min()`</span> i <span class="in">`max()`</span> vraćaju globalni minimum i maksimum svih vrijednosti napada i obrane u cijelom podatkovnom skupu, što nije željeni rezultat.</span>
<span id="cb152-282"><a href="#cb152-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-283"><a href="#cb152-283" aria-hidden="true" tabindex="-1"></a>**Modularna aritmetika**</span>
<span id="cb152-284"><a href="#cb152-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-285"><a href="#cb152-285" aria-hidden="true" tabindex="-1"></a>Modularna aritmetika je tehnički naziv za vrstu matematike koju ste radili prije nego što ste naučili o decimalnim brojevima, odnosno dijeljenje koje daje cijeli broj i ostatak. U R-u, <span class="in">`%/%`</span> izvodi cjelobrojno dijeljenje, a <span class="in">`%%`</span> izračunava ostatak:</span>
<span id="cb152-286"><a href="#cb152-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-287"><a href="#cb152-287" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-290"><a href="#cb152-290" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-291"><a href="#cb152-291" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="sc">%/%</span> <span class="dv">5</span></span>
<span id="cb152-292"><a href="#cb152-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-293"><a href="#cb152-293" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="sc">%%</span> <span class="dv">5</span></span>
<span id="cb152-294"><a href="#cb152-294" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-295"><a href="#cb152-295" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-296"><a href="#cb152-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-297"><a href="#cb152-297" aria-hidden="true" tabindex="-1"></a>Modularna aritmetika je korisna u pokemon_dataset podatkovnom okviru jer je možemo koristiti za kategorizaciju Pokémona. Na primjer, možemo grupirati Pokémone prema tome da li je njihov broj djeljiv s 10, što bi moglo otkriti obrazac u dizajnu:</span>
<span id="cb152-298"><a href="#cb152-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-299"><a href="#cb152-299" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-302"><a href="#cb152-302" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-303"><a href="#cb152-303" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-304"><a href="#cb152-304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-305"><a href="#cb152-305" aria-hidden="true" tabindex="-1"></a>    <span class="at">divisible_by_10 =</span> id <span class="sc">%%</span> <span class="dv">10</span> <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb152-306"><a href="#cb152-306" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-307"><a href="#cb152-307" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(divisible_by_10)</span>
<span id="cb152-308"><a href="#cb152-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-309"><a href="#cb152-309" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-310"><a href="#cb152-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-311"><a href="#cb152-311" aria-hidden="true" tabindex="-1"></a>Možemo kombinirati modularnu aritmetiku s <span class="in">`mean(is.na(x))`</span> trikom za analizu proporcija. Na primjer, možemo vidjeti kako se proporcija legendarnih Pokémona mijenja kroz generacije:</span>
<span id="cb152-312"><a href="#cb152-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-313"><a href="#cb152-313" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-316"><a href="#cb152-316" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-317"><a href="#cb152-317" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-318"><a href="#cb152-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-319"><a href="#cb152-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-320"><a href="#cb152-320" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_legendary =</span> <span class="fu">mean</span>(legendary, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-321"><a href="#cb152-321" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-322"><a href="#cb152-322" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-323"><a href="#cb152-323" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-324"><a href="#cb152-324" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-325"><a href="#cb152-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-326"><a href="#cb152-326" aria-hidden="true" tabindex="-1"></a>Rezultati pokazuju da proporcija legendarnih Pokémona varira između generacija, s nešto većim udjelom u kasnijim generacijama.</span>
<span id="cb152-327"><a href="#cb152-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-328"><a href="#cb152-328" aria-hidden="true" tabindex="-1"></a>**Logaritmi**</span>
<span id="cb152-329"><a href="#cb152-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-330"><a href="#cb152-330" aria-hidden="true" tabindex="-1"></a>Logaritmi su izuzetno korisna transformacija za rad s podacima koji se protežu kroz više redova veličine i za pretvaranje eksponencijalnog rasta u linearni rast. U R-u možete odabrati između tri logaritma: <span class="in">`log()`</span> (prirodni logaritam, baza e), <span class="in">`log2()`</span> (baza 2) i <span class="in">`log10()`</span> (baza 10). Preporučuje se korištenje <span class="in">`log2()`</span> ili <span class="in">`log10()`</span>. Funkcija <span class="in">`log2()`</span> je laka za interpretaciju jer razlika od 1 na logaritamskoj skali odgovara udvostručenju na originalnoj skali, a razlika od -1 odgovara prepolovljenju. Funkcija <span class="in">`log10()`</span> je laka za povratnu transformaciju jer je, na primjer, 3 jednako <span class="in">`10^3 = 1000`</span>. Inverzna funkcija za <span class="in">`log()`</span> je <span class="in">`exp()`</span>, a za izračun inverzne funkcije za <span class="in">`log2()`</span> ili <span class="in">`log10()`</span> potrebno je koristiti <span class="in">`2^`</span> ili <span class="in">`10^`</span>.</span>
<span id="cb152-331"><a href="#cb152-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-332"><a href="#cb152-332" aria-hidden="true" tabindex="-1"></a>U kontekstu pokemon_dataset podatkovnog okvira, logaritamska transformacija može biti korisna za analizu statistika koje imaju širok raspon vrijednosti:</span>
<span id="cb152-333"><a href="#cb152-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-334"><a href="#cb152-334" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-337"><a href="#cb152-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-338"><a href="#cb152-338" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-339"><a href="#cb152-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-340"><a href="#cb152-340" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_hp =</span> <span class="fu">log10</span>(HP),</span>
<span id="cb152-341"><a href="#cb152-341" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_attack =</span> <span class="fu">log10</span>(attack)</span>
<span id="cb152-342"><a href="#cb152-342" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-343"><a href="#cb152-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, HP, log_hp, attack, log_attack)</span>
<span id="cb152-344"><a href="#cb152-344" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-345"><a href="#cb152-345" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-346"><a href="#cb152-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-347"><a href="#cb152-347" aria-hidden="true" tabindex="-1"></a>Ova transformacija može pomoći u vizualizaciji podataka kada postoje ekstremne vrijednosti ili kada želimo usporediti relativne, a ne apsolutne razlike između Pokémona.</span>
<span id="cb152-348"><a href="#cb152-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-349"><a href="#cb152-349" aria-hidden="true" tabindex="-1"></a>**Zaokruživanje**</span>
<span id="cb152-350"><a href="#cb152-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-351"><a href="#cb152-351" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`round()`</span> zaokružuje broj na najbliži cijeli broj:</span>
<span id="cb152-352"><a href="#cb152-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-353"><a href="#cb152-353" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-356"><a href="#cb152-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-357"><a href="#cb152-357" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">123.456</span>)</span>
<span id="cb152-358"><a href="#cb152-358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-359"><a href="#cb152-359" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-360"><a href="#cb152-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-361"><a href="#cb152-361" aria-hidden="true" tabindex="-1"></a>Preciznost zaokruživanja možete kontrolirati pomoću drugog argumenta digits. Funkcija <span class="in">`round(x, digits)`</span> zaokružuje na najbliži <span class="in">`10^-n`</span>, tako da <span class="in">`digits = 2`</span> zaokružuje na najbliže 0.01. Ova definicija je korisna jer implicira da će <span class="in">`round(x, -3)`</span> zaokružiti na najbližu tisuću:</span>
<span id="cb152-362"><a href="#cb152-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-363"><a href="#cb152-363" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-366"><a href="#cb152-366" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-367"><a href="#cb152-367" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">123.456</span>, <span class="dv">2</span>)</span>
<span id="cb152-368"><a href="#cb152-368" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">123.456</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb152-369"><a href="#cb152-369" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-370"><a href="#cb152-370" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-371"><a href="#cb152-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-372"><a href="#cb152-372" aria-hidden="true" tabindex="-1"></a>Postoji jedna neobičnost kod <span class="in">`round()`</span> koja na prvi pogled izgleda iznenađujuće: ova funkcija koristi ono što je poznato kao "zaokruživanje polovice na parno" ili bankovno zaokruživanje. Ako je broj točno na sredini između dva cijela broja, zaokružit će se na parni broj. Ovo je dobra strategija jer održava zaokruživanje nepristranim: polovica svih 0.5 vrijednosti zaokružuje se prema gore, a polovica prema dolje:</span>
<span id="cb152-373"><a href="#cb152-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-374"><a href="#cb152-374" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-377"><a href="#cb152-377" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-378"><a href="#cb152-378" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">2.5</span>, <span class="fl">3.5</span>, <span class="fl">4.5</span>))</span>
<span id="cb152-379"><a href="#cb152-379" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-380"><a href="#cb152-380" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-381"><a href="#cb152-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-382"><a href="#cb152-382" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`round()`</span> uparena je s <span class="in">`floor()`</span> koja uvijek zaokružuje prema dolje i <span class="in">`ceiling()`</span> koja uvijek zaokružuje prema gore:</span>
<span id="cb152-383"><a href="#cb152-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-384"><a href="#cb152-384" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-387"><a href="#cb152-387" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-388"><a href="#cb152-388" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(<span class="fl">123.456</span>)</span>
<span id="cb152-389"><a href="#cb152-389" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling</span>(<span class="fl">123.456</span>)</span>
<span id="cb152-390"><a href="#cb152-390" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-391"><a href="#cb152-391" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-392"><a href="#cb152-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-393"><a href="#cb152-393" aria-hidden="true" tabindex="-1"></a>Ove funkcije nemaju argument <span class="in">`digits`</span>, stoga možete umjesto toga skalirati prema dolje, zaokružiti, a zatim skalirati natrag:</span>
<span id="cb152-394"><a href="#cb152-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-395"><a href="#cb152-395" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-398"><a href="#cb152-398" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-399"><a href="#cb152-399" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb152-400"><a href="#cb152-400" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(x <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb152-401"><a href="#cb152-401" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-402"><a href="#cb152-402" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-403"><a href="#cb152-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-404"><a href="#cb152-404" aria-hidden="true" tabindex="-1"></a>Istu tehniku možete koristiti ako želite zaokružiti na višekratnik nekog drugog broja:</span>
<span id="cb152-405"><a href="#cb152-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-406"><a href="#cb152-406" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-409"><a href="#cb152-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-410"><a href="#cb152-410" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x <span class="sc">/</span> <span class="dv">5</span>) <span class="sc">*</span> <span class="dv">5</span></span>
<span id="cb152-411"><a href="#cb152-411" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-412"><a href="#cb152-412" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-413"><a href="#cb152-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-414"><a href="#cb152-414" aria-hidden="true" tabindex="-1"></a>U kontekstu <span class="in">`pokemon_dataset`</span> podatkovnog okvira, zaokruživanje može biti korisno za kategorizaciju statistika:</span>
<span id="cb152-415"><a href="#cb152-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-416"><a href="#cb152-416" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-419"><a href="#cb152-419" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-420"><a href="#cb152-420" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-421"><a href="#cb152-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-422"><a href="#cb152-422" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_rounded =</span> <span class="fu">round</span>(HP, <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb152-423"><a href="#cb152-423" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed_category =</span> <span class="fu">round</span>(speed <span class="sc">/</span> <span class="dv">25</span>) <span class="sc">*</span> <span class="dv">25</span></span>
<span id="cb152-424"><a href="#cb152-424" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-425"><a href="#cb152-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, HP, hp_rounded, speed, speed_category)</span>
<span id="cb152-426"><a href="#cb152-426" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-427"><a href="#cb152-427" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-428"><a href="#cb152-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-429"><a href="#cb152-429" aria-hidden="true" tabindex="-1"></a>**Rezanje brojeva u raspone**</span>
<span id="cb152-430"><a href="#cb152-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-431"><a href="#cb152-431" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`cut()`</span> koristi se za razbijanje (odnosno biniranje) numeričkog vektora u diskretne kategorije:</span>
<span id="cb152-432"><a href="#cb152-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-433"><a href="#cb152-433" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-436"><a href="#cb152-436" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-437"><a href="#cb152-437" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>)</span>
<span id="cb152-438"><a href="#cb152-438" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>))</span>
<span id="cb152-439"><a href="#cb152-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-440"><a href="#cb152-440" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-441"><a href="#cb152-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-442"><a href="#cb152-442" aria-hidden="true" tabindex="-1"></a>Granice ne moraju biti jednako raspoređene:</span>
<span id="cb152-443"><a href="#cb152-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-444"><a href="#cb152-444" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-447"><a href="#cb152-447" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-448"><a href="#cb152-448" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">15</span>, <span class="dv">20</span>))</span>
<span id="cb152-449"><a href="#cb152-449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-450"><a href="#cb152-450" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-451"><a href="#cb152-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-452"><a href="#cb152-452" aria-hidden="true" tabindex="-1"></a>Možete opcionalno definirati vlastite oznake (<span class="in">`labels`</span>). Imajte na umu da bi trebalo biti za jednu oznaku manje nego što ima granica:</span>
<span id="cb152-453"><a href="#cb152-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-454"><a href="#cb152-454" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-457"><a href="#cb152-457" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-458"><a href="#cb152-458" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"very low"</span>, <span class="st">"low"</span>, <span class="st">"medium"</span>, <span class="st">"high"</span>))</span>
<span id="cb152-459"><a href="#cb152-459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-460"><a href="#cb152-460" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-461"><a href="#cb152-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-462"><a href="#cb152-462" aria-hidden="true" tabindex="-1"></a>Bilo koje vrijednosti izvan raspona granica postat će <span class="in">`NA`</span>:</span>
<span id="cb152-463"><a href="#cb152-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-464"><a href="#cb152-464" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-467"><a href="#cb152-467" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-468"><a href="#cb152-468" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>))</span>
<span id="cb152-469"><a href="#cb152-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-470"><a href="#cb152-470" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-471"><a href="#cb152-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-472"><a href="#cb152-472" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru, <span class="in">`cut()`</span> možemo koristiti za kategorizaciju Pokémona prema njihovim statistikama:</span>
<span id="cb152-473"><a href="#cb152-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-474"><a href="#cb152-474" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-477"><a href="#cb152-477" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-478"><a href="#cb152-478" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-479"><a href="#cb152-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">attack_category =</span> <span class="fu">cut</span>(attack, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">150</span>, <span class="dv">200</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"weak"</span>, <span class="st">"average"</span>, <span class="st">"strong"</span>, <span class="st">"very strong"</span>))</span>
<span id="cb152-480"><a href="#cb152-480" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-481"><a href="#cb152-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, attack_category) <span class="sc">|&gt;</span></span>
<span id="cb152-482"><a href="#cb152-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(attack_category)</span>
<span id="cb152-483"><a href="#cb152-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-484"><a href="#cb152-484" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-485"><a href="#cb152-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-486"><a href="#cb152-486" aria-hidden="true" tabindex="-1"></a>Ova analiza pokazuje da većina Pokémona ima prosječnu snagu napada (između 50 i 100), dok je samo manji broj izuzetno snažan.</span>
<span id="cb152-487"><a href="#cb152-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-488"><a href="#cb152-488" aria-hidden="true" tabindex="-1"></a>**Kumulativni i pomični agregati**</span>
<span id="cb152-489"><a href="#cb152-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-490"><a href="#cb152-490" aria-hidden="true" tabindex="-1"></a>Osnovni R pruža <span class="in">`cumsum()`</span>, <span class="in">`cumprod()`</span>, <span class="in">`cummin()`</span> i <span class="in">`cummax()`</span> za tekuće ili kumulativne sume, produkte, minimume i maksimume. Paket dplyr pruža cummean() za kumulativne prosjeke. Kumulativne sume najčešće se koriste u praksi:</span>
<span id="cb152-491"><a href="#cb152-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-492"><a href="#cb152-492" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-495"><a href="#cb152-495" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-496"><a href="#cb152-496" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb152-497"><a href="#cb152-497" aria-hidden="true" tabindex="-1"></a><span class="fu">cumsum</span>(x)</span>
<span id="cb152-498"><a href="#cb152-498" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-499"><a href="#cb152-499" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-500"><a href="#cb152-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-501"><a href="#cb152-501" aria-hidden="true" tabindex="-1"></a>Ako trebate složenije pomične ili klizne agregate, pokušajte koristiti paket <span class="in">`slider`</span>.</span>
<span id="cb152-502"><a href="#cb152-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-503"><a href="#cb152-503" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo koristiti kumulativne funkcije za praćenje kako se ukupna snaga Pokémona akumulira kroz generacije:</span>
<span id="cb152-504"><a href="#cb152-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-505"><a href="#cb152-505" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-508"><a href="#cb152-508" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-509"><a href="#cb152-509" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-510"><a href="#cb152-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-511"><a href="#cb152-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-512"><a href="#cb152-512" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative_total =</span> <span class="fu">cumsum</span>(total),</span>
<span id="cb152-513"><a href="#cb152-513" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative_mean =</span> <span class="fu">cummean</span>(total)</span>
<span id="cb152-514"><a href="#cb152-514" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-515"><a href="#cb152-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, total, cumulative_total, cumulative_mean) <span class="sc">|&gt;</span></span>
<span id="cb152-516"><a href="#cb152-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">&lt;=</span> <span class="dv">10</span>)</span>
<span id="cb152-517"><a href="#cb152-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-518"><a href="#cb152-518" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-519"><a href="#cb152-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-520"><a href="#cb152-520" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje kako se ukupna snaga akumulira kroz prve Pokémone, a kumulativni prosjek pruža uvid u prosječnu snagu do određenog Pokémona u redoslijedu.</span>
<span id="cb152-521"><a href="#cb152-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-522"><a href="#cb152-522" aria-hidden="true" tabindex="-1"></a><span class="fu">## Opće transformacije</span></span>
<span id="cb152-523"><a href="#cb152-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-524"><a href="#cb152-524" aria-hidden="true" tabindex="-1"></a>Sljedeći odjeljci opisuju neke opće transformacije koje se često koriste s numeričkim vektorima, ali se mogu primijeniti i na sve druge vrste stupaca podatkovnog okvira.</span>
<span id="cb152-525"><a href="#cb152-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-526"><a href="#cb152-526" aria-hidden="true" tabindex="-1"></a>**Rangovi**</span>
<span id="cb152-527"><a href="#cb152-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-528"><a href="#cb152-528" aria-hidden="true" tabindex="-1"></a>Paket dplyr pruža niz funkcija rangiranja inspiriranih SQL-om, ali uvijek biste trebali započeti s <span class="in">`min_rank()`</span>. Ova funkcija koristi tipičnu metodu za rješavanje izjednačenih vrijednosti, na primjer 1., 2., 2., 4. mjesto:</span>
<span id="cb152-529"><a href="#cb152-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-530"><a href="#cb152-530" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-533"><a href="#cb152-533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-534"><a href="#cb152-534" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">NA</span>)</span>
<span id="cb152-535"><a href="#cb152-535" aria-hidden="true" tabindex="-1"></a><span class="fu">min_rank</span>(x)</span>
<span id="cb152-536"><a href="#cb152-536" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-537"><a href="#cb152-537" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-538"><a href="#cb152-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-539"><a href="#cb152-539" aria-hidden="true" tabindex="-1"></a>Važno je primijetiti da najmanje vrijednosti dobivaju najniže rangove. Koristite <span class="in">`desc(x)`</span> da biste najvećim vrijednostima dali najniže rangove:</span>
<span id="cb152-540"><a href="#cb152-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-541"><a href="#cb152-541" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-544"><a href="#cb152-544" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-545"><a href="#cb152-545" aria-hidden="true" tabindex="-1"></a><span class="fu">min_rank</span>(<span class="fu">desc</span>(x))</span>
<span id="cb152-546"><a href="#cb152-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-547"><a href="#cb152-547" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-548"><a href="#cb152-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-549"><a href="#cb152-549" aria-hidden="true" tabindex="-1"></a>U kontekstu pokemon_dataset podatkovnog okvira, možemo rangirati Pokémone prema njihovim različitim statistikama:</span>
<span id="cb152-550"><a href="#cb152-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-551"><a href="#cb152-551" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-554"><a href="#cb152-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-555"><a href="#cb152-555" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-556"><a href="#cb152-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-557"><a href="#cb152-557" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(attack)),</span>
<span id="cb152-558"><a href="#cb152-558" aria-hidden="true" tabindex="-1"></a>    <span class="at">defense_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(defense)),</span>
<span id="cb152-559"><a href="#cb152-559" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(speed))</span>
<span id="cb152-560"><a href="#cb152-560" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-561"><a href="#cb152-561" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, attack, attack_rank, defense, defense_rank, speed, speed_rank) <span class="sc">|&gt;</span></span>
<span id="cb152-562"><a href="#cb152-562" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(attack_rank) <span class="sc">|&gt;</span></span>
<span id="cb152-563"><a href="#cb152-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb152-564"><a href="#cb152-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-565"><a href="#cb152-565" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-566"><a href="#cb152-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-567"><a href="#cb152-567" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje Pokémone s najvišim rangovima napada, zajedno s njihovim rangovima obrane i brzine, što omogućuje usporedbu različitih dimenzija snage.</span>
<span id="cb152-568"><a href="#cb152-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-569"><a href="#cb152-569" aria-hidden="true" tabindex="-1"></a>Ako <span class="in">`min_rank()`</span> ne radi ono što vam treba, pogledajte varijante <span class="in">`row_number()`</span>, <span class="in">`dense_rank()`</span>, <span class="in">`percent_rank()`</span> i <span class="in">`cume_dist()`</span>. Pogledajte dokumentaciju za detalje:</span>
<span id="cb152-570"><a href="#cb152-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-571"><a href="#cb152-571" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-574"><a href="#cb152-574" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-575"><a href="#cb152-575" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> x)</span>
<span id="cb152-576"><a href="#cb152-576" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb152-577"><a href="#cb152-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-578"><a href="#cb152-578" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_number =</span> <span class="fu">row_number</span>(x),</span>
<span id="cb152-579"><a href="#cb152-579" aria-hidden="true" tabindex="-1"></a>    <span class="at">dense_rank =</span> <span class="fu">dense_rank</span>(x),</span>
<span id="cb152-580"><a href="#cb152-580" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_rank =</span> <span class="fu">percent_rank</span>(x),</span>
<span id="cb152-581"><a href="#cb152-581" aria-hidden="true" tabindex="-1"></a>    <span class="at">cume_dist =</span> <span class="fu">cume_dist</span>(x)</span>
<span id="cb152-582"><a href="#cb152-582" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-583"><a href="#cb152-583" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-584"><a href="#cb152-584" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-585"><a href="#cb152-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-586"><a href="#cb152-586" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo usporediti različite metode rangiranja:</span>
<span id="cb152-587"><a href="#cb152-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-588"><a href="#cb152-588" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-591"><a href="#cb152-591" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-592"><a href="#cb152-592" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-593"><a href="#cb152-593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, total) <span class="sc">|&gt;</span></span>
<span id="cb152-594"><a href="#cb152-594" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total)) <span class="sc">|&gt;</span></span>
<span id="cb152-595"><a href="#cb152-595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-596"><a href="#cb152-596" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_rank =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(total)),</span>
<span id="cb152-597"><a href="#cb152-597" aria-hidden="true" tabindex="-1"></a>    <span class="at">dense_rank =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(total)),</span>
<span id="cb152-598"><a href="#cb152-598" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_number =</span> <span class="fu">row_number</span>(<span class="fu">desc</span>(total)),</span>
<span id="cb152-599"><a href="#cb152-599" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_rank =</span> <span class="fu">percent_rank</span>(<span class="fu">desc</span>(total))</span>
<span id="cb152-600"><a href="#cb152-600" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-601"><a href="#cb152-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb152-602"><a href="#cb152-602" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-603"><a href="#cb152-603" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-604"><a href="#cb152-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-605"><a href="#cb152-605" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje razlike između <span class="in">`min_rank()`</span> (koji daje isti rang izjednačenim vrijednostima i preskače sljedeći rang), <span class="in">`dense_rank()`</span> (koji daje isti rang izjednačenim vrijednostima ali ne preskače rangove), <span class="in">`row_number()`</span> (koji daje jedinstvene rangove čak i za izjednačene vrijednosti), i <span class="in">`percent_rank()`</span> (koji daje proporciju vrijednosti koje su manje).</span>
<span id="cb152-606"><a href="#cb152-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-607"><a href="#cb152-607" aria-hidden="true" tabindex="-1"></a>Funkciju <span class="in">`row_number()`</span> također možete koristiti bez ikakvih argumenata kada je unutar <span class="in">`dplyr`</span> funkcije. U tom slučaju, dat će broj "trenutnog" retka. Kada se kombinira s <span class="in">`%%`</span> ili <span class="in">`%/%`</span>, ovo može biti koristan alat za dijeljenje podataka u grupe slične veličine:</span>
<span id="cb152-608"><a href="#cb152-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-609"><a href="#cb152-609" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-612"><a href="#cb152-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-613"><a href="#cb152-613" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb152-614"><a href="#cb152-614" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb152-615"><a href="#cb152-615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-616"><a href="#cb152-616" aria-hidden="true" tabindex="-1"></a>    <span class="at">row0 =</span> <span class="fu">row_number</span>() <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb152-617"><a href="#cb152-617" aria-hidden="true" tabindex="-1"></a>    <span class="at">three_groups =</span> row0 <span class="sc">%%</span> <span class="dv">3</span>,</span>
<span id="cb152-618"><a href="#cb152-618" aria-hidden="true" tabindex="-1"></a>    <span class="at">three_in_each_group =</span> row0 <span class="sc">%/%</span> <span class="dv">3</span></span>
<span id="cb152-619"><a href="#cb152-619" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-620"><a href="#cb152-620" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-621"><a href="#cb152-621" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-622"><a href="#cb152-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-623"><a href="#cb152-623" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo koristiti ovu tehniku za dijeljenje Pokémona u grupe:</span>
<span id="cb152-624"><a href="#cb152-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-625"><a href="#cb152-625" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-628"><a href="#cb152-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-629"><a href="#cb152-629" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-630"><a href="#cb152-630" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-631"><a href="#cb152-631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-632"><a href="#cb152-632" aria-hidden="true" tabindex="-1"></a>    <span class="at">row0 =</span> <span class="fu">row_number</span>() <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb152-633"><a href="#cb152-633" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_of_5 =</span> row0 <span class="sc">%%</span> <span class="dv">5</span>,</span>
<span id="cb152-634"><a href="#cb152-634" aria-hidden="true" tabindex="-1"></a>    <span class="at">batch =</span> row0 <span class="sc">%/%</span> <span class="dv">100</span></span>
<span id="cb152-635"><a href="#cb152-635" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-636"><a href="#cb152-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, row0, group_of_5, batch) <span class="sc">|&gt;</span></span>
<span id="cb152-637"><a href="#cb152-637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span>
<span id="cb152-638"><a href="#cb152-638" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-639"><a href="#cb152-639" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-640"><a href="#cb152-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-641"><a href="#cb152-641" aria-hidden="true" tabindex="-1"></a>Ova tehnika omogućuje stvaranje rotacijskih grupa ili grupa za procesiranje u serijama.</span>
<span id="cb152-642"><a href="#cb152-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-643"><a href="#cb152-643" aria-hidden="true" tabindex="-1"></a>**Pomaci**</span>
<span id="cb152-644"><a href="#cb152-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-645"><a href="#cb152-645" aria-hidden="true" tabindex="-1"></a>Funkcije <span class="in">`lag()`</span> i <span class="in">`lead()`</span> omogućuju vam da se referencirate na vrijednosti neposredno prije ili neposredno poslije "trenutne" vrijednosti. Vraćaju vektor iste duljine kao ulazni vektor, dopunjen s <span class="in">`NA`</span> vrijednostima na početku ili kraju:</span>
<span id="cb152-646"><a href="#cb152-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-647"><a href="#cb152-647" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-650"><a href="#cb152-650" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-651"><a href="#cb152-651" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">19</span>, <span class="dv">35</span>)</span>
<span id="cb152-652"><a href="#cb152-652" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(x)</span>
<span id="cb152-653"><a href="#cb152-653" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(x)</span>
<span id="cb152-654"><a href="#cb152-654" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-655"><a href="#cb152-655" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-656"><a href="#cb152-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-657"><a href="#cb152-657" aria-hidden="true" tabindex="-1"></a>Izrazi <span class="in">`x - lag(x)`</span> daju vam razliku između trenutne i prethodne vrijednosti:</span>
<span id="cb152-658"><a href="#cb152-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-659"><a href="#cb152-659" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-662"><a href="#cb152-662" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-663"><a href="#cb152-663" aria-hidden="true" tabindex="-1"></a>x <span class="sc">-</span> <span class="fu">lag</span>(x)</span>
<span id="cb152-664"><a href="#cb152-664" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-665"><a href="#cb152-665" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-666"><a href="#cb152-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-667"><a href="#cb152-667" aria-hidden="true" tabindex="-1"></a>Izraz <span class="in">`x == lag(x)`</span> govori vam kada se trenutna vrijednost mijenja:</span>
<span id="cb152-668"><a href="#cb152-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-669"><a href="#cb152-669" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-672"><a href="#cb152-672" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-673"><a href="#cb152-673" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="fu">lag</span>(x)</span>
<span id="cb152-674"><a href="#cb152-674" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-675"><a href="#cb152-675" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-676"><a href="#cb152-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-677"><a href="#cb152-677" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo koristiti ove funkcije za usporedbu uzastopnih Pokémona:</span>
<span id="cb152-678"><a href="#cb152-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-679"><a href="#cb152-679" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-682"><a href="#cb152-682" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-683"><a href="#cb152-683" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-684"><a href="#cb152-684" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-685"><a href="#cb152-685" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-686"><a href="#cb152-686" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_diff =</span> total <span class="sc">-</span> <span class="fu">lag</span>(total),</span>
<span id="cb152-687"><a href="#cb152-687" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_change =</span> total <span class="sc">!=</span> <span class="fu">lag</span>(total),</span>
<span id="cb152-688"><a href="#cb152-688" aria-hidden="true" tabindex="-1"></a>    <span class="at">next_total =</span> <span class="fu">lead</span>(total)</span>
<span id="cb152-689"><a href="#cb152-689" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-690"><a href="#cb152-690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, total, total_diff, total_change, next_total) <span class="sc">|&gt;</span></span>
<span id="cb152-691"><a href="#cb152-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb152-692"><a href="#cb152-692" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-693"><a href="#cb152-693" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-694"><a href="#cb152-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-695"><a href="#cb152-695" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje kako se ukupna snaga Pokémona mijenja od jednog do drugog, što može otkriti evolucijske skokove u snazi.</span>
<span id="cb152-696"><a href="#cb152-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-697"><a href="#cb152-697" aria-hidden="true" tabindex="-1"></a>Možete pomicati ili voditi za više od jedne pozicije koristeći drugi argument <span class="in">`n`</span>:</span>
<span id="cb152-698"><a href="#cb152-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-699"><a href="#cb152-699" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-702"><a href="#cb152-702" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-703"><a href="#cb152-703" aria-hidden="true" tabindex="-1"></a>x <span class="sc">-</span> <span class="fu">lag</span>(x, <span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb152-704"><a href="#cb152-704" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-705"><a href="#cb152-705" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-706"><a href="#cb152-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-707"><a href="#cb152-707" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo usporediti Pokémone s onima dva mjesta ranije:</span>
<span id="cb152-708"><a href="#cb152-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-709"><a href="#cb152-709" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-712"><a href="#cb152-712" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-713"><a href="#cb152-713" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-714"><a href="#cb152-714" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-715"><a href="#cb152-715" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_diff_2 =</span> total <span class="sc">-</span> <span class="fu">lag</span>(total, <span class="at">n =</span> <span class="dv">2</span>)) <span class="sc">|&gt;</span></span>
<span id="cb152-716"><a href="#cb152-716" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, total, total_diff_2) <span class="sc">|&gt;</span></span>
<span id="cb152-717"><a href="#cb152-717" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb152-718"><a href="#cb152-718" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-719"><a href="#cb152-719" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-720"><a href="#cb152-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-721"><a href="#cb152-721" aria-hidden="true" tabindex="-1"></a>**Uzastopni identifikatori**</span>
<span id="cb152-722"><a href="#cb152-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-723"><a href="#cb152-723" aria-hidden="true" tabindex="-1"></a>Ponekad želite započeti novu grupu svaki put kada se dogodi neki događaj. Na primjer, kada gledate podatke s web stranice, uobičajeno je da želite razbiti događaje u sesije, gdje započinjete novu sesiju nakon praznine od više od x minuta od posljednje aktivnosti. Na primjer, zamislite da imate vremena kada je netko posjetio web stranicu:</span>
<span id="cb152-724"><a href="#cb152-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-725"><a href="#cb152-725" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-728"><a href="#cb152-728" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-729"><a href="#cb152-729" aria-hidden="true" tabindex="-1"></a>events <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">time =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">30</span>))</span>
<span id="cb152-730"><a href="#cb152-730" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-731"><a href="#cb152-731" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-732"><a href="#cb152-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-733"><a href="#cb152-733" aria-hidden="true" tabindex="-1"></a>I izračunali ste vrijeme između svakog događaja i otkrili postoji li praznina dovoljno velika da kvalificira:</span>
<span id="cb152-734"><a href="#cb152-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-735"><a href="#cb152-735" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-738"><a href="#cb152-738" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-739"><a href="#cb152-739" aria-hidden="true" tabindex="-1"></a>events <span class="ot">&lt;-</span> events <span class="sc">|&gt;</span></span>
<span id="cb152-740"><a href="#cb152-740" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-741"><a href="#cb152-741" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff =</span> time <span class="sc">-</span> <span class="fu">lag</span>(time, <span class="at">default =</span> <span class="fu">first</span>(time)),</span>
<span id="cb152-742"><a href="#cb152-742" aria-hidden="true" tabindex="-1"></a>    <span class="at">has_gap =</span> diff <span class="sc">&gt;=</span> <span class="dv">5</span></span>
<span id="cb152-743"><a href="#cb152-743" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-744"><a href="#cb152-744" aria-hidden="true" tabindex="-1"></a>events</span>
<span id="cb152-745"><a href="#cb152-745" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-746"><a href="#cb152-746" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-747"><a href="#cb152-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-748"><a href="#cb152-748" aria-hidden="true" tabindex="-1"></a>Ali kako prijeći s tog logičkog vektora na nešto što možemo koristiti s <span class="in">`group_by()`</span>? Funkcija <span class="in">`cumsum()`</span> dolazi u pomoć jer svaki put kada praznina (odnosno has_gap) postaje <span class="in">`TRUE`</span>, grupa će se povećati za jedan:</span>
<span id="cb152-749"><a href="#cb152-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-750"><a href="#cb152-750" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-753"><a href="#cb152-753" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-754"><a href="#cb152-754" aria-hidden="true" tabindex="-1"></a>events <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb152-755"><a href="#cb152-755" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">cumsum</span>(has_gap)</span>
<span id="cb152-756"><a href="#cb152-756" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb152-757"><a href="#cb152-757" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-758"><a href="#cb152-758" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-759"><a href="#cb152-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-760"><a href="#cb152-760" aria-hidden="true" tabindex="-1"></a>Drugi pristup za stvaranje grupnih varijabli je <span class="in">`consecutive_id()`</span> koja započinje novu grupu svaki put kada se promijeni jedan od njezinih argumenata. Na primjer, inspiriran ovim Stack Overflow pitanjem, zamislite da imate podatkovni okvir s mnogo ponovljenih vrijednosti:</span>
<span id="cb152-761"><a href="#cb152-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-762"><a href="#cb152-762" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-765"><a href="#cb152-765" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-766"><a href="#cb152-766" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb152-767"><a href="#cb152-767" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>),</span>
<span id="cb152-768"><a href="#cb152-768" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">199</span>)</span>
<span id="cb152-769"><a href="#cb152-769" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb152-770"><a href="#cb152-770" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-771"><a href="#cb152-771" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-772"><a href="#cb152-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-773"><a href="#cb152-773" aria-hidden="true" tabindex="-1"></a>Ako želite zadržati prvi redak iz svakog ponovljenog x, možete koristiti <span class="in">`group_by()`</span>, <span class="in">`consecutive_id()`</span> i <span class="in">`slice_head()`</span>:</span>
<span id="cb152-774"><a href="#cb152-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-775"><a href="#cb152-775" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-778"><a href="#cb152-778" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-779"><a href="#cb152-779" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb152-780"><a href="#cb152-780" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">id =</span> <span class="fu">consecutive_id</span>(x)) <span class="sc">|&gt;</span> </span>
<span id="cb152-781"><a href="#cb152-781" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb152-782"><a href="#cb152-782" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-783"><a href="#cb152-783" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-784"><a href="#cb152-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-785"><a href="#cb152-785" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo koristiti consecutive_id() za identifikaciju skupina uzastopnih Pokémona iste vrste:</span>
<span id="cb152-786"><a href="#cb152-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-787"><a href="#cb152-787" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-790"><a href="#cb152-790" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-791"><a href="#cb152-791" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-792"><a href="#cb152-792" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-793"><a href="#cb152-793" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type_group =</span> <span class="fu">consecutive_id</span>(type_1)) <span class="sc">|&gt;</span></span>
<span id="cb152-794"><a href="#cb152-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, type_1, type_group) <span class="sc">|&gt;</span></span>
<span id="cb152-795"><a href="#cb152-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb152-796"><a href="#cb152-796" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-797"><a href="#cb152-797" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-798"><a href="#cb152-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-799"><a href="#cb152-799" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje kako <span class="in">`consecutive_id()`</span> stvara nove grupe svaki put kada se promijeni primarna vrsta Pokémona, što može biti korisno za analizu evolucijskih linija ili grupiranja sličnih Pokémona u Pokédexu.</span>
<span id="cb152-800"><a href="#cb152-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-801"><a href="#cb152-801" aria-hidden="true" tabindex="-1"></a>Možemo također analizirati kako se uzastopne grupe legendarnih i ne-legendarnih Pokémona mijenjaju:</span>
<span id="cb152-802"><a href="#cb152-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-803"><a href="#cb152-803" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-806"><a href="#cb152-806" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-807"><a href="#cb152-807" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-808"><a href="#cb152-808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-809"><a href="#cb152-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-810"><a href="#cb152-810" aria-hidden="true" tabindex="-1"></a>    <span class="at">legendary_group =</span> <span class="fu">consecutive_id</span>(legendary)</span>
<span id="cb152-811"><a href="#cb152-811" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-812"><a href="#cb152-812" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(legendary_group) <span class="sc">|&gt;</span></span>
<span id="cb152-813"><a href="#cb152-813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-814"><a href="#cb152-814" aria-hidden="true" tabindex="-1"></a>    <span class="at">legendary =</span> <span class="fu">first</span>(legendary),</span>
<span id="cb152-815"><a href="#cb152-815" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb152-816"><a href="#cb152-816" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_pokemon =</span> <span class="fu">first</span>(name),</span>
<span id="cb152-817"><a href="#cb152-817" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_pokemon =</span> <span class="fu">last</span>(name)</span>
<span id="cb152-818"><a href="#cb152-818" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-819"><a href="#cb152-819" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb152-820"><a href="#cb152-820" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-821"><a href="#cb152-821" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-822"><a href="#cb152-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-823"><a href="#cb152-823" aria-hidden="true" tabindex="-1"></a>Ovaj primjer otkriva obrazac distribucije legendarnih Pokémona kroz Pokédex, pokazujući da se obično pojavljuju u skupinama na kraju svake generacije.</span>
<span id="cb152-824"><a href="#cb152-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-825"><a href="#cb152-825" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sažimanje brojeva</span></span>
<span id="cb152-826"><a href="#cb152-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-827"><a href="#cb152-827" aria-hidden="true" tabindex="-1"></a>Samo korištenje brojanja, prosjeka i suma koje smo već uveli može vas odvesti daleko u analizi podataka, ali R pruža mnoge druge korisne funkcije sažimanja. Ovdje je izbor funkcija koje možda smatrate korisnima u radu s numeričkim podacima</span>
<span id="cb152-828"><a href="#cb152-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-829"><a href="#cb152-829" aria-hidden="true" tabindex="-1"></a>**Središte**</span>
<span id="cb152-830"><a href="#cb152-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-831"><a href="#cb152-831" aria-hidden="true" tabindex="-1"></a>Do sada smo većinom koristili <span class="in">`mean()`</span> za sažimanje središta vektora vrijednosti. Kao što smo vidjeli u ranijim poglavljima, budući da je prosjek suma podijeljena s brojem opservacija, osjetljiv je čak i na samo nekoliko neobično visokih ili niskih vrijednosti. Alternativa je korištenje <span class="in">`median()`</span> koja pronalazi vrijednost koja leži u "sredini" vektora, odnosno 50 % vrijednosti je iznad nje, a 50% je ispod nje. Ovisno o obliku distribucije varijable koja vas zanima, prosjek ili medijan mogu biti bolja mjera središta. Na primjer, za simetrične distribucije općenito prijavljujemo prosjek, dok za asimetrične distribucije obično prijavljujemo medijan.</span>
<span id="cb152-832"><a href="#cb152-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-833"><a href="#cb152-833" aria-hidden="true" tabindex="-1"></a>U kontekstu <span class="in">`pokemon_dataset`</span> podatkovnog okvira možemo usporediti prosjek i medijan za različite statistike:</span>
<span id="cb152-834"><a href="#cb152-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-835"><a href="#cb152-835" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-838"><a href="#cb152-838" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-839"><a href="#cb152-839" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-840"><a href="#cb152-840" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-841"><a href="#cb152-841" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_attack =</span> <span class="fu">mean</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-842"><a href="#cb152-842" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_attack =</span> <span class="fu">median</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-843"><a href="#cb152-843" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_defense =</span> <span class="fu">mean</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-844"><a href="#cb152-844" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_defense =</span> <span class="fu">median</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-845"><a href="#cb152-845" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_speed =</span> <span class="fu">mean</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-846"><a href="#cb152-846" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_speed =</span> <span class="fu">median</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb152-847"><a href="#cb152-847" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-848"><a href="#cb152-848" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-849"><a href="#cb152-849" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-850"><a href="#cb152-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-851"><a href="#cb152-851" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje da su prosjeci svih statistika nešto viši od medijana, što sugerira blagu pozitivnu asimetričnost u distribucijama - postoje neki Pokémoni s izuzetno visokim vrijednostima koji povlače prosjek prema gore.</span>
<span id="cb152-852"><a href="#cb152-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-853"><a href="#cb152-853" aria-hidden="true" tabindex="-1"></a>Možemo usporediti prosjek i medijan ukupne snage Pokémona po vrsti:</span>
<span id="cb152-854"><a href="#cb152-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-855"><a href="#cb152-855" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-858"><a href="#cb152-858" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-859"><a href="#cb152-859" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-860"><a href="#cb152-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-861"><a href="#cb152-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-862"><a href="#cb152-862" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-863"><a href="#cb152-863" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-864"><a href="#cb152-864" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-865"><a href="#cb152-865" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-866"><a href="#cb152-866" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total))</span>
<span id="cb152-867"><a href="#cb152-867" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-868"><a href="#cb152-868" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-869"><a href="#cb152-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-870"><a href="#cb152-870" aria-hidden="true" tabindex="-1"></a>Za većinu vrsta Pokémona, prosjek i medijan su relativno bliski, što ukazuje na relativno simetrične distribucije unutar svake vrste.</span>
<span id="cb152-871"><a href="#cb152-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-872"><a href="#cb152-872" aria-hidden="true" tabindex="-1"></a>Možda biste se također pitali o modalnoj vrijednosti, odnosno najčešćoj vrijednosti. Ovo je sažetak koji dobro funkcionira samo za vrlo jednostavne slučajeve, ali ne funkcionira dobro za mnoge stvarne skupove podataka. Ako su podaci diskretni, može postojati više najčešćih vrijednosti, a ako su podaci kontinuirani, možda ne postoji najčešća vrijednost jer je svaka vrijednost malo drugačija. Iz ovih razloga, modus se obično ne koristi od strane statističara i ne postoji funkcija za modus uključena u osnovni R.</span>
<span id="cb152-873"><a href="#cb152-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-874"><a href="#cb152-874" aria-hidden="true" tabindex="-1"></a>**Minimum, maksimum i kvantili**</span>
<span id="cb152-875"><a href="#cb152-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-876"><a href="#cb152-876" aria-hidden="true" tabindex="-1"></a>Što ako vas zanimaju pozicije različite od središta? Funkcije <span class="in">`min()`</span> i <span class="in">`max()`</span> dat će vam najveću i najmanju vrijednost. Još jedan moćan alat je <span class="in">`quantile()`</span>, koji je generalizacija medijana. Funkcija <span class="in">`quantile(x, 0.25)`</span> pronaći će vrijednost x koja je veća od 25 % vrijednosti, <span class="in">`quantile(x, 0.5)`</span> je ekvivalentna medijanu, a <span class="in">`quantile(x, 0.95)`</span> pronaći će vrijednost koja je veća od 95% vrijednosti.</span>
<span id="cb152-877"><a href="#cb152-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-878"><a href="#cb152-878" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo istražiti raspon i kvantile različitih statistika:</span>
<span id="cb152-879"><a href="#cb152-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-880"><a href="#cb152-880" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-883"><a href="#cb152-883" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-884"><a href="#cb152-884" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-885"><a href="#cb152-885" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-886"><a href="#cb152-886" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_attack =</span> <span class="fu">min</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-887"><a href="#cb152-887" aria-hidden="true" tabindex="-1"></a>    <span class="at">q25_attack =</span> <span class="fu">quantile</span>(attack, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-888"><a href="#cb152-888" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_attack =</span> <span class="fu">median</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-889"><a href="#cb152-889" aria-hidden="true" tabindex="-1"></a>    <span class="at">q75_attack =</span> <span class="fu">quantile</span>(attack, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-890"><a href="#cb152-890" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_attack =</span> <span class="fu">max</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb152-891"><a href="#cb152-891" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-892"><a href="#cb152-892" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-893"><a href="#cb152-893" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-894"><a href="#cb152-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-895"><a href="#cb152-895" aria-hidden="true" tabindex="-1"></a>Ovaj rezultat pokazuje da najslabiji Pokémon ima napad od samo 5, dok najjači ima 190. Medijalna vrijednost od 75 i kvartili pokazuju da je distribucija napada relativno ravnomjerno raspoređena.</span>
<span id="cb152-896"><a href="#cb152-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-897"><a href="#cb152-897" aria-hidden="true" tabindex="-1"></a>Možemo pogledati 95. percentil napada umjesto maksimuma, jer će ignorirati 5 % Pokémona s najjačim napadom koji mogu biti ekstremni:</span>
<span id="cb152-898"><a href="#cb152-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-899"><a href="#cb152-899" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-902"><a href="#cb152-902" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-903"><a href="#cb152-903" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-904"><a href="#cb152-904" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-905"><a href="#cb152-905" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-906"><a href="#cb152-906" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_attack =</span> <span class="fu">max</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-907"><a href="#cb152-907" aria-hidden="true" tabindex="-1"></a>    <span class="at">q95_attack =</span> <span class="fu">quantile</span>(attack, <span class="fl">0.95</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-908"><a href="#cb152-908" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-909"><a href="#cb152-909" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-910"><a href="#cb152-910" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-911"><a href="#cb152-911" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-912"><a href="#cb152-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-913"><a href="#cb152-913" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje da, iako maksimalni napad raste kroz generacije (posebno u generaciji 6), 95. percentil je stabilniji i pruža bolji uvid u tipične vrijednosti napada.</span>
<span id="cb152-914"><a href="#cb152-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-915"><a href="#cb152-915" aria-hidden="true" tabindex="-1"></a>Možemo analizirati kvantile ukupne snage po vrsti kako bismo dobili potpuniju sliku distribucije:</span>
<span id="cb152-916"><a href="#cb152-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-917"><a href="#cb152-917" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-920"><a href="#cb152-920" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-921"><a href="#cb152-921" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-922"><a href="#cb152-922" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-923"><a href="#cb152-923" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-924"><a href="#cb152-924" aria-hidden="true" tabindex="-1"></a>    <span class="at">min =</span> <span class="fu">min</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-925"><a href="#cb152-925" aria-hidden="true" tabindex="-1"></a>    <span class="at">q25 =</span> <span class="fu">quantile</span>(total, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-926"><a href="#cb152-926" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(total, <span class="fl">0.5</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-927"><a href="#cb152-927" aria-hidden="true" tabindex="-1"></a>    <span class="at">q75 =</span> <span class="fu">quantile</span>(total, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-928"><a href="#cb152-928" aria-hidden="true" tabindex="-1"></a>    <span class="at">max =</span> <span class="fu">max</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-929"><a href="#cb152-929" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-930"><a href="#cb152-930" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-931"><a href="#cb152-931" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median))</span>
<span id="cb152-932"><a href="#cb152-932" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-933"><a href="#cb152-933" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-934"><a href="#cb152-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-935"><a href="#cb152-935" aria-hidden="true" tabindex="-1"></a>Ova analiza otkriva da zmajevi (dragon) imaju najviši medijalan ukupnu snagu, dok razlika između kvartila pokazuje koliko varijabilnosti postoji unutar svake vrste.</span>
<span id="cb152-936"><a href="#cb152-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-937"><a href="#cb152-937" aria-hidden="true" tabindex="-1"></a>**Raspršenost**</span>
<span id="cb152-938"><a href="#cb152-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-939"><a href="#cb152-939" aria-hidden="true" tabindex="-1"></a>Ponekad niste toliko zainteresirani za to gdje leži glavni dio podataka, već za to kako su podaci raspoređeni. Dva često korištena sažetka su standardna devijacija <span class="in">`sd(x)`</span> i interkvartilni raspon <span class="in">`IQR()`</span>. Nećemo ovdje objašnjavati <span class="in">`sd()`</span> jer je vjerojatno već poznata, ali <span class="in">`IQR()`</span> je <span class="in">`quantile(x, 0.75) - quantile(x, 0.25)`</span> i daje vam raspon koji sadrži srednjih 50 % podataka.</span>
<span id="cb152-940"><a href="#cb152-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-941"><a href="#cb152-941" aria-hidden="true" tabindex="-1"></a>U <span class="in">`pokemon_dataset`</span> podatkovnom okviru možemo koristiti ove mjere za analizu varijabilnosti:</span>
<span id="cb152-942"><a href="#cb152-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-943"><a href="#cb152-943" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-946"><a href="#cb152-946" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-947"><a href="#cb152-947" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-948"><a href="#cb152-948" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-949"><a href="#cb152-949" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_attack =</span> <span class="fu">sd</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-950"><a href="#cb152-950" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_attack =</span> <span class="fu">IQR</span>(attack, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-951"><a href="#cb152-951" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_defense =</span> <span class="fu">sd</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-952"><a href="#cb152-952" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_defense =</span> <span class="fu">IQR</span>(defense, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-953"><a href="#cb152-953" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_speed =</span> <span class="fu">sd</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-954"><a href="#cb152-954" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_speed =</span> <span class="fu">IQR</span>(speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb152-955"><a href="#cb152-955" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-956"><a href="#cb152-956" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-957"><a href="#cb152-957" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-958"><a href="#cb152-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-959"><a href="#cb152-959" aria-hidden="true" tabindex="-1"></a>Ovi rezultati pokazuju da napad ima najveću standardnu devijaciju i interkvartilni raspon, što znači da postoji najveća varijabilnost u napadnim statistikama među Pokémonima.</span>
<span id="cb152-960"><a href="#cb152-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-961"><a href="#cb152-961" aria-hidden="true" tabindex="-1"></a>Možemo usporediti raspršenost različitih vrsta Pokémona:</span>
<span id="cb152-962"><a href="#cb152-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-963"><a href="#cb152-963" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-966"><a href="#cb152-966" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-967"><a href="#cb152-967" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-968"><a href="#cb152-968" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-969"><a href="#cb152-969" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-970"><a href="#cb152-970" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_total =</span> <span class="fu">sd</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-971"><a href="#cb152-971" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr_total =</span> <span class="fu">IQR</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-972"><a href="#cb152-972" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-973"><a href="#cb152-973" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-974"><a href="#cb152-974" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(sd_total))</span>
<span id="cb152-975"><a href="#cb152-975" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-976"><a href="#cb152-976" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-977"><a href="#cb152-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-978"><a href="#cb152-978" aria-hidden="true" tabindex="-1"></a>Normalni tipovi Pokémona pokazuju najveću standardnu devijaciju, što sugerira da ova kategorija sadrži vrlo različite Pokémone - od vrlo slabih do vrlo jakih.</span>
<span id="cb152-979"><a href="#cb152-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-980"><a href="#cb152-980" aria-hidden="true" tabindex="-1"></a>Možemo koristiti <span class="in">`IQR()`</span> za otkrivanje neobičnosti u podacima. Na primjer, možemo istražiti postoji li varijabilnost u visini Pokémona iste vrste:</span>
<span id="cb152-981"><a href="#cb152-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-982"><a href="#cb152-982" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-985"><a href="#cb152-985" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-986"><a href="#cb152-986" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-987"><a href="#cb152-987" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-988"><a href="#cb152-988" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-989"><a href="#cb152-989" aria-hidden="true" tabindex="-1"></a>    <span class="at">HP_iqr =</span> <span class="fu">IQR</span>(HP, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-990"><a href="#cb152-990" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-991"><a href="#cb152-991" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-992"><a href="#cb152-992" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HP_iqr <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb152-993"><a href="#cb152-993" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(HP_iqr))</span>
<span id="cb152-994"><a href="#cb152-994" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-995"><a href="#cb152-995" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-996"><a href="#cb152-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-997"><a href="#cb152-997" aria-hidden="true" tabindex="-1"></a>Zmajevi pokazuju najveću varijabilnost u visini, što ima smisla jer ova kategorija uključuje i male zmajeve i ogromne legendarne zmajeve.</span>
<span id="cb152-998"><a href="#cb152-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-999"><a href="#cb152-999" aria-hidden="true" tabindex="-1"></a>**Distribucije**</span>
<span id="cb152-1000"><a href="#cb152-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1001"><a href="#cb152-1001" aria-hidden="true" tabindex="-1"></a>Važno je zapamtiti da su sve gore opisane statistike sažimanja način sažimanja distribucije na jedan broj. To znači da su fundamentalno reduktivne i ako odaberete pogrešan sažetak, lako možete propustiti važne razlike između grupa. Zbog toga je uvijek dobra ideja vizualizirati distribuciju prije nego što se posvetite vašim statistikama sažimanja.</span>
<span id="cb152-1002"><a href="#cb152-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1003"><a href="#cb152-1003" aria-hidden="true" tabindex="-1"></a>Možemo vizualizirati cjelokupnu distribuciju napada u pokemon_dataset podatkovnom okviru:</span>
<span id="cb152-1004"><a href="#cb152-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1005"><a href="#cb152-1005" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1008"><a href="#cb152-1008" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1009"><a href="#cb152-1009" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb152-1010"><a href="#cb152-1010" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> attack)) <span class="sc">+</span></span>
<span id="cb152-1011"><a href="#cb152-1011" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb152-1012"><a href="#cb152-1012" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribucija napada Pokémona"</span>, <span class="at">x =</span> <span class="st">"Napad"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>)</span>
<span id="cb152-1013"><a href="#cb152-1013" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1014"><a href="#cb152-1014" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1015"><a href="#cb152-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1016"><a href="#cb152-1016" aria-hidden="true" tabindex="-1"></a>Distribucija je asimetrična s dugim repom prema višim vrijednostima, što sugerira da je medijana vjerojatno bolji sažetak od prosjeka. Možemo detaljnije pogledati podatke zumiranjem na područje između 0 i 150:</span>
<span id="cb152-1017"><a href="#cb152-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1018"><a href="#cb152-1018" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1021"><a href="#cb152-1021" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1022"><a href="#cb152-1022" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb152-1023"><a href="#cb152-1023" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(attack <span class="sc">&lt;=</span> <span class="dv">150</span>) <span class="sc">|&gt;</span></span>
<span id="cb152-1024"><a href="#cb152-1024" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> attack)) <span class="sc">+</span></span>
<span id="cb152-1025"><a href="#cb152-1025" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb152-1026"><a href="#cb152-1026" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribucija napada Pokémona (do 150)"</span>, <span class="at">x =</span> <span class="st">"Napad"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>)</span>
<span id="cb152-1027"><a href="#cb152-1027" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1028"><a href="#cb152-1028" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1029"><a href="#cb152-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1030"><a href="#cb152-1030" aria-hidden="true" tabindex="-1"></a>Također je dobra ideja provjeriti da li distribucije za podgrupe nalikuju cjelini. U sljedećem grafu prikazujemo histograme ukupne snage za svaku generaciju:</span>
<span id="cb152-1031"><a href="#cb152-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1032"><a href="#cb152-1032" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1035"><a href="#cb152-1035" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1036"><a href="#cb152-1036" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb152-1037"><a href="#cb152-1037" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> total, <span class="at">fill =</span> <span class="fu">factor</span>(generation))) <span class="sc">+</span></span>
<span id="cb152-1038"><a href="#cb152-1038" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb152-1039"><a href="#cb152-1039" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> generation, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb152-1040"><a href="#cb152-1040" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribucija ukupne snage po generacijama"</span>, <span class="at">x =</span> <span class="st">"Ukupna snaga"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>, <span class="at">fill =</span> <span class="st">"Generacija"</span>)</span>
<span id="cb152-1041"><a href="#cb152-1041" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1042"><a href="#cb152-1042" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1043"><a href="#cb152-1043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1044"><a href="#cb152-1044" aria-hidden="true" tabindex="-1"></a>Distribucije izgledaju kao da slijede sličan obrazac kroz sve generacije, što sugerira da je u redu koristiti isti sažetak za svaku generaciju.</span>
<span id="cb152-1045"><a href="#cb152-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1046"><a href="#cb152-1046" aria-hidden="true" tabindex="-1"></a>Možemo također koristiti frekvencijske poligone za usporedbu distribucija između vrsta:</span>
<span id="cb152-1047"><a href="#cb152-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1048"><a href="#cb152-1048" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1051"><a href="#cb152-1051" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1052"><a href="#cb152-1052" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb152-1053"><a href="#cb152-1053" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type_1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"water"</span>, <span class="st">"fire"</span>, <span class="st">"grass"</span>, <span class="st">"electric"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb152-1054"><a href="#cb152-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> total, <span class="at">color =</span> type_1)) <span class="sc">+</span></span>
<span id="cb152-1055"><a href="#cb152-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb152-1056"><a href="#cb152-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Usporedba distribucija ukupne snage"</span>, <span class="at">x =</span> <span class="st">"Ukupna snaga"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>, <span class="at">color =</span> <span class="st">"Vrsta"</span>)</span>
<span id="cb152-1057"><a href="#cb152-1057" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1058"><a href="#cb152-1058" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1059"><a href="#cb152-1059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1060"><a href="#cb152-1060" aria-hidden="true" tabindex="-1"></a>Ne bojte se istraživati vlastite prilagođene sažetke specifično prilagođene podacima s kojima radite. U ovom slučaju, to može značiti odvojeno sažimanje legendarnih i ne-legendarnih Pokémona:</span>
<span id="cb152-1061"><a href="#cb152-1061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1062"><a href="#cb152-1062" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1065"><a href="#cb152-1065" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1066"><a href="#cb152-1066" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1067"><a href="#cb152-1067" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(legendary) <span class="sc">|&gt;</span></span>
<span id="cb152-1068"><a href="#cb152-1068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-1069"><a href="#cb152-1069" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-1070"><a href="#cb152-1070" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-1071"><a href="#cb152-1071" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_total =</span> <span class="fu">sd</span>(total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb152-1072"><a href="#cb152-1072" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-1073"><a href="#cb152-1073" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-1074"><a href="#cb152-1074" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1075"><a href="#cb152-1075" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1076"><a href="#cb152-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1077"><a href="#cb152-1077" aria-hidden="true" tabindex="-1"></a>Ovaj rezultat jasno pokazuje da legendarni Pokémoni imaju znatno veću prosječnu ukupnu snagu (638 naspram 417), ali manju varijabilnost (standardna devijacija od 60.3 naspram 101), što sugerira da su legendarni Pokémoni konzistentno snažni.</span>
<span id="cb152-1078"><a href="#cb152-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1079"><a href="#cb152-1079" aria-hidden="true" tabindex="-1"></a>Budući da su vrijednosti tako asimetrične, možete pokušati logaritamsku transformaciju za bolju analizu:</span>
<span id="cb152-1080"><a href="#cb152-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1081"><a href="#cb152-1081" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1084"><a href="#cb152-1084" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1085"><a href="#cb152-1085" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span> </span>
<span id="cb152-1086"><a href="#cb152-1086" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_total =</span> <span class="fu">log10</span>(total)) <span class="sc">|&gt;</span></span>
<span id="cb152-1087"><a href="#cb152-1087" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_total)) <span class="sc">+</span></span>
<span id="cb152-1088"><a href="#cb152-1088" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.1</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb152-1089"><a href="#cb152-1089" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Logaritamska transformacija ukupne snage"</span>, <span class="at">x =</span> <span class="st">"log10(Ukupna snaga)"</span>, <span class="at">y =</span> <span class="st">"Broj Pokémona"</span>)</span>
<span id="cb152-1090"><a href="#cb152-1090" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1091"><a href="#cb152-1091" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1092"><a href="#cb152-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1093"><a href="#cb152-1093" aria-hidden="true" tabindex="-1"></a>Na kraju, nemojte zaboraviti što ste naučili u ranijim poglavljima: kad god stvarate numeričke sažetke, dobra je ideja uključiti broj opservacija u svakoj grupi.</span>
<span id="cb152-1094"><a href="#cb152-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1095"><a href="#cb152-1095" aria-hidden="true" tabindex="-1"></a>**Pozicije**</span>
<span id="cb152-1096"><a href="#cb152-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1097"><a href="#cb152-1097" aria-hidden="true" tabindex="-1"></a>Postoji još jedna završna vrsta sažetka koja je korisna za numeričke vektore, ali također funkcionira sa svakom drugom vrstom vrijednosti: izvlačenje vrijednosti na specifičnoj poziciji pomoću funkcija <span class="in">`first(x)`</span>, <span class="in">`last(x)`</span> i <span class="in">`nth(x, n)`</span>.</span>
<span id="cb152-1098"><a href="#cb152-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1099"><a href="#cb152-1099" aria-hidden="true" tabindex="-1"></a>Na primjer, možemo pronaći prvog, petog i posljednjeg Pokémona za svaku generaciju:</span>
<span id="cb152-1100"><a href="#cb152-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1101"><a href="#cb152-1101" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1104"><a href="#cb152-1104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1105"><a href="#cb152-1105" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1106"><a href="#cb152-1106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-1107"><a href="#cb152-1107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-1108"><a href="#cb152-1108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-1109"><a href="#cb152-1109" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_pokemon =</span> <span class="fu">first</span>(name),</span>
<span id="cb152-1110"><a href="#cb152-1110" aria-hidden="true" tabindex="-1"></a>    <span class="at">fifth_pokemon =</span> <span class="fu">nth</span>(name, <span class="dv">5</span>),</span>
<span id="cb152-1111"><a href="#cb152-1111" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_pokemon =</span> <span class="fu">last</span>(name),</span>
<span id="cb152-1112"><a href="#cb152-1112" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-1113"><a href="#cb152-1113" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-1114"><a href="#cb152-1114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1115"><a href="#cb152-1115" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1116"><a href="#cb152-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1117"><a href="#cb152-1117" aria-hidden="true" tabindex="-1"></a>Budući da dplyr funkcije koriste <span class="in">`_`</span> za odvajanje komponenti naziva funkcija i argumenata, ove funkcije koriste <span class="in">`na_rm`</span> umjesto <span class="in">`na.rm`</span>. Ako izvlačite vrijednosti na pozicijama, možete pružiti zadanu vrijednost ako navedena pozicija ne postoji, argument <span class="in">`order_by`</span> omogućuje vam lokalno prepisivanje redoslijeda redaka, a argument <span class="in">`na_rm`</span> omogućuje vam ispuštanje nedostajućih vrijednosti.</span>
<span id="cb152-1118"><a href="#cb152-1118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1119"><a href="#cb152-1119" aria-hidden="true" tabindex="-1"></a>Možemo pronaći Pokémone s najjačim napadom u svakoj generaciji koristeći kombinaciju pozicija i rangiranja:</span>
<span id="cb152-1120"><a href="#cb152-1120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1121"><a href="#cb152-1121" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1124"><a href="#cb152-1124" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1125"><a href="#cb152-1125" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1126"><a href="#cb152-1126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-1127"><a href="#cb152-1127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(attack)) <span class="sc">|&gt;</span></span>
<span id="cb152-1128"><a href="#cb152-1128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb152-1129"><a href="#cb152-1129" aria-hidden="true" tabindex="-1"></a>    <span class="at">strongest_pokemon =</span> <span class="fu">first</span>(name),</span>
<span id="cb152-1130"><a href="#cb152-1130" aria-hidden="true" tabindex="-1"></a>    <span class="at">strongest_attack =</span> <span class="fu">first</span>(attack),</span>
<span id="cb152-1131"><a href="#cb152-1131" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb152-1132"><a href="#cb152-1132" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-1133"><a href="#cb152-1133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1134"><a href="#cb152-1134" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1135"><a href="#cb152-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1136"><a href="#cb152-1136" aria-hidden="true" tabindex="-1"></a>Ovaj primjer pokazuje kako se najjači Pokémoni mijenjaju kroz generacije, s mega evolucijom Mewtwoa u generaciji 6 koja drži apsolutni rekord napada.</span>
<span id="cb152-1137"><a href="#cb152-1137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1138"><a href="#cb152-1138" aria-hidden="true" tabindex="-1"></a>Izvlačenje vrijednosti na pozicijama komplementarno je filtriranju na rangovima. Filtriranje daje sve varijable, sa svakom opservacijom u odvojenom retku:</span>
<span id="cb152-1139"><a href="#cb152-1139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1140"><a href="#cb152-1140" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1143"><a href="#cb152-1143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1144"><a href="#cb152-1144" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1145"><a href="#cb152-1145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-1146"><a href="#cb152-1146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">r =</span> <span class="fu">min_rank</span>(<span class="fu">desc</span>(attack))) <span class="sc">|&gt;</span></span>
<span id="cb152-1147"><a href="#cb152-1147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(r <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fu">max</span>(r))) <span class="sc">|&gt;</span></span>
<span id="cb152-1148"><a href="#cb152-1148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, attack, r) <span class="sc">|&gt;</span></span>
<span id="cb152-1149"><a href="#cb152-1149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(generation, r)</span>
<span id="cb152-1150"><a href="#cb152-1150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1151"><a href="#cb152-1151" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1152"><a href="#cb152-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1153"><a href="#cb152-1153" aria-hidden="true" tabindex="-1"></a>Ovaj pristup omogućuje nam da vidimo i najjače i najslabije Pokémone u svakoj generaciji zajedno sa svim njihovim varijablama.</span>
<span id="cb152-1154"><a href="#cb152-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1155"><a href="#cb152-1155" aria-hidden="true" tabindex="-1"></a>**S glagolom `mutate()`**</span>
<span id="cb152-1156"><a href="#cb152-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1157"><a href="#cb152-1157" aria-hidden="true" tabindex="-1"></a>Kao što nazivi sugeriraju, funkcije sažimanja obično se koriste s <span class="in">`summarize()`</span>. Međutim, zbog pravila recikliranja o kojima smo raspravljali ranije, one se također mogu korisno kombinirati s <span class="in">`mutate()`</span>, osobito kada želite provesti neku vrstu grupne standardizacije.</span>
<span id="cb152-1158"><a href="#cb152-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1159"><a href="#cb152-1159" aria-hidden="true" tabindex="-1"></a>Izraz <span class="in">`x / sum(x)`</span> izračunava proporciju ukupnog iznosa:</span>
<span id="cb152-1160"><a href="#cb152-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1161"><a href="#cb152-1161" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1164"><a href="#cb152-1164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1165"><a href="#cb152-1165" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1166"><a href="#cb152-1166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-1167"><a href="#cb152-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-1168"><a href="#cb152-1168" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_of_total =</span> total <span class="sc">/</span> <span class="fu">sum</span>(total)</span>
<span id="cb152-1169"><a href="#cb152-1169" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-1170"><a href="#cb152-1170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, total, prop_of_total) <span class="sc">|&gt;</span></span>
<span id="cb152-1171"><a href="#cb152-1171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(generation, <span class="fu">desc</span>(prop_of_total)) <span class="sc">|&gt;</span></span>
<span id="cb152-1172"><a href="#cb152-1172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span>
<span id="cb152-1173"><a href="#cb152-1173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1174"><a href="#cb152-1174" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1175"><a href="#cb152-1175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1176"><a href="#cb152-1176" aria-hidden="true" tabindex="-1"></a>Izraz <span class="in">`(x - mean(x)) / sd(x)`</span> izračunava Z-score (standardiziran na prosjek 0 i standardnu devijaciju 1):</span>
<span id="cb152-1177"><a href="#cb152-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1178"><a href="#cb152-1178" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1181"><a href="#cb152-1181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1182"><a href="#cb152-1182" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1183"><a href="#cb152-1183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type_1) <span class="sc">|&gt;</span></span>
<span id="cb152-1184"><a href="#cb152-1184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb152-1185"><a href="#cb152-1185" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack_zscore =</span> (attack <span class="sc">-</span> <span class="fu">mean</span>(attack)) <span class="sc">/</span> <span class="fu">sd</span>(attack)</span>
<span id="cb152-1186"><a href="#cb152-1186" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb152-1187"><a href="#cb152-1187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(type_1, name, attack, attack_zscore) <span class="sc">|&gt;</span></span>
<span id="cb152-1188"><a href="#cb152-1188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(type_1, <span class="fu">desc</span>(attack_zscore)) <span class="sc">|&gt;</span></span>
<span id="cb152-1189"><a href="#cb152-1189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span>
<span id="cb152-1190"><a href="#cb152-1190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1191"><a href="#cb152-1191" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1192"><a href="#cb152-1192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1193"><a href="#cb152-1193" aria-hidden="true" tabindex="-1"></a>Izraz <span class="in">`(x - min(x)) / (max(x) - min(x))`</span> standardizira na raspon <span class="sc">\[</span>0, 1<span class="sc">\]</span>:</span>
<span id="cb152-1194"><a href="#cb152-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1195"><a href="#cb152-1195" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1198"><a href="#cb152-1198" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1199"><a href="#cb152-1199" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1200"><a href="#cb152-1200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-1201"><a href="#cb152-1201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">attack_scaled =</span> (attack <span class="sc">-</span> <span class="fu">min</span>(attack)) <span class="sc">/</span> (<span class="fu">max</span>(attack) <span class="sc">-</span> <span class="fu">min</span>(attack))) <span class="sc">|&gt;</span></span>
<span id="cb152-1202"><a href="#cb152-1202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, attack, attack_scaled) <span class="sc">|&gt;</span></span>
<span id="cb152-1203"><a href="#cb152-1203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(generation, <span class="fu">desc</span>(attack_scaled)) <span class="sc">|&gt;</span></span>
<span id="cb152-1204"><a href="#cb152-1204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span>
<span id="cb152-1205"><a href="#cb152-1205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1206"><a href="#cb152-1206" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1207"><a href="#cb152-1207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1208"><a href="#cb152-1208" aria-hidden="true" tabindex="-1"></a>Izraz <span class="in">`x / first(x)`</span> izračunava indeks temeljen na prvoj opservaciji:</span>
<span id="cb152-1209"><a href="#cb152-1209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1210"><a href="#cb152-1210" aria-hidden="true" tabindex="-1"></a>::: {.callout-note icon="false" collapse="true" title="Primjer"}</span>
<span id="cb152-1213"><a href="#cb152-1213" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb152-1214"><a href="#cb152-1214" aria-hidden="true" tabindex="-1"></a>pokemon_dataset <span class="sc">|&gt;</span></span>
<span id="cb152-1215"><a href="#cb152-1215" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb152-1216"><a href="#cb152-1216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(generation) <span class="sc">|&gt;</span></span>
<span id="cb152-1217"><a href="#cb152-1217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">attack_index =</span> attack <span class="sc">/</span> <span class="fu">first</span>(attack)) <span class="sc">|&gt;</span></span>
<span id="cb152-1218"><a href="#cb152-1218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(generation, name, attack, attack_index) <span class="sc">|&gt;</span></span>
<span id="cb152-1219"><a href="#cb152-1219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span>
<span id="cb152-1220"><a href="#cb152-1220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb152-1221"><a href="#cb152-1221" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb152-1222"><a href="#cb152-1222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1223"><a href="#cb152-1223" aria-hidden="true" tabindex="-1"></a>Ove tehnike omogućuju usporedbu Pokémona unutar njihovih grupa na relativnoj skali, što može biti korisnije od apsolutnih vrijednosti kada analizirate obrazce i odnose između različitih kategorija Pokémona.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>