<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="U ovom poglavlju objašnjava se pojam urednih podataka i njihova uloga u analitičkom procesu. Uredni podaci definirani su kao podaci kod kojih svaka varijabla čini jedan stupac, svako opažanje jedan redak, a svaka pojedina opservacija zasebnu ćeliju. Poglavlje prikazuje kako se sirovi i neuređeni podaci mogu sustavno preoblikovati u analitički prikladan format, čime se omogućuje učinkovitija analiza, modeliranje i interpretacija rezultata.">

<title>3&nbsp; Uređivanje podataka – Znanost o podacima u R-u</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./02_uvoz_podataka.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-86b712c1a9842e5c5be4cb0afbdd663e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background: #8B3A62;
      }
</style>
<link href="site_libs/htmltools-fill-0.5.9/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02_uvoz_podataka.html">Uvoz i uređivanje podataka</a></li><li class="breadcrumb-item"><a href="./03_uredivanje_podataka.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Uređivanje podataka</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02_uvoz_podataka.html">Uvoz i uređivanje podataka</a></li><li class="breadcrumb-item"><a href="./03_uredivanje_podataka.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Uređivanje podataka</span></a></li></ol></nav>
      <div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Uređivanje podataka</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          U ovom poglavlju objašnjava se pojam urednih podataka i njihova uloga u analitičkom procesu. Uredni podaci definirani su kao podaci kod kojih svaka varijabla čini jedan stupac, svako opažanje jedan redak, a svaka pojedina opservacija zasebnu ćeliju. Poglavlje prikazuje kako se sirovi i neuređeni podaci mogu sustavno preoblikovati u analitički prikladan format, čime se omogućuje učinkovitija analiza, modeliranje i interpretacija rezultata.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Znanost o podacima u R-u</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Uvod u znanost o podacima</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_uvod_u_znanost_o_podacima.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Uvod u znanost o podacima u R-u</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Uvoz i uređivanje podataka</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_uvoz_podataka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Uvoz podataka u R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_uredivanje_podataka.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Uređivanje podataka</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#format-podataka-u-r-u" id="toc-format-podataka-u-r-u" class="nav-link active" data-scroll-target="#format-podataka-u-r-u"><span class="header-section-number">3.1</span> Format podataka u R-u</a></li>
  <li><a href="#uređivanje-neurednih-podataka" id="toc-uređivanje-neurednih-podataka" class="nav-link" data-scroll-target="#uređivanje-neurednih-podataka"><span class="header-section-number">3.2</span> Uređivanje neurednih podataka</a>
  <ul class="collapse">
  <li><a href="#rješavanje-problema-neurednih-podataka" id="toc-rješavanje-problema-neurednih-podataka" class="nav-link" data-scroll-target="#rješavanje-problema-neurednih-podataka"><span class="header-section-number">3.2.1</span> Rješavanje problema neurednih podataka</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-important no-icon callout-titled" title="Podaci korišteni u poglavlju">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Podaci korišteni u poglavlju
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>U ovom će poglavlju biti demonstrirani principi uređivanja podataka koristeći <a href="https://www.imdb.com/chart/top/">IMDb ljestvice 250 najboljih filmova svih vremena</a> prikupljenih 07.09.2025. IMDb (<em>Internet Movie Database</em>) globalna je internetska baza podataka filmova, televizijskih serija i drugih audiovizualnih sadržaja koju pokreće Amazon. Ova platforma sadrži opsežne informacije o filmovima, uključujući osnovne podatke poput naziva, godine proizvodnje, žanra i trajanja kao i detaljnije informacije o glumcima, redateljima, ocjenama korisnika te različitim ljestvicama popularnosti. IMDb ljestvica 250 najboljih filmova temelji se na ocjenama milijuna korisnika diljem svijeta i predstavlja jedan od najpoznatijih popisa kvalitetnih filmova u kinematografiji.</p>
<p>Za potrebe objašnjavanja različitih segmenata uređivanja podataka koristit će se samo podatci o prvih deset filmova s navedenog popisa, a što omogućuje jasniji prikaz transformacijskih procesa bez nepotrebne složenosti velikih podatkovnih skupova. Navedeni podaci oblikovani su u različite formate podatkovnih okvira kako bi se na njima mogli demonstrirati različiti aspekti uređivanja podataka pomoću <code>tidyr</code> paketa. Kroz ove primjere bit će prikazano kako se neuredno organizirani podaci mogu transformirati u uredni format koji slijedi temeljna načela uređenih podataka.</p>
<p>U poglavlju je korišteno osam podatkovnih okvira koji prikazuju iste podatke, ali su podaci u podatkovnim okvirima formirani na različite načine:</p>
<ul>
<li><p><code>imdb_top_10_tidy_dataset</code> - uredni format podatkovnog okvira,</p></li>
<li><p><code>imdb_decades</code> - podatkovni okvir s podacima u nazivima varijabli i ćelijama,</p></li>
<li><p><code>imdb_top_10_long</code> - dugački podatkovni okvir s više redaka za isto opažanje,</p></li>
<li><p><code>realise_year_runtime_dataset</code> - podatkovni okvir s podacima u nazivima varijabli,</p></li>
<li><p><code>writers_dataset</code> - podatkovni okvir sa stupcima za pojedinog scenarista filma,</p></li>
<li><p><code>imdb_combined_variables</code> - podatkovni okvir s više vrijednosti u jednoj ćeliji,</p></li>
<li><p><code>director_names_dataset</code> - imena redatelja filmova odvojena u dva stupca.</p></li>
</ul>
<p>Podatkovni okviri sadrže do 12 mogućih varijabli koje opisuju ključne karakteristike svakog filma:</p>
<ul>
<li><p>“rank” - rang filma na IMDb top ljestvici (numerička vrijednost od 1 do 10),</p></li>
<li><p>“movie” - naslov filma (tekstualna varijabla),</p></li>
<li><p>“release_year” - godina premijere filma (numerička vrijednost),</p></li>
<li><p>“countries_of_origin” - zemlja ili zemlje podrijetla filma (tekstualna varijabla, može sadržavati više zemalja odvojenih zarezom),</p></li>
<li><p>“director” - ime i prezime redatelja filma (tekstualna varijabla),</p></li>
<li><p>“writers” - imena i prezimena scenarista (tekstualna varijabla, može sadržavati više imena odvojena zarezom),</p></li>
<li><p>“stars” - imena i prezimena glavnih glumaca (tekstualna varijabla s više imena odvojenih zarezom),</p></li>
<li><p>“genres” - žanr ili žanrovi filma (tekstualna varijabla, može sadržavati više žanrova odvojenih zarezom),</p></li>
<li><p>“language” - jezik ili jezici na kojima se govori u filmu (tekstualna varijabla, može sadržavati više jezika odvojena zarezom),</p></li>
<li><p>“runtime” - trajanje filma u minutama (numerička vrijednost),</p></li>
<li><p>“colour” - vrsta snimanja filma (tekstualna varijabla: “Color” za filmove u boji ili “Black &amp; White” za crno-bijele filmove),</p></li>
<li><p>“budget” - proračun filma u američkim dolarima (numerička vrijednost).</p></li>
</ul>
</div>
</div>
</div>
<p><strong>Uređivanje podataka</strong> (<em>data tidying</em>) predstavlja proces transformacije podataka iz oblika u kojem su inicijalno organizirani u konzistentan i standardiziran format koji olakšava analizu i vizualizaciju. Uređivanje podataka zapravo obuhvaća pohranjivanje podataka u konzistentnom obliku koji odgovara semantici skupa podataka s načinom na koji su pohranjeni. Ovaj je proces temeljni korak u cjelokupnom procesu analize podataka jer omogućuje lakši i efikasniji rad s podacima pomoću različitih analitičkih alata.</p>
<p>Uređivanje i transformacija podataka zajedno se kolokvijalno nazivaju <strong>hrvanje s podacima</strong> (<em>data wrangling</em>) jer se odnose na dovođenje podataka u oblik koji je prirodan za rad, a koji često nalikuje borbi s podacima. Ova metafora dobro opisuje izazove s kojima se analitičari susreću kada trebaju pripremiti sirove podatke za analizu. Većina stvarnih podataka nije uredna što znači da će većina analiza zahtijevati barem malo uređivanja.</p>
<p>Uređivanje podataka razlikuje se od općeg oblikovanja podataka (<em>data reshaping</em>) jer se fokusira na postizanje određenih standarda organizacije podataka. Glavni cilj uređivanja podataka pritom nije stvaranje vizualno privlačnih prikaza podataka, nego uspostavljanje strukture koja omogućuje efikasno korištenje analitičkih alata i funkcija.</p>
<p>U procesu bavljenja s podacima, uređivanje predstavlja ključnu kariku između uvoza podataka u R i njihove analize. Drugim riječima, nakon što se podaci uvezu, nužno je njihovo uređivanje jer uređeni podaci omogućuju fokusiranje napora na odgovaranje pitanja o podacima, a ne borbu s dovođenjem podataka u odgovarajući oblik za različite funkcije. Ovaj pristup značajno smanjuje mogućnost grešaka tijekom analize, ali i povećava produktivnost analitičara u bavljenju s podacima.</p>
<p><strong>Uredni podaci</strong> (<em>tidy data</em>) predstavljaju konzistentan način organiziranja podataka koji se koristi kroz cijeli <code>tidyverse</code> ekosustav, ali i općenito u R-u. Konkretnije, iste podatke moguće je predstaviti na više načina, ali nisu svi načini jednako jednostavni i praktični za korištenje.</p>
<p>Postoje tri međusobno povezana pravila koja čine skup podataka urednim:</p>
<ol type="1">
<li><p><strong>svaka varijabla je stupac, a svaki stupac je varijabla</strong>;</p></li>
<li><p><strong>svako opažanje je redak, a svaki redak je opažanje</strong>;</p></li>
<li><p><strong>svaka vrijednost je ćelija, a svaka ćelija je jedna vrijednost</strong>.</p></li>
</ol>
<p>Segmenti podataka u podatkovnom okviru raspoređeni su kroz varijable, opažanja i pojedine vrijednosti. <strong>Varijabla</strong> predstavlja svojstvo ili karakteristiku koja se mjeri i koja može poprimiti različite vrijednosti. U kontekstu filmskih podataka, varijable mogu biti naziv filma, godina premijere, žanr ili trajanje filma. U urednim podatkovnim okvirima one su raspoređene u stupcima podatkovnih okvira. To znači da svaki stupac u podatkovnom okviru predstavlja jednu vrstu informacije koju želimo pratiti. Primjerice, ako nas zanimaju informacije o nekim filmovima, varijable mogu biti “movie” u kojoj se nalaze nazivi filmova, “realise_year” u kojoj se nalaze godine kada je film premijerno prikazan, “runtime” u kojoj se nalazi trajanje filma, “director” u kojoj se nalazi ime redatelja itd. Svaki od ovih stupaca pritom mora sadržavati samo jedan tip podataka - varijabla “movie” samo nazive filmova, a varijabla “runtime” samo godine. <strong>Opažanje</strong> predstavlja jedan slučaj ili jedinicu analize za koju prikupljamo podatke o različitim varijablama. U urednim podatkovnim okvirima opažanja su pojedini redci u tablici koji pripadaju jednoj jedinici analize (npr. jednom ispitaniku, kućanstvu, državi itd.) i sadrži vrijednosti niza varijabli koje opisuju tu jedinicu. Dok varijable predstavljaju svojstva, opažanja su konkretne realizacije tih svojstava za svaku jedinicu. U primjeru filmova svaki red predstavlja po jedan film koji je po jedno opažanje. <strong>Vrijednost</strong> je sadržaj jedne ćelije na sjecištu određene varijable i opažanja. Ona predstavlja jednu mjeru jedne varijable za jednu jedinicu i ne bi smjela sadržavati više informacija spojenih u istu ćeliju. U tehničkom smislu pojedinačna vrijednost je vrijednost određenog tipa podataka (npr. broj, logička vrijednost, znakovni niz, datum, vrijeme, faktor ili nedostajuća vrijednost). Na primjer, vrijednost koja prikazuje varijablu “realise_year” za opažanje “The Shawshak Redemption” je “1994”, a vrijednost koja prikazuje varijablu “director” za opažanje “The Lord of the Rings: The Return of the King” je “Peter Jackson”.</p>
<p>Primjer jednog urednog podatkovnog okvira je <code>imdb_top_10_tidy_dataset</code> koji prikazuje top 10 filmova prema IMDb ljestvici u kojem je svaki redak jedno je opažanje, odnosno jedan film, a svaki stupac pojedino obilježje filma, odnosno varijabla koja prikazuju naziv, godinu izdanja, glumce, redatelje i ostale informacije o filmovima.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-bfe2267876c0519969c5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-bfe2267876c0519969c5">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],[1,2,3,4,5,6,7,8,9,10],["The Shawshank Redemption","The Godfather","The Dark Knight","The Godfather Part II","12 Angry Men","The Lord of the Rings: Return of the King","Schindler's List","Pulp Fiction","Lord of the Rings: The Fellowship of the Ring","The Good, the Bad and the Ugly"],[1994,1972,2008,1974,1957,2003,1993,1994,2001,1966],["United States","United States","United States, United Kingdom","United States","United States","New Zeland, United States","United States","United States","New Zeland, United States, United Kingdom","Italy, Spain, West Germany, United States"],["Frank Darabont","Francis Ford Coppola","Christopher Nolan","Francis Ford Coppola","Sidney Lumet","Peter Jackson","Steven Spielberg","Quentin Tarantino","Peter Jackson","Sergio Leone"],["Stephen King, Frank Darabont","Mario Puzo, Francis Ford Coppola","Jonathan Nolan, Christopher Nolan, David S. Goyer","Francis Ford Coppola, Mario Puzo","Reginald Rose","J.R.R. Tolkien, Fran Walsh, Philippa Boyens","Thomas Keneally, Steven Zaillian","Quentin Tarantino, Roger Avary","J.R.R. Tolkien, Fran Walsh, Philippa Boyens","Luciano Vincenzoni, Sergio Leone, Agenore Incrocci"],["Tim Robbins, Morgan Freeman, Bob Gunton","Marlon Brando, Al Pacino, James Caan","Christian Bale, Heath Ledger, Aaron Eckhart","Al Pacino, Robert De Niro, Robert Duvall","Henry Fonda, Lee J. Cobb, Martin Balsam","Elijah Wood, Viggo Mortensen, Ian McKellen","Liam Neeson, Ralph Fiennes, Ben Kingsley","John Travolta, Uma Thurman, Samuel L. Jackson","Elijah Wood, Ian McKellen, Orlando Bloom","Clint Eastwood, Eli Wallach, Lee Van Cleef"],["Drama","Crime, Drama","Action, Crime, Drama, Thriller","Crime, Drama","Crime, Drama","Adventure, Drama, Fantasy","Biography, Drama, History","Crime, Drama","Adventure, Drama, Fantasy","Adventure, Drama, Western"],["English","English, Italian, Latin","English","English, Italian, Spanish, Latin, Sicilian","English","English, Quenya, Old English, Sindarin","English, Hebrew, German, Polish, Latin","English, Spanish French","English, Sindarin","Italian, English"],[142,175,152,202,96,201,195,154,178,178],["Color","Color","Color","Color","Black &amp; White","Color","Black &amp; White","Color","Color","Color"],[25000000,6000000,185000000,13000000,350000,94000000,22000000,8000000,93000000,1200000]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>rank<\/th>\n      <th>movie<\/th>\n      <th>release_year<\/th>\n      <th>countries_of_origin<\/th>\n      <th>director<\/th>\n      <th>writers<\/th>\n      <th>stars<\/th>\n      <th>genres<\/th>\n      <th>language<\/th>\n      <th>runtime<\/th>\n      <th>colour<\/th>\n      <th>budget<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,10,12]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"rank","targets":1},{"name":"movie","targets":2},{"name":"release_year","targets":3},{"name":"countries_of_origin","targets":4},{"name":"director","targets":5},{"name":"writers","targets":6},{"name":"stars","targets":7},{"name":"genres","targets":8},{"name":"language","targets":9},{"name":"runtime","targets":10},{"name":"colour","targets":11},{"name":"budget","targets":12}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Uredna struktura podataka je važna jer čini podatke kompatibilnima s R-ovim vektoriziranim pristupom i omogućuje direktnu upotrebu funkcija kao što su <code>filter()</code>, <code>group_by()</code>, <code>summarise()</code> i <code>ggplot()</code> bez dodatnih transformacija podataka. Kada su podatci uredni, moguće je direktno filtrirati podatke po bilo kojoj varijabli, grupirati podatke po kategorijama i kreirati vizualizacije bez složenih priprema. Ako su podaci neuredni, onda je provođenje svih ovih postupaka uvelike otežano.</p>
<section id="format-podataka-u-r-u" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="format-podataka-u-r-u"><span class="header-section-number">3.1</span> Format podataka u R-u</h2>
<p>Isti temeljni podaci mogu se organizirati u različite formate, a dva najčešća su dugački (<em>long</em>) i široki (<em>wide</em>) format. Primjena ova dva formata ključno je za efikasno uređivanje podataka jer različite analize i vizualizacije zahtijevaju različite formate podataka.</p>
<p><strong>Dugački format</strong> karakteriziran je time što se sve vrijednosti jedne varijable nalaze u jednom stupcu. Ovaj format rezultira podatkovnim okvirom s više redaka, ali manjim brojem stupaca. Svaki red predstavlja jedno opažanje, a svaki stupac predstavlja jednu varijablu. Dugački format prirodniji je za analizu podataka jer slijedi temeljna načela urednih podataka. U ovom formatu lakše je provoditi grupne operacije, stvarati vizualizacije i primjenjivati statističke funkcije. Koristeći isti primjer filmskih ocjena, dugački format imao bi stupce “movie”, “year” i “runtime” gdje bi svaki red predstavljao jednu kombinaciju filma i godine s odgovarajućim vremenom trajanja.</p>
<p>Primjer jednog takvog podatkovnog okvira je <code>imdb_top_10_long</code>. Podaci su organizirani u dugom obliku s četiri stupca: “rank”, “movie”, “attribute” i “value”. Stupci “rank” i “movie” čine identifikator svakog filma, a za svaki film postoji po više redaka, odnosno po jedan redak za svako obilježje koje je zapisano u varijabli “attribute”. Naziv obilježja pritom stoji u varijabli “attribute”, dok se sama vrijednost obilježja nalazi u varijabli “value”. Time jedan film zauzima otprilike deset redaka (jedan po atributu), umjesto jednog širokog retka s mnogo stupaca.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f9761cfae81a62221ca3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f9761cfae81a62221ca3">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10],["The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Shawshank Redemption","The Godfather","The Godfather","The Godfather","The Godfather","The Godfather","The Godfather","The Godfather","The Godfather","The Godfather","The Godfather","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Dark Knight","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","The Godfather Part II","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","12 Angry Men","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","The Lord of the Rings: Return of the King","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Schindler's List","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Pulp Fiction","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","Lord of the Rings: The Fellowship of the Ring","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly","The Good, the Bad and the Ugly"],["release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget","release_year","countries_of_origin","director","writers","stars","genres","language","runtime","colour","budget"],["1994","United States","Frank Darabont","Stephen King, Frank Darabont","Tim Robbins, Morgan Freeman, Bob Gunton","Drama","English","142","Color","25000000","1972","United States","Francis Ford Coppola","Mario Puzo, Francis Ford Coppola","Marlon Brando, Al Pacino, James Caan","Crime, Drama","English, Italian, Latin","175","Color","6000000","2008","United States, United Kingdom","Christopher Nolan","Jonathan Nolan, Christopher Nolan, David S. Goyer","Christian Bale, Heath Ledger, AAron Eckhart","Action, Crime, Drama, Thriller","English","152","Color","185000000","1974","United States","Francis Ford Coppola","Francis Ford Coppola, Mario Puzo","Al Pacino, Robert De Niro, Robert Duvall","Crime, Drama","English, Italian, Spanish, Latin, Sicilian","202","Color","13000000","1957","United States","Sidney Lumet","Reginald Rose","Henry Fonda, Lee J. Cobb, Martin Balsam","Crime, Drama","English","96","Black &amp; White","350000","2003","New Zeland, United States","Peter Jackson","J.R.R. Tolkien, Fran Walsh, Philippa Boyens","Elijah Wood, Viggo Mortensen, Ian McKellen","Adventure, Drama, Fantasy","English, Quenya, Old English, Sindarin","201","Color","94000000","1993","United States","Steven Spielberg","Thomas Keneally, Steven Zaillian","Liam Neeson, Ralph Fiennes, Ben Kingsley","Biography, Drama, History","English, Hebrew, German, Polish, Latin","195","Black &amp; White","22000000","1994","United States","Quentin Tarantino","Quentin Tarantino, Roger Avary","John Travolta, Uma Thurman, Samuel L. Jackson","Crime, Drama","English, Spanish French","154","Color","8000000","2001","New Zeland, United States, United Kingdom","Peter Jackson","J.R.R. Tolkien, Fran Walsh, Philippa Boyens","Elijah Wood, Ian McKellen, Orlando Bloom","Adventure, Drama, Fantasy","English, Sindarin","178","Color","93000000","1966","Italy, Spain, West Germany, United States","Sergio Leone","Luciano Vincenzoni, Sergio Leone, Agenore Incrocci","Clint Eastwood, Eli Wallach, Lee Van Cleef","Adventure, Drama, Western","Italian, English","178","Color","1200000"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>rank<\/th>\n      <th>movie<\/th>\n      <th>attribute<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"rank","targets":1},{"name":"movie","targets":2},{"name":"attribute","targets":3},{"name":"value","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Ovakav dugački format preferira se za vizualizacije pomoću <code>ggplot2</code> paketa, grupne analize i sažimanja podataka, primjenu većine <code>dplyr</code> funkcija i modeliranje podataka. Ipak, široki format karakteriziran je time što se vrijednosti jedne varijable protežu kroz više stupaca. U ovom formatu, podatkovni okvir ima manji broj redaka, ali veći broj stupaca. Imena stupaca često sadrže vrijednosti varijabli umjesto naziva varijabli. Široki format često je prirodniji za unos podataka i čovjeku je lakši za čitanje jer se podaci prezentiraju u kompaktnom obliku. Međutim, ovaj format može otežati analizu jer jedna varijabla nije sadržana u jednom stupcu što krši temeljna načela urednih podataka.</p>
<p>Primjer takvog podatkovnog okvira bio bi <code>imdb_decades</code>. U tom podatkovnom okviru svaki redak predstavlja po jedan film, svaki stupac pojedino desetljeće, a u ćelijama nalazi godina premijere filma u pojedinom desetljeću u kojem je film nastao, odnosno <code>NA</code> ako film nije nastao u tom desetljeću.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1131a65147f6cf02da1a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1131a65147f6cf02da1a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["The Shawshank Redemption","The Godfather","The Dark Knight","The Godfather Part II","12 Angry Men","Lord of the Rings: Return of the King","Schindler's List","Pulp Fiction","Lord of the Rings: Fellowship","The Good, the Bad and the Ugly"],[null,null,null,null,1957,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,1966],[null,1972,null,1974,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null],[1994,null,null,null,null,null,1993,1994,null,null],[null,null,2008,null,null,2003,null,null,2001,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>movie<\/th>\n      <th>1950s<\/th>\n      <th>1960s<\/th>\n      <th>1970s<\/th>\n      <th>1980s<\/th>\n      <th>1990s<\/th>\n      <th>2000s<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"movie","targets":1},{"name":"1950s","targets":2},{"name":"1960s","targets":3},{"name":"1970s","targets":4},{"name":"1980s","targets":5},{"name":"1990s","targets":6},{"name":"2000s","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Ovaj podatkovni okvir je problematičan jer krši načela urednih podataka, odnosno desetljeća koje su vrijednosti postavljene su kao nazivi stupaca umjesto da budu u ćelijama pojedinih varijabli. To rezultira s puno nepotrebnih <code>NA</code> vrijednosti i otežava analizu jer nije moguće jednostavno filtrirati filmove po godini ili desetljeću. Umjesto šest stupaca za desetljeća, bolji format podataka bio bi onaj u kojem su dva stupca, jedan za desetljeće i jedan za godinu.</p>
<p>Široki format može biti korisniji za:</p>
<ul>
<li><p>prikazivanje podataka u tablicama za čovjeka,</p></li>
<li><p>određene statističke analize koje zahtijevaju matricijski oblik,</p></li>
<li><p>kreiranje pivot tablica i</p></li>
<li><p>izvoz podataka za druge aplikacije.</p></li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-siroki" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-siroki-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.1: Široki format
</figcaption>
<div aria-describedby="tbl-siroki-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">ID</th>
<th style="text-align: left;">A</th>
<th style="text-align: left;">B</th>
<th style="text-align: left;">C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">60</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-dugacki" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-dugacki-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.2: Dugački format
</figcaption>
<div aria-describedby="tbl-dugacki-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">ID</th>
<th style="text-align: left;">name</th>
<th style="text-align: left;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">A</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">B</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">A</td>
<td style="text-align: left;">40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">B</td>
<td style="text-align: left;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">60</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
<p>Pritom je važno naglasiti da nijedan od ova dva formata nije inherentno uredan ili neuredan, nego to ovisi o tome što stupci, retci i ćelije predstavljaju u kontekstu podataka. Dugački format je općenito bolji za analizu podataka jer funkcije poput <code>dplyr</code> paketa prirodno rade s jednim stupcem vrijednosti, a <code>ggplot2</code> paket je dizajniran za dugački format jer mapira estetike na stupce. Također, u dugačkom je formatu lakše dodavati nova vremenska razdoblja ili kategorije jer se jednostavno dodaju novi redovi umjesto novih stupaca. Široki format je bolji za prezentaciju i izvještaje jer je ljudima prirodnije čitati podatke kada su povezane vrijednosti prikazane horizontalno kao stupci, kao i za matrične operacije poput korelacijske analize ili unos podataka jer odražava način kako ljudi razmišljaju o podacima. Općenito pravilo je koristiti dugački format za analize i vizualizacije, a široki za prikaz rezultata.</p>
</section>
<section id="uređivanje-neurednih-podataka" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="uređivanje-neurednih-podataka"><span class="header-section-number">3.2</span> Uređivanje neurednih podataka</h2>
<p>Kada podaci u podatkovnom okviru ne ispunjavaju tri navedena uvjeta o urednim podacima, onda te podatke nazivamo <strong>neurednim podacima</strong> te je bilo kakav rad na podacima otežan. Postoje različiti mogući oblici neurednih podataka, odnosno različiti načini na koji podaci u podatkovnom okviru mogu biti posloženi, a koji otežavaju daljnji rad na podacima. Pritom uređivanje uključuje produljenje i proširenje podataka. Produljenje podataka uključuje pretvaranje širokih podatkovnih okvira u oblik koji ima više redaka, a manje stupaca. Suprotno, proširenje podataka uključuje pretvaranje dugih tablica u širok oblik koji ima manje redaka i više stupaca.</p>
<p>Za uređivanje podataka u R-u najčešće se koriste dvije funkcije iz <code>tidyr</code> paketa, <code>pivot_longer()</code> za produljivanje i <code>pivot_wider()</code> za proširivanje. <code>pivot_longer()</code> pretvara široku tablicu u dugu, odnosno više stupaca prenosi u dva stupca — jedan s imenom varijable i jedan s vrijednošću. Rezultat je više redaka i manje stupaca. <code>pivot_wider()</code> radi suprotno, iz duge tablice (u kojoj postoji stupac s imenima varijabli i stupac s vrijednostima) stvara široku tako da različite vrijednosti iz stupca s imenima postanu novi stupci. Rezultat je manje redaka, a više stupaca. Osim ove dvije funkcije, <code>tidyr</code> paket sadrži još neke funkcije koje pomažu uređivanje podataka, a od kojih će neke biti navedene i u nastavku.</p>
<section id="rješavanje-problema-neurednih-podataka" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="rješavanje-problema-neurednih-podataka"><span class="header-section-number">3.2.1</span> Rješavanje problema neurednih podataka</h3>
<p>Može se pojaviti više oblika konstrukcije podataka, odnosno neurednih podatkovnih okvira koje je potrebno urediti, odnosno proširiti ili produžiti.</p>
<p><strong>1. Nazivi varijabli kao vrijednosti</strong></p>
<p>Čest problem koji se susreće kod neuredno organiziranih podataka nastaje kada nazivi stupaca ne predstavljaju nazive varijabli, već vrijednosti neke varijable. Ovaj tip neuredno organiziranih podataka krši temeljna načela urednih podataka jer se vrijednosti jedne varijable nalaze u nazivima stupaca umjesto u jednom stupcu. Takav oblik podataka čini ih teškima za analizu jer funkcije u R-u očekuju da se vrijednosti varijabli nalaze u stupcima, a ne u njihovim nazivima.</p>
<p>Primjer takvih neurednih podataka je podatkovni okvir <code>imdb_decades</code> u kojem su nazivi stupaca “1950s”, “1960s”, “1970s”, “1980s”, “1990s” i “2000s”, a koji predstavljaju vrijednosti varijable “decade”, a ne nazive varijabli. Stupac “movie” sadrži nazive filmova, dok ćelije sadrže godinu premijere filma ako film pripada određenom desetljeću, odnosno <code>NA</code> ako ne pripada. Ovaj oblik podataka ima široki format gdje se informacije o godini proizvodnje filma protežu kroz više stupaca, a većina ćelija sadrži nedostajuće vrijednosti (<code>NA</code>).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>imdb_decades</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
   movie                         `1950s` `1960s` `1970s` `1980s` `1990s` `2000s`
   &lt;chr&gt;                           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
 1 The Shawshank Redemption           NA      NA      NA NA         1994      NA
 2 The Godfather                      NA      NA    1972 NA           NA      NA
 3 The Dark Knight                    NA      NA      NA NA           NA    2008
 4 The Godfather Part II              NA      NA    1974 NA           NA      NA
 5 12 Angry Men                     1957      NA      NA NA           NA      NA
 6 Lord of the Rings: Return of…      NA      NA      NA NA           NA    2003
 7 Schindler's List                   NA      NA      NA NA         1993      NA
 8 Pulp Fiction                       NA      NA      NA NA         1994      NA
 9 Lord of the Rings: Fellowship      NA      NA      NA NA           NA    2001
10 The Good, the Bad and the Ug…      NA    1966      NA NA           NA      NA</code></pre>
</div>
</div>
<p>Problem se rješava pomoću funkcije <code>pivot_longer()</code> koja pretvara široke podatke u dugačke. Funkcija omogućuje specificiranje stupaca koji se trebaju pivotirati pomoću argumenta <code>cols</code>, naziv nove varijable koja će sadržavati nazive stupaca pomoću argumenta <code>names_to</code> te naziv varijable koja će sadržavati vrijednosti iz ćelija pomoću argumenta <code>values_to</code>. Dodatno, argument <code>values_drop_na = TRUE</code> može se koristiti za uklanjanje redova s nedostajućim vrijednostima koji ne predstavljaju stvarna opažanja.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Funkcija: pivot_longer()">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Funkcija: pivot_longer()
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Funkcija <code>pivot_longer()</code> dio je <code>tidyr</code> paketa koja produžuje podatke povećavajući broj njihovih redaka i smanjujući broj stupaca.</p>
<p>Funkcija može imati slijedeće argumente:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td>Podatkovni okvir u širokom format.</td>
</tr>
<tr class="even">
<td><code>cols</code></td>
<td>Određuje koji se stupci pretvaraju u dugi oblik.</td>
</tr>
<tr class="odd">
<td><code>cols_vary</code></td>
<td>Određuje redoslijed “slaganja” vrijednosti kada ih R raspoređuje u duži oblik. Može biti <code>fastest</code> (zadano) čime se najbrže mijenja stupac (vrijednosti se slažu “po stupcima”) i <code>slowest</code> čime se najsporije mijenja stupac (vrijednosti se slažu “po redovima”).</td>
</tr>
<tr class="even">
<td><code>names_to</code></td>
<td>Naziv ili nazivi novih stupaca koji će sadržavati nazive starih stupaca.</td>
</tr>
<tr class="odd">
<td><code>names_prefix</code></td>
<td>Niz koji će se ukloniti iz naziva stupaca prije nego što se oni stave u <code>names_to</code>.</td>
</tr>
<tr class="even">
<td><code>names_sep</code></td>
<td>Koristi se kada u <code>names_to</code> kako bi se njime definirlo koji se razdjelnik koristiti za razbijanje naziva.</td>
</tr>
<tr class="odd">
<td><code>names_pattern</code></td>
<td>Alternativa <code>names_sep</code>, ali koristi regularne izraze za razbijanje naziva.</td>
</tr>
<tr class="even">
<td><code>names_ptypes</code></td>
<td>Dopušta da zadamo tip podataka za stupac ili stupce kreirane u <code>names_to</code>.</td>
</tr>
<tr class="odd">
<td><code>names_transform</code></td>
<td>Funkcija ili lista funkcija koje se primjenjuju na stupce iz <code>names_to</code>.</td>
</tr>
<tr class="even">
<td><code>names_repair</code></td>
<td>Što učiniti ako se u novim imenima stupaca pojave duplikati (zadano je <code>check_unique</code> koji javlja grešku ako nisu jedinstveni.</td>
</tr>
<tr class="odd">
<td><code>values_to</code></td>
<td>Ime novog stupca u koji idu vrijednosti skupljenih stupaca.</td>
</tr>
<tr class="even">
<td><code>values_drop_na</code></td>
<td>Ako je <code>TRUE</code>, brišu se redci u kojima su vrijednosti <code>NA</code> u stupcu <code>values_to</code>.</td>
</tr>
<tr class="odd">
<td><code>values_ptypes</code></td>
<td>Kao i <code>names_ptypes</code>, ali za stupac <code>values_to</code>.</td>
</tr>
<tr class="even">
<td><code>values_transform</code></td>
<td>Funkcija ili lista funkcija za transformaciju vrijednosti.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>imdb_decades_tidy <span class="ot">&lt;-</span> imdb_decades <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"19"</span>, <span class="st">"20"</span>)),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"decade"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"year"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nakon primjene <code>pivot_longer()</code> funkcije, dobivamo uređeni podatkovni okvir koji sadrži tri stupca: “movie” (naziv filma), “decade” (desetljeće) i “year” (godina premijere). Svaki red predstavlja jedno opažanje - kombinaciju filma i desetljeća s odgovarajućom godinom premijere. Uređeni format omogućuje lakše grupiranje podataka po desetljećima, izračunavanje sažetaka te stvaranje vizualizacija što bi bilo komplicirano ili nemoguće u neuredno organiziranom širom formatu.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>imdb_decades_tidy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   movie                                 decade  year
   &lt;chr&gt;                                 &lt;chr&gt;  &lt;dbl&gt;
 1 The Shawshank Redemption              1990s   1994
 2 The Godfather                         1970s   1972
 3 The Dark Knight                       2000s   2008
 4 The Godfather Part II                 1970s   1974
 5 12 Angry Men                          1950s   1957
 6 Lord of the Rings: Return of the King 2000s   2003
 7 Schindler's List                      1990s   1993
 8 Pulp Fiction                          1990s   1994
 9 Lord of the Rings: Fellowship         2000s   2001
10 The Good, the Bad and the Ugly        1960s   1966</code></pre>
</div>
</div>
<p><strong>2. Više varijabli u nazivima stupaca</strong></p>
<p>Složeniji oblik neurednih podataka nastaje kada se u nazivima stupaca nalazi više dijelova informacije odvojenih određenim separatorom pri čemu svaki dio predstavlja vrijednost različite varijable. Ovaj tip neuredno organiziranih podataka predstavlja naprednu verziju prethodnog problema jer ne sadrži samo jednu varijablu u nazivima stupaca, nego kombinaciju nekoliko varijabli. Takva organizacija podataka otežava analizu jer se vrijednosti više varijabli nalaze pomiješane u nazivima stupaca umjesto da svaka varijabla ima svoj vlastiti stupac.</p>
<p>Primjer takvih podataka je <code>realise_year_runtime_dataset</code>. Kod tih podataka nazivi stupaca poput “1994_142”, “1972_175”, “2008_152” i drugi sadrže dvije različite informacije odvojene podvlakom, godinu premijere filma i trajanje filma. Stupci “rank” i “movie” predstavljaju identifikacijske varijable, dok ćelije sadrže informaciju o tome je li film u boji (“Color”) ili crno-bijeli (“Black &amp; White”), s <code>NA</code> vrijednostima za kombinacije koje ne odgovaraju određenom filmu. Ovaj oblik podataka ima izrazito široki format gdje se tri različite varijable (godina, trajanje i tip fotografije) nalaze raspršene kroz nazive stupaca i vrijednosti ćelija.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 12
    rank movie  `1994_142` `1972_175` `2008_152` `1974_202` `1957_96` `2003_201`
   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     
 1     1 The S… Color      &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
 2     2 The G… &lt;NA&gt;       Color      &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
 3     3 The D… &lt;NA&gt;       &lt;NA&gt;       Color      &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
 4     4 The G… &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       Color      &lt;NA&gt;      &lt;NA&gt;      
 5     5 12 An… &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       Black &amp; … &lt;NA&gt;      
 6     6 The L… &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      Color     
 7     7 Schin… &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
 8     8 Pulp … &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
 9     9 Lord … &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
10    10 The G… &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      
# ℹ 4 more variables: `1993_195` &lt;chr&gt;, `1994_154` &lt;chr&gt;, `2001_154` &lt;chr&gt;,
#   `1966_178` &lt;chr&gt;</code></pre>
</div>
</div>
<p>Problem se rješava pomoću funkcije <code>pivot_longer()</code> s dodatnim argumentima za razdvajanje složenih naziva stupaca. Ključni argument <code>names_to</code> prima vektor naziva novih varijabli koje će nastati razdvajanjem naziva stupaca, dok argument <code>names_sep</code> specificira separator koji razdvaja različite dijelove naziva stupaca. U ovom slučaju, <code>names_to = c("year", "runtime")</code> stvara dvije nove varijable, a <code>names_sep = "_"</code> specificira da se nazivi stupaca dijele po podvlaci. Argument <code>values_drop_na = TRUE</code> uklanja redove s nedostajućim vrijednostima koji predstavljaju umjetno stvorene kombinacije.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset_tidy <span class="ot">&lt;-</span> realise_year_runtime_dataset <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(rank, movie),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"runtime"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nakon primjene <code>pivot_longer()</code> funkcije s odgovarajućim argumentima, dobivamo uređeni podatkovni okvir koji sadrži pet stupaca: “rank” (rang filma), “movie” (naziv filma), “year” (godina proizvodnje), “runtime” (trajanje u minutama) i “value” (tip fotografije). Svaki red predstavlja jedno opažanje - jedan film s njegovim karakteristikama. Uređeni format omogućuje direktno grupiranje po godini ili trajanju filma, izračunavanje statističkih pokazatelja te stvaranje složenih vizualizacija koje analiziraju povezanost između godine proizvodnje, trajanja i tipa fotografije, što bi bilo praktički nemoguće u neuredno organiziranom formatu.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset_tidy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
    rank movie                                         year  runtime value      
   &lt;dbl&gt; &lt;chr&gt;                                         &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;      
 1     1 The Shawshank Redemption                      1994  142     Color      
 2     2 The Godfather                                 1972  175     Color      
 3     3 The Dark Knight                               2008  152     Color      
 4     4 The Godfather Part II                         1974  202     Color      
 5     5 12 Angry Men                                  1957  96      Black &amp; Wh…
 6     6 The Lord of the Rings: Return of the King     2003  201     Color      
 7     7 Schindler's List                              1993  195     Black &amp; Wh…
 8     8 Pulp Fiction                                  1994  154     Color      
 9     9 Lord of the Rings: The Fellowship of the Ring 2001  154     Color      
10    10 The Good, Bas and the Ugly                    1966  178     Color      </code></pre>
</div>
</div>
<p><strong>3. Varijable pohranjene u redovima</strong></p>
<p>Varijable pohranjene u redovima predstavljaju obrnuti problem od prethodnih slučajeva neuredno organiziranih podataka. U ovom obliku neurednih podataka, ono što bi trebale biti varijable nalazi se u redovima, dok se vrijednosti tih varijabli nalaze u drugom stupcu. Ovakav oblik podataka rezultira pretjerano dugačkim formatom gdje se jedno opažanje proteže kroz više redova umjesto da bude sadržano u jednom redu. Ova organizacija čini podatke teškima za analizu jer krši temeljna načela urednih podataka prema kojima svaki red treba predstavljati jedno opažanje.</p>
<p>U primjeru podatkovnog okvira <code>imdb_top_10_long</code>, svaki film (opažanje) predstavljen je kroz više redova, pri čemu stupac “attribute” sadrži nazive varijabli poput “release_year”, “director”, “genres”, “runtime” i ostale, dok stupac “value” sadrži odgovarajuće vrijednosti tih varijabli. Na primjer, film “The Shawshank Redemption” prikazan je kroz deset redova, po jedan za svaku karakteristiku filma. Ovakav format rezultira podatkovnim okvirom s 100 redova (10 filmova × 10 atributa) umjesto očekivanih 10 redova za 10 filmova.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>imdb_top_10_long</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 4
    rank movie                    attribute           value                     
   &lt;dbl&gt; &lt;chr&gt;                    &lt;chr&gt;               &lt;chr&gt;                     
 1     1 The Shawshank Redemption release_year        1994                      
 2     1 The Shawshank Redemption countries_of_origin United States             
 3     1 The Shawshank Redemption director            Frank Darabont            
 4     1 The Shawshank Redemption writers             Stephen King, Frank Darab…
 5     1 The Shawshank Redemption stars               Tim Robbins, Morgan Freem…
 6     1 The Shawshank Redemption genres              Drama                     
 7     1 The Shawshank Redemption language            English                   
 8     1 The Shawshank Redemption runtime             142                       
 9     1 The Shawshank Redemption colour              Color                     
10     1 The Shawshank Redemption budget              25000000                  
# ℹ 90 more rows</code></pre>
</div>
</div>
<p>Problem se rješava pomoću funkcije <code>pivot_wider()</code> iz <code>tidyr</code> paketa koja pretvara dugačke podatke u široke. Funkcija koristi argument <code>names_from</code> za specificiranje stupca koji sadrži nazive budućih varijabli (u ovom slučaju stupac “attribute”) te argument <code>values_from</code> za specificiranje stupca koji sadrži vrijednosti tih varijabli (stupac “value”). Funkcija <code>pivot_wider()</code> automatski grupira podatke prema svim stupcima koji nisu specificirani u <code>names_from</code> i <code>values_from</code> argumentima što znači da će se podaci grupirati po “rank” i “movie” stupcima.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Funkcija: pivot_wider()">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Funkcija: pivot_wider()
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Funkcija <code>pivot_wider()</code> dio je <code>tidyr</code> paketa koja produžuje podatke smanjujući njihov broj redaka i povećavajući broj stupaca. Funkcija može imati slijedeće argumente:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td>Podatkovni okvir u dugom formatu.</td>
</tr>
<tr class="even">
<td><code>id_cols</code></td>
<td>Stupci koji se koriste kao identifikatori opservacija, a koji ostaju kao redovi.</td>
</tr>
<tr class="odd">
<td><code>id_expand</code></td>
<td>Ako je TRUE, onda se stvara puni “cross-join” identifikatora i vrijednosti u <code>names_from</code>. Koristi se kada želimo dobiti sve moguće kombinacije, a ne samo postojeće.</td>
</tr>
<tr class="even">
<td><code>names_from</code></td>
<td>Stupac ili stupci čije se vrijednosti koriste za nazive novih stupaca.</td>
</tr>
<tr class="odd">
<td><code>names_prefix</code></td>
<td>Dodaje prefiks na nazive stupaca.</td>
</tr>
<tr class="even">
<td><code>names_sep</code></td>
<td>Razdjelnik koji se koristi ako imamo više varijabli u <code>names_from</code> (zadano je “_“).</td>
</tr>
<tr class="odd">
<td><code>names_glue</code></td>
<td>Omogućuje korištenje glue sintakse za definiranje imena stupaca.</td>
</tr>
<tr class="even">
<td><code>names_sort</code></td>
<td>Ako je TRUE, onda će novi stupci biti sortirani po abecedi. Inače redoslijed ostaje kao u podacima.</td>
</tr>
<tr class="odd">
<td><code>names_vary</code></td>
<td>Kontrolira redoslijed kombiniranja imena stupaca kad <code>names_from</code> ima više varijabli ( može biti <code>fastest</code> ili <code>slowest</code> isto kao kod <code>pivot_longer()</code>).</td>
</tr>
<tr class="even">
<td><code>names_expand</code></td>
<td>Ako je TRUE, onda se kreiraju svi mogući stupci za sve vrijednosti u <code>names_from</code> čak i ako neke kombinacije ne postoje.</td>
</tr>
<tr class="odd">
<td><code>names_repair</code></td>
<td>Kako se ponašati ako nastanu duplikati u imenima stupaca ( zadano je <code>check_unique</code> koji javlja grešku.</td>
</tr>
<tr class="even">
<td><code>values_from</code></td>
<td>Stupac čije vrijednosti želimo staviti u ćelije novih stupaca.</td>
</tr>
<tr class="odd">
<td><code>values_fill</code></td>
<td>Vrijednost kojom se popunjavaju ćelije ako nema podataka (<code>NA</code>).</td>
</tr>
<tr class="even">
<td><code>values_fn</code></td>
<td>Funkcija koja se koristi ako postoji više vrijednosti za istu kombinaciju identifikatora i naziva stupca (npr. <code>values_fn = mean</code> računa prosjek ako ima više vrijednosti).</td>
</tr>
<tr class="odd">
<td><code>unused_fn</code></td>
<td>Funkcija koja određuje što raditi s varijablama koje nisu u <code>id_cols</code>, <code>names_from</code> ili <code>values_from</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>imdb_top_10_wide <span class="ot">&lt;-</span> imdb_top_10_long <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from  =</span> attribute,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nakon primjene <code>pivot_wider()</code> funkcije, dobivamo uređeni podatkovni okvir koji sadrži 12 stupaca: identifikacijske varijable “rank” i “movie” te deset novih stupaca koji predstavljaju filmske karakteristike (“release_year”, “countries_of_origin”, “director”, “writers”, “stars”, “genres”, “language”, “runtime”, “colour” i “budget”). Svaki od 10 redova predstavlja jedan film s njegovim kompletnim karakteristikama. Uređeni format omogućuje direktno usporedbu filmova prema bilo kojoj karakteristici, izračunavanje statističkih pokazatelja te stvaranje vizualizacija koje analiziraju povezanost između različitih varijabli poput godine proizvodnje i budžeta, što bi zahtijevalo složene operacije grupiranja u neuredno organiziranom dugačkom formatu.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(imdb_top_10_wide, <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 12
   rank movie     release_year countries_of_origin director writers stars genres
  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;               &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; 
1     1 The Shaw… 1994         United States       Frank D… Stephe… Tim … Drama 
2     2 The Godf… 1972         United States       Francis… Mario … Marl… Crime…
3     3 The Dark… 2008         United States, Uni… Christo… Jonath… Chri… Actio…
# ℹ 4 more variables: language &lt;chr&gt;, runtime &lt;chr&gt;, colour &lt;chr&gt;, budget &lt;chr&gt;</code></pre>
</div>
</div>
<p><strong>4. Isti tip vrijednosti raspoređen u više stupaca</strong></p>
<p>Četvrti tipičan oblik neurednih podataka nastaje kada se vrijednosti iste varijable raspoređuju u više stupaca umjesto da budu pohranjene u jednom stupcu. Ovaj problem često se javlja kada se podaci dizajniraju za lakši unos podataka, a ne za analizu što rezultira situacijom gdje jedna logička varijabla (na primjer, spisak scenarista) biva podijeljena u više fizičkih stupaca. Takva organizacija krši temeljna načela urednih podataka jer se ista vrsta informacije nalazi u različitim stupcima, što otežava analize koje zahtijevaju rad s tom varijablom kao cjelinom.</p>
<p><code>writers_dataset</code> je jedan takav podatkovni okvir. U tom su podatkovnom okviru informacije o scenaristima filmova podijeljene su u tri odvojena stupca: “writer_1”, “writer_2” i “writer_3”. Stupci “rank” i “movie” predstavljaju identifikacijske varijable, dok se imena scenarista nalaze u odvojenim stupcima ovisno o redoslijedu njihovog navođenja. Većina filmova ima dva ili tri scenarista što znači da se u podatkovnom okviru pojavljuju <code>NA</code> vrijednosti kada film nema dovoljno scenarista za popunjavanje svih stupaca. Ovakav format otežava analize poput brojanja koliko filmova ima određeni scenarist ili grupiranja filmova prema scenaristu.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>writers_dataset</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
    rank movie                                        writer_1 writer_2 writer_3
   &lt;dbl&gt; &lt;chr&gt;                                        &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   
 1     1 The Shawshank Redemption                     Stephen… Frank D… &lt;NA&gt;    
 2     2 The Godfather                                Mario P… Francis… &lt;NA&gt;    
 3     3 The Dark Knight                              Jonatha… Christo… David S…
 4     4 The Godfather Part II                        Francis… Mario P… &lt;NA&gt;    
 5     5 12 Angry Men                                 Reginal… &lt;NA&gt;     &lt;NA&gt;    
 6     6 The Lord of the Rings: Return of the King    J.R.R. … Fran Wa… Philipp…
 7     7 Schindler's List                             Thomas … Steven … &lt;NA&gt;    
 8     8 Pulp Fiction                                 Quentin… Roger A… &lt;NA&gt;    
 9     9 Lord of the Rings: The Fellowship of the Ri… J.R.R. … Fran Wa… Philipp…
10    10 The Good, the Bad and the Ugly               Luciano… Sergio … Agenore…</code></pre>
</div>
</div>
<p>Problem se rješava pomoću funkcije <code>pivot_longer()</code> uz dodatne argumente koji olakšavaju rad s nazivima stupaca koji imaju zajednički prefiks. Argument <code>cols = starts_with("writer_")</code> specificira da se pivotiraju svi stupci koji počinju s “writer_”, dok argument <code>names_prefix = "writer_"</code> uklanja prefiks iz naziva stupaca prije pohranjivanja u novu varijablu. Argument <code>names_to = "writer_id"</code> stvara novu varijablu koja označava redni broj scenarista, a <code>values_to = "writer"</code> stvara varijablu koja sadrži imena scenarista. Argument <code>values_drop_na = TRUE</code> uklanja redove s nedostajućim vrijednostima koji nastaju zbog nejednakog broja scenarista po filmovima.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>writers_dataset_tidy <span class="ot">&lt;-</span> writers_dataset <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"writer_"</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to   =</span> <span class="st">"writer_id"</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"writer_"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to  =</span> <span class="st">"writer"</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nakon primjene <code>pivot_longer()</code> funkcije dobivamo uređeni podatkovni okvir koji sadrži četiri stupca: “rank” (rang filma), “movie” (naziv filma), “writer_id” (redni broj scenarista) i “writer” (ime scenarista). Svaki red predstavlja kombinaciju film-scenarist što omogućuje jednostavno brojanje filmova po scenaristu, identifikaciju najproduktivnijih scenarista ili analizu suradnji između različitih scenarista. Uređeni format također olakšava spajanje s drugim podacima o scenaristima te stvaranje vizualizacija mreža suradnji, što bi bilo komplicirano ili nemoguće u neuredno organiziranom širom formatu s odvojenim stupcima za svakog scenarista.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>writers_dataset_tidy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 4
    rank movie                    writer_id writer              
   &lt;dbl&gt; &lt;chr&gt;                    &lt;chr&gt;     &lt;chr&gt;               
 1     1 The Shawshank Redemption 1         Stephen King        
 2     1 The Shawshank Redemption 2         Frank Darabont      
 3     2 The Godfather            1         Mario Puzo          
 4     2 The Godfather            2         Francis Ford Coppola
 5     3 The Dark Knight          1         Jonathan Nolan      
 6     3 The Dark Knight          2         Christopher Nolan   
 7     3 The Dark Knight          3         David S. Goyer      
 8     4 The Godfather Part II    1         Francis Ford Coppola
 9     4 The Godfather Part II    2         Mario Puzo          
10     5 12 Angry Men             1         Reginald Rose       
# ℹ 13 more rows</code></pre>
</div>
</div>
<p><strong>5. Više vrijednosti u jednoj ćeliji</strong></p>
<p>Ovaj oblik neurednih podataka predstavlja pojednostavljenu verziju prethodnog problema gdje se u jednoj ćeliji nalaze vrijednosti koje pripadaju različitim varijablama, odvojene određenim separatorom. Problem nastaje kada se dvije logički različite varijable kombiniraju u jednu kolonu radi uštede prostora ili zbog ograničenja u sustavima za pohranu podataka. Ovakva organizacija krši temeljna načela urednih podataka jer svaka ćelija treba sadržavati vrijednost samo jedne varijable. Kombiniranje različitih tipova informacija u istoj ćeliji otežava sve oblike analize jer je potrebno najprije izdvojiti pojedinačne komponente prije bilo kakve obrade podataka.</p>
<p>U primjeru <code>imdb_combined_variables</code>, stupac “director_budget” sadrži kombinaciju imena redatelja i budžeta filma odvojena podvlakom. Na primjer, vrijednost “Frank Darabont_25000000” predstavlja dva različita podatka: ime redatelja “Frank Darabont” i budžet filma od 25 milijuna dolara. Stupci “rank” i “movie” već su u ispravnom formatu jer sadrže samo jednu vrstu informacije po ćeliji. Ovakav format onemogućuje direktno sortiranje filmova prema budžetu ili grupiranje prema redatelju jer su te informacije zakodane u kombiniranoj ćeliji koja zahtijeva dodatnu obradu.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
    rank movie                                         director_budget          
   &lt;dbl&gt; &lt;chr&gt;                                         &lt;chr&gt;                    
 1     1 The Shawshank Redemption                      Frank Darabont_25000000  
 2     2 The Godfather                                 Francis Ford Coppola_600…
 3     3 The Dark Knight                               Christopher Nolan_185000…
 4     4 The Godfather Part II                         Francis Ford Coppola_130…
 5     5 12 Angry Men                                  Sidney Lumet_350000      
 6     6 The Lord of the Rings: Return of the King     Peter Jackson_94000000   
 7     7 Schindler's List                              Steven Spielberg_22000000
 8     8 Pulp Fiction                                  Quentin Tarantino_8000000
 9     9 Lord of the Rings: The Fellowship of the Ring Peter Jackson_93000000   
10    10 The Good, the Bad and the Ugly                Sergio Leone_1200000     </code></pre>
</div>
</div>
<p>Problem se rješava pomoću funkcije <code>separate()</code> iz <code>tidyr</code> paketa koja omogućuje dijeljenje jednog stupca u dva ili više stupaca na temelju određenog separatora. Funkcija koristi argument <code>col = director_budget</code> za specificiranje stupca koji se želi podijeliti, <code>into = c("director", "budget")</code> za definiranje naziva novih stupaca koji će nastati dijeljenjem i <code>sep = "_"</code> za navođenje separatora koji razdvaja različite vrijednosti. Funkcija <code>separate()</code> automatski prepoznaje poziciju separatora u svakoj ćeliji i dijeli sadržaj na odgovarajući način, stvarajući dva nova stupca s jasno odvojenima informacijama.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Funkcija: separate()">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Funkcija: separate()
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>separate()</code> je ključna funkcija <code>tidyr</code> paketa koja se koristi kada imamo više varijabli spremljenih u jednoj ćeliji, a želimo ih razdvojiti u više stupaca. Funkcija može imati slijedeće argumente:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td>Podatkovni okvir kojem mijenjamo format.</td>
</tr>
<tr class="even">
<td><code>col</code></td>
<td>Naziv stupca koji želimo razdvojiti.</td>
</tr>
<tr class="odd">
<td><code>into</code></td>
<td>Imena novih stupaca u koje želimo rasporediti rezultate.</td>
</tr>
<tr class="even">
<td><code>sep</code></td>
<td>Kako razdvajamo vrijednosti u stupcu (npr. “_“,”-“).</td>
</tr>
<tr class="odd">
<td><code>remove</code></td>
<td>Ako je <code>TRUE</code> (zadano), onda se originalni stupac briše nakon razdvajanja, a ako je <code>FALSE</code>, onda originalni stupac ostaje u tablici zajedno s novim stupcima.</td>
</tr>
<tr class="even">
<td><code>convert</code></td>
<td>Ako je <code>TRUE</code>, onda pokušava automatski pretvoriti nove stupce u odgovarajući tip podataka (npr. “1994” u integer), a ako je <code>FALSE</code>, koji je i zadani, onda će svi novi stupci biti character.</td>
</tr>
<tr class="odd">
<td><code>extra</code></td>
<td>Što napraviti ako se vrijednost razdvoji na više dijelova nego što smo naveli u <code>into</code>. Može biti: <code>warn</code> (zadano) koje izdaje upozorenje i spaja višak u zadnji stupac, <code>drop</code> koje odbacuje višak i <code>merge</code> koje spaja višak u zadnji stupac bez upozorenja.</td>
</tr>
<tr class="even">
<td><code>fill</code></td>
<td>Što napraviti ako se vrijednost razdvoji na manje dijelova nego što smo naveli u <code>into</code>. Može biti: <code>warn</code> (zadano) koje izdaje upozorenje, a prazna mjesta popunjava s <code>NA</code>, <code>right</code> kojim se praznine dodaju na kraj i <code>left</code> kojim se praznine dodaju na početak.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables_tidy <span class="ot">&lt;-</span> imdb_combined_variables <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> director_budget,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"director"</span>, <span class="st">"budget"</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"_"</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nakon primjene <code>separate()</code> funkcije dobivamo uređeni podatkovni okvir koji sadrži četiri stupca: “rank” (rang filma), “movie” (naziv filma), “director” (ime redatelja) i “budget” (budžet filma). Svaki red predstavlja jedan film s jasno odvojenima karakteristikama, pri čemu svaki stupac sadrži samo jedan tip informacije. Uređeni format omogućuje direktne analize poput usporedbe budžeta različitih filmova, identifikacije najskupljih produkcija, grupiranja filmova prema redatelju ili analize povezanosti između budžeta i ranga filma na ljestvici.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables_tidy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
    rank movie                                         director           budget
   &lt;dbl&gt; &lt;chr&gt;                                         &lt;chr&gt;              &lt;chr&gt; 
 1     1 The Shawshank Redemption                      Frank Darabont     25000…
 2     2 The Godfather                                 Francis Ford Copp… 60000…
 3     3 The Dark Knight                               Christopher Nolan  18500…
 4     4 The Godfather Part II                         Francis Ford Copp… 13000…
 5     5 12 Angry Men                                  Sidney Lumet       350000
 6     6 The Lord of the Rings: Return of the King     Peter Jackson      94000…
 7     7 Schindler's List                              Steven Spielberg   22000…
 8     8 Pulp Fiction                                  Quentin Tarantino  80000…
 9     9 Lord of the Rings: The Fellowship of the Ring Peter Jackson      93000…
10    10 The Good, the Bad and the Ugly                Sergio Leone       12000…</code></pre>
</div>
</div>
<p><strong>6. Ista varijabla raspodijeljena u sva stupca</strong></p>
<p>Ovaj oblik neurednih podataka nastaje kada se logički jedna varijabla nepotrebno dijeli u više stupaca. Problem se javlja kada se podaci organiziraju prema komponentama varijable umjesto prema samoj varijabli kao cjelini. Iako ovakva organizacija može biti korisna u specifičnim slučajevima kada trebamo raditi s pojedinim komponentama, češće otežava analizu jer zahtijeva kombiniranje informacija iz više stupaca za dobivanje potpune vrijednosti varijable. Ovakav pristup posebno je problematičan za analize koje tretiraju varijablu kao cjelinu.</p>
<p>U priloženom primjeru <code>director_names_dataset</code> informacija o imenu redatelja podijeljena je u dva odvojena stupca, “director_first_name” koji sadrži ime i “director_last_name” koji sadrži prezime redatelja. Na primjer, za film “The Shawshank Redemption”, ime redatelja “Frank Darabont” podijeljeno je na “Frank” u prvom stupcu i “Darabont” u drugom stupcu. Iako oba dijela logički pripadaju istoj varijabli “director_name”, oni su tretirani kao zasebne varijable. Ovakav format otežava pretraživanje filmova prema redatelju, sortiranje prema abecednom redu ili usporedbu s drugim izvorima podataka gdje su imena redatelja predstavljena kao jedna cjelina.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>director_names_dataset</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
    rank movie                            director_first_name director_last_name
   &lt;dbl&gt; &lt;chr&gt;                            &lt;chr&gt;               &lt;chr&gt;             
 1     1 The Shawshank Redemption         Frank               Darabont          
 2     2 The Godfather                    Francis Ford        Coppola           
 3     3 The Dark Knight                  Christopher         Nolan             
 4     4 The Godfather Part II            Francis Ford        Coppola           
 5     5 12 Angry Men                     Sidney              Lumet             
 6     6 The Lord of the Rings: Return o… Peter               Jackson           
 7     7 Schindler's List                 Steven              Spielberg         
 8     8 Pulp Fiction                     Quentin             Tarantino         
 9     9 Lord of the Rings: The Fellowsh… Peter               Jackson           
10    10 The Good, the Bad and the Ugly   Sergio              Leone             </code></pre>
</div>
</div>
<p>Problem se rješava pomoću funkcije <code>unite()</code> iz <code>tidyr</code> paketa koja omogućuje spajanje više stupaca u jedan stupac. Funkcija koristi argument <code>col = "director_name"</code> za specificiranje naziva novog stupca koji će nastati spajanjem, zatim navodi nazive stupaca koji se žele spojiti (director_first_name, director_last_name), te argument sep = ” ” koji definira separator koji će se umetnuti između spojenih vrijednosti. Funkcija unite() automatski kombinira vrijednosti iz specificiranih stupaca redoslijedom kojim su navedeni, stvarajući jednu koherentnu varijablu koja predstavlja punu informaciju.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Funkcija: unite()">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Funkcija: unite()
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Funkcija <code>unite()</code> koristi se za spajanje više stupaca u jedan stupac u podatkovnom okviru. Ovo je suprotna operacija od <code>separate()</code> funkcije. Funkcija može imati slijedeće argumente:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Objašnjenje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td>Podatkovni okvir na kojem se izvršava operacija spajanja stupaca.</td>
</tr>
<tr class="even">
<td><code>col</code></td>
<td>Naziv novog stupca koji će nastati spajanjem postojećih stupaca. Može se navesti kao string (u navodnicima) ili kao simbol (bez navodnika).</td>
</tr>
<tr class="odd">
<td><code>...</code></td>
<td>Stupci koji se žele spojiti.</td>
</tr>
<tr class="even">
<td><code>sep</code></td>
<td>Separator koji se umeće između vrijednosti prilikom spajanja.</td>
</tr>
<tr class="odd">
<td><code>remove</code></td>
<td>Logička vrijednost koja određuje treba li ukloniti originalne stupce iz rezultata. Zadana vrijednost je <code>TRUE</code> što znači da se originalni stupci brišu nakon spajanja. Ako postavite <code>FALSE</code>, zadržat ćete i originalne i novi spojeni stupac.</td>
</tr>
<tr class="even">
<td><code>na.rm</code></td>
<td>Logička vrijednost koja određuje treba li ukloniti nedostajuće vrijednosti (<code>NA</code>) prije spajanja. Ako je <code>TRUE</code>, <code>NA</code> vrijednosti se ignoriraju prilikom spajanja. Zadana vrijednost je <code>FALSE</code>.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>director_names_dataset_tidy <span class="ot">&lt;-</span> director_names_dataset <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="st">"director_name"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    director_first_name,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    director_last_name,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" "</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Nakon primjene <code>unite()</code> funkcije dobivamo uređeni podatkovni okvir koji sadrži četiri stupca: “rank” (rang filma), “movie” (naziv filma) i novi “director_name” (puno ime redatelja). Svaki red predstavlja jedan film s kompletnim imenom redatelja u jednom stupcu što omogućuje jednostavno sortiranje filmova prema imenima redatelja, filtriranje prema specifičnim redateljima te spajanje s drugim izvorima podataka koji koriste puna imena. Uređeni format također olakšava analize poput identifikacije najproduktivnijih redatelja, usporedbe opusa različitih redatelja ili stvaranja vizualizacija koje prikazuju distribuciju filmova prema redateljima, što bi zahtijevalo složene operacije spajanja stringova u neuredno organiziranom formatu s podijeljenim imenima.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>director_names_dataset_tidy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
    rank movie                                         director_name       
   &lt;dbl&gt; &lt;chr&gt;                                         &lt;chr&gt;               
 1     1 The Shawshank Redemption                      Frank Darabont      
 2     2 The Godfather                                 Francis Ford Coppola
 3     3 The Dark Knight                               Christopher Nolan   
 4     4 The Godfather Part II                         Francis Ford Coppola
 5     5 12 Angry Men                                  Sidney Lumet        
 6     6 The Lord of the Rings: Return of the King     Peter Jackson       
 7     7 Schindler's List                              Steven Spielberg    
 8     8 Pulp Fiction                                  Quentin Tarantino   
 9     9 Lord of the Rings: The Fellowship of the Ring Peter Jackson       
10    10 The Good, the Bad and the Ugly                Sergio Leone        </code></pre>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02_uvoz_podataka.html" class="pagination-link" aria-label="Uvoz podataka u R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Uvoz podataka u R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="References">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Uređivanje podataka"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "U ovom poglavlju objašnjava se pojam urednih podataka i njihova uloga u analitičkom procesu. Uredni podaci definirani su kao podaci kod kojih svaka varijabla čini jedan stupac, svako opažanje jedan redak, a svaka pojedina opservacija zasebnu ćeliju. Poglavlje prikazuje kako se sirovi i neuređeni podaci mogu sustavno preoblikovati u analitički prikladan format, čime se omogućuje učinkovitija analiza, modeliranje i interpretacija rezultata."</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> "#8B3A62"</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner-color:</span><span class="co"> "white"</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Aktiviranje paketa</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Učitavanje podatkovnih okvira</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>imdb_top_10_tidy_dataset <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>rank, <span class="sc">~</span>movie, <span class="sc">~</span>release_year, <span class="sc">~</span>countries_of_origin, <span class="sc">~</span>director, <span class="sc">~</span>writers, <span class="sc">~</span>stars, <span class="sc">~</span>genres, <span class="sc">~</span>language, <span class="sc">~</span>runtime, <span class="sc">~</span>colour, <span class="sc">~</span>budget,</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="dv">1994</span>, <span class="st">"United States"</span>, <span class="st">"Frank Darabont"</span>, <span class="st">"Stephen King, Frank Darabont"</span>, <span class="st">"Tim Robbins, Morgan Freeman, Bob Gunton"</span>, <span class="st">"Drama"</span>, <span class="st">"English"</span>, <span class="dv">142</span>, <span class="st">"Color"</span>, <span class="dv">25000000</span>,</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="dv">1972</span>, <span class="st">"United States"</span>, <span class="st">"Francis Ford Coppola"</span>, <span class="st">"Mario Puzo, Francis Ford Coppola"</span>, <span class="st">"Marlon Brando, Al Pacino, James Caan"</span>, <span class="st">"Crime, Drama"</span>, <span class="st">"English, Italian, Latin"</span>, <span class="dv">175</span>, <span class="st">"Color"</span>, <span class="dv">6000000</span>,</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="dv">2008</span>, <span class="st">"United States, United Kingdom"</span>, <span class="st">"Christopher Nolan"</span>, <span class="st">"Jonathan Nolan, Christopher Nolan, David S. Goyer"</span>, <span class="st">"Christian Bale, Heath Ledger, Aaron Eckhart"</span>, <span class="st">"Action, Crime, Drama, Thriller"</span>, <span class="st">"English"</span>, <span class="dv">152</span>, <span class="st">"Color"</span>, <span class="dv">185000000</span>,</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="dv">1974</span>, <span class="st">"United States"</span>, <span class="st">"Francis Ford Coppola"</span>, <span class="st">"Francis Ford Coppola, Mario Puzo"</span>, <span class="st">"Al Pacino, Robert De Niro, Robert Duvall"</span>, <span class="st">"Crime, Drama"</span>, <span class="st">"English, Italian, Spanish, Latin, Sicilian"</span>, <span class="dv">202</span>, <span class="st">"Color"</span>, <span class="dv">13000000</span>,</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="dv">1957</span>, <span class="st">"United States"</span>, <span class="st">"Sidney Lumet"</span>, <span class="st">"Reginald Rose"</span>, <span class="st">"Henry Fonda, Lee J. Cobb, Martin Balsam"</span>, <span class="st">"Crime, Drama"</span>, <span class="st">"English"</span>, <span class="dv">96</span>, <span class="st">"Black &amp; White"</span>, <span class="dv">350000</span>,</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="dv">2003</span>, <span class="st">"New Zeland, United States"</span>, <span class="st">"Peter Jackson"</span>, <span class="st">"J.R.R. Tolkien, Fran Walsh, Philippa Boyens"</span>, <span class="st">"Elijah Wood, Viggo Mortensen, Ian McKellen"</span>, <span class="st">"Adventure, Drama, Fantasy"</span>, <span class="st">"English, Quenya, Old English, Sindarin"</span>, <span class="dv">201</span>, <span class="st">"Color"</span>, <span class="dv">94000000</span>,</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="dv">1993</span>, <span class="st">"United States"</span>, <span class="st">"Steven Spielberg"</span>, <span class="st">"Thomas Keneally, Steven Zaillian"</span>, <span class="st">"Liam Neeson, Ralph Fiennes, Ben Kingsley"</span>, <span class="st">"Biography, Drama, History"</span>, <span class="st">"English, Hebrew, German, Polish, Latin"</span>, <span class="dv">195</span>, <span class="st">"Black &amp; White"</span>, <span class="dv">22000000</span>,</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="dv">1994</span>, <span class="st">"United States"</span>, <span class="st">"Quentin Tarantino"</span>, <span class="st">"Quentin Tarantino, Roger Avary"</span>, <span class="st">"John Travolta, Uma Thurman, Samuel L. Jackson"</span>, <span class="st">"Crime, Drama"</span>, <span class="st">"English, Spanish French"</span>, <span class="dv">154</span>, <span class="st">"Color"</span>, <span class="dv">8000000</span>,</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="dv">2001</span>, <span class="st">"New Zeland, United States, United Kingdom"</span>, <span class="st">"Peter Jackson"</span>, <span class="st">"J.R.R. Tolkien, Fran Walsh, Philippa Boyens"</span>, <span class="st">"Elijah Wood, Ian McKellen, Orlando Bloom"</span>, <span class="st">"Adventure, Drama, Fantasy"</span>, <span class="st">"English, Sindarin"</span>, <span class="dv">178</span>, <span class="st">"Color"</span>, <span class="dv">93000000</span>,</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="dv">1966</span>, <span class="st">"Italy, Spain, West Germany, United States"</span>, <span class="st">"Sergio Leone"</span>, <span class="st">"Luciano Vincenzoni, Sergio Leone, Agenore Incrocci"</span>, <span class="st">"Clint Eastwood, Eli Wallach, Lee Van Cleef"</span>, <span class="st">"Adventure, Drama, Western"</span>, <span class="st">"Italian, English"</span>, <span class="dv">178</span>, <span class="st">"Color"</span>, <span class="dv">1200000</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>imdb_decades <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>movie, <span class="sc">~</span><span class="st">`</span><span class="at">1950s</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1960s</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1970s</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1980s</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1990s</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2000s</span><span class="st">`</span>,</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The Shawshank Redemption"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1994</span>, <span class="cn">NA</span>,</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The Godfather"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1972</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The Dark Knight"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">2008</span>,</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The Godfather Part II"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1974</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"12 Angry Men"</span>, <span class="dv">1957</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lord of the Rings: Return of the King"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">2003</span>,</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Schindler's List"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1993</span>, <span class="cn">NA</span>,</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Pulp Fiction"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1994</span>, <span class="cn">NA</span>,</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lord of the Rings: Fellowship"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">2001</span>,</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="cn">NA</span>, <span class="dv">1966</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>imdb_top_10_long <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>rank, <span class="sc">~</span>movie, <span class="sc">~</span>attribute, <span class="sc">~</span>value,</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"release_year"</span>, <span class="st">"1994"</span>,</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States"</span>,</span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"director"</span>, <span class="st">"Frank Darabont"</span>,</span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"writers"</span>, <span class="st">"Stephen King, Frank Darabont"</span>,</span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"stars"</span>, <span class="st">"Tim Robbins, Morgan Freeman, Bob Gunton"</span>,</span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"genres"</span>, <span class="st">"Drama"</span>,</span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"language"</span>, <span class="st">"English"</span>,</span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"runtime"</span>, <span class="st">"142"</span>,</span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"budget"</span>, <span class="st">"25000000"</span>,</span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"release_year"</span>, <span class="st">"1972"</span>,</span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States"</span>,</span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"director"</span>, <span class="st">"Francis Ford Coppola"</span>,</span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"writers"</span>, <span class="st">"Mario Puzo, Francis Ford Coppola"</span>,</span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"stars"</span>, <span class="st">"Marlon Brando, Al Pacino, James Caan"</span>,</span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"genres"</span>, <span class="st">"Crime, Drama"</span>,</span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"language"</span>, <span class="st">"English, Italian, Latin"</span>,</span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"runtime"</span>, <span class="st">"175"</span>,</span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"budget"</span>, <span class="st">"6000000"</span>,</span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"release_year"</span>, <span class="st">"2008"</span>,</span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States, United Kingdom"</span>,</span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"director"</span>, <span class="st">"Christopher Nolan"</span>,</span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"writers"</span>, <span class="st">"Jonathan Nolan, Christopher Nolan, David S. Goyer"</span>,</span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"stars"</span>, <span class="st">"Christian Bale, Heath Ledger, AAron Eckhart"</span>,</span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"genres"</span>, <span class="st">"Action, Crime, Drama, Thriller"</span>,</span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"language"</span>, <span class="st">"English"</span>,</span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"runtime"</span>, <span class="st">"152"</span>,</span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"budget"</span>, <span class="st">"185000000"</span>,</span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"release_year"</span>, <span class="st">"1974"</span>,</span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States"</span>,</span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"director"</span>, <span class="st">"Francis Ford Coppola"</span>,</span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"writers"</span>, <span class="st">"Francis Ford Coppola, Mario Puzo"</span>,</span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"stars"</span>, <span class="st">"Al Pacino, Robert De Niro, Robert Duvall"</span>,</span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"genres"</span>, <span class="st">"Crime, Drama"</span>,</span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"language"</span>, <span class="st">"English, Italian, Spanish, Latin, Sicilian"</span>,</span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"runtime"</span>, <span class="st">"202"</span>,</span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"budget"</span>, <span class="st">"13000000"</span>,</span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"release_year"</span>, <span class="st">"1957"</span>,</span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States"</span>,</span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"director"</span>, <span class="st">"Sidney Lumet"</span>,</span>
<span id="cb31-102"><a href="#cb31-102" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"writers"</span>, <span class="st">"Reginald Rose"</span>,</span>
<span id="cb31-103"><a href="#cb31-103" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"stars"</span>, <span class="st">"Henry Fonda, Lee J. Cobb, Martin Balsam"</span>,</span>
<span id="cb31-104"><a href="#cb31-104" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"genres"</span>, <span class="st">"Crime, Drama"</span>,</span>
<span id="cb31-105"><a href="#cb31-105" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"language"</span>, <span class="st">"English"</span>,</span>
<span id="cb31-106"><a href="#cb31-106" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"runtime"</span>, <span class="st">"96"</span>,</span>
<span id="cb31-107"><a href="#cb31-107" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"colour"</span>, <span class="st">"Black &amp; White"</span>,</span>
<span id="cb31-108"><a href="#cb31-108" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"budget"</span>, <span class="st">"350000"</span>,</span>
<span id="cb31-109"><a href="#cb31-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-110"><a href="#cb31-110" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"release_year"</span>, <span class="st">"2003"</span>,</span>
<span id="cb31-111"><a href="#cb31-111" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"New Zeland, United States"</span>,</span>
<span id="cb31-112"><a href="#cb31-112" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"director"</span>, <span class="st">"Peter Jackson"</span>,</span>
<span id="cb31-113"><a href="#cb31-113" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"writers"</span>, <span class="st">"J.R.R. Tolkien, Fran Walsh, Philippa Boyens"</span>,</span>
<span id="cb31-114"><a href="#cb31-114" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"stars"</span>, <span class="st">"Elijah Wood, Viggo Mortensen, Ian McKellen"</span>,</span>
<span id="cb31-115"><a href="#cb31-115" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"genres"</span>, <span class="st">"Adventure, Drama, Fantasy"</span>,</span>
<span id="cb31-116"><a href="#cb31-116" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"language"</span>, <span class="st">"English, Quenya, Old English, Sindarin"</span>,</span>
<span id="cb31-117"><a href="#cb31-117" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"runtime"</span>, <span class="st">"201"</span>,</span>
<span id="cb31-118"><a href="#cb31-118" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-119"><a href="#cb31-119" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"budget"</span>, <span class="st">"94000000"</span>,</span>
<span id="cb31-120"><a href="#cb31-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-121"><a href="#cb31-121" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"release_year"</span>, <span class="st">"1993"</span>,</span>
<span id="cb31-122"><a href="#cb31-122" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States"</span>,</span>
<span id="cb31-123"><a href="#cb31-123" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"director"</span>, <span class="st">"Steven Spielberg"</span>,</span>
<span id="cb31-124"><a href="#cb31-124" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"writers"</span>, <span class="st">"Thomas Keneally, Steven Zaillian"</span>,</span>
<span id="cb31-125"><a href="#cb31-125" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"stars"</span>, <span class="st">"Liam Neeson, Ralph Fiennes, Ben Kingsley"</span>,</span>
<span id="cb31-126"><a href="#cb31-126" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"genres"</span>, <span class="st">"Biography, Drama, History"</span>,</span>
<span id="cb31-127"><a href="#cb31-127" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"language"</span>, <span class="st">"English, Hebrew, German, Polish, Latin"</span>,</span>
<span id="cb31-128"><a href="#cb31-128" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"runtime"</span>, <span class="st">"195"</span>,</span>
<span id="cb31-129"><a href="#cb31-129" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"colour"</span>, <span class="st">"Black &amp; White"</span>,</span>
<span id="cb31-130"><a href="#cb31-130" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"budget"</span>, <span class="st">"22000000"</span>,</span>
<span id="cb31-131"><a href="#cb31-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-132"><a href="#cb31-132" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"release_year"</span>, <span class="st">"1994"</span>,</span>
<span id="cb31-133"><a href="#cb31-133" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"United States"</span>,</span>
<span id="cb31-134"><a href="#cb31-134" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"director"</span>, <span class="st">"Quentin Tarantino"</span>,</span>
<span id="cb31-135"><a href="#cb31-135" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"writers"</span>, <span class="st">"Quentin Tarantino, Roger Avary"</span>,</span>
<span id="cb31-136"><a href="#cb31-136" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"stars"</span>, <span class="st">"John Travolta, Uma Thurman, Samuel L. Jackson"</span>,</span>
<span id="cb31-137"><a href="#cb31-137" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"genres"</span>, <span class="st">"Crime, Drama"</span>,</span>
<span id="cb31-138"><a href="#cb31-138" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"language"</span>, <span class="st">"English, Spanish French"</span>,</span>
<span id="cb31-139"><a href="#cb31-139" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"runtime"</span>, <span class="st">"154"</span>,</span>
<span id="cb31-140"><a href="#cb31-140" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-141"><a href="#cb31-141" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"budget"</span>, <span class="st">"8000000"</span>,</span>
<span id="cb31-142"><a href="#cb31-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-143"><a href="#cb31-143" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"release_year"</span>, <span class="st">"2001"</span>,</span>
<span id="cb31-144"><a href="#cb31-144" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"New Zeland, United States, United Kingdom"</span>,</span>
<span id="cb31-145"><a href="#cb31-145" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"director"</span>, <span class="st">"Peter Jackson"</span>,</span>
<span id="cb31-146"><a href="#cb31-146" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"writers"</span>, <span class="st">"J.R.R. Tolkien, Fran Walsh, Philippa Boyens"</span>,</span>
<span id="cb31-147"><a href="#cb31-147" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"stars"</span>, <span class="st">"Elijah Wood, Ian McKellen, Orlando Bloom"</span>,</span>
<span id="cb31-148"><a href="#cb31-148" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"genres"</span>, <span class="st">"Adventure, Drama, Fantasy"</span>,</span>
<span id="cb31-149"><a href="#cb31-149" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"language"</span>, <span class="st">"English, Sindarin"</span>,</span>
<span id="cb31-150"><a href="#cb31-150" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"runtime"</span>, <span class="st">"178"</span>,</span>
<span id="cb31-151"><a href="#cb31-151" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-152"><a href="#cb31-152" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"budget"</span>, <span class="st">"93000000"</span>,</span>
<span id="cb31-153"><a href="#cb31-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-154"><a href="#cb31-154" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"release_year"</span>, <span class="st">"1966"</span>,</span>
<span id="cb31-155"><a href="#cb31-155" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"countries_of_origin"</span>, <span class="st">"Italy, Spain, West Germany, United States"</span>,</span>
<span id="cb31-156"><a href="#cb31-156" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"director"</span>, <span class="st">"Sergio Leone"</span>,</span>
<span id="cb31-157"><a href="#cb31-157" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"writers"</span>, <span class="st">"Luciano Vincenzoni, Sergio Leone, Agenore Incrocci"</span>,</span>
<span id="cb31-158"><a href="#cb31-158" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"stars"</span>, <span class="st">"Clint Eastwood, Eli Wallach, Lee Van Cleef"</span>,</span>
<span id="cb31-159"><a href="#cb31-159" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"genres"</span>, <span class="st">"Adventure, Drama, Western"</span>,</span>
<span id="cb31-160"><a href="#cb31-160" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"language"</span>, <span class="st">"Italian, English"</span>,</span>
<span id="cb31-161"><a href="#cb31-161" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"runtime"</span>, <span class="st">"178"</span>,</span>
<span id="cb31-162"><a href="#cb31-162" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"colour"</span>, <span class="st">"Color"</span>,</span>
<span id="cb31-163"><a href="#cb31-163" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"budget"</span>, <span class="st">"1200000"</span></span>
<span id="cb31-164"><a href="#cb31-164" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-165"><a href="#cb31-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-166"><a href="#cb31-166" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-167"><a href="#cb31-167" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>rank, <span class="sc">~</span>movie, <span class="sc">~</span><span class="st">`</span><span class="at">1994_142</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1972_175</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2008_152</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1974_202</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1957_96</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2003_201</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1993_195</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1994_154</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">2001_154</span><span class="st">`</span>, <span class="sc">~</span><span class="st">`</span><span class="at">1966_178</span><span class="st">`</span>,</span>
<span id="cb31-168"><a href="#cb31-168" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>,  <span class="st">"The Shawshank Redemption"</span>,                        <span class="st">"Color"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-169"><a href="#cb31-169" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>,  <span class="st">"The Godfather"</span>,                                   <span class="cn">NA</span>, <span class="st">"Color"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-170"><a href="#cb31-170" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>,  <span class="st">"The Dark Knight"</span>,                                 <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Color"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-171"><a href="#cb31-171" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>,  <span class="st">"The Godfather Part II"</span>,                           <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Color"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-172"><a href="#cb31-172" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>,  <span class="st">"12 Angry Men"</span>,                                    <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Black &amp; White"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-173"><a href="#cb31-173" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>,  <span class="st">"The Lord of the Rings: Return of the King"</span>,       <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Color"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-174"><a href="#cb31-174" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>,  <span class="st">"Schindler's List"</span>,                                <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Black &amp; White"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-175"><a href="#cb31-175" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>,  <span class="st">"Pulp Fiction"</span>,                                    <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Color"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-176"><a href="#cb31-176" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>,  <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>,   <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Color"</span>, <span class="cn">NA</span>,</span>
<span id="cb31-177"><a href="#cb31-177" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, Bas and the Ugly"</span>,                      <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Color"</span></span>
<span id="cb31-178"><a href="#cb31-178" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-179"><a href="#cb31-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-180"><a href="#cb31-180" aria-hidden="true" tabindex="-1"></a>writers_dataset <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-181"><a href="#cb31-181" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>rank, <span class="sc">~</span>movie, <span class="sc">~</span>writer_1, <span class="sc">~</span>writer_2, <span class="sc">~</span>writer_3,</span>
<span id="cb31-182"><a href="#cb31-182" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"Stephen King"</span>, <span class="st">"Frank Darabont"</span>, <span class="cn">NA</span>,</span>
<span id="cb31-183"><a href="#cb31-183" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"Mario Puzo"</span>, <span class="st">"Francis Ford Coppola"</span>, <span class="cn">NA</span>,</span>
<span id="cb31-184"><a href="#cb31-184" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"Jonathan Nolan"</span>, <span class="st">"Christopher Nolan"</span>, <span class="st">"David S. Goyer"</span>,</span>
<span id="cb31-185"><a href="#cb31-185" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"Francis Ford Coppola"</span>, <span class="st">"Mario Puzo"</span>, <span class="cn">NA</span>,</span>
<span id="cb31-186"><a href="#cb31-186" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"Reginald Rose"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb31-187"><a href="#cb31-187" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"J.R.R. Tolkien"</span>, <span class="st">"Fran Walsh"</span>, <span class="st">"Philippa Boyens"</span>,</span>
<span id="cb31-188"><a href="#cb31-188" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"Thomas Keneally"</span>, <span class="st">"Steven Zaillian"</span>, <span class="cn">NA</span>,</span>
<span id="cb31-189"><a href="#cb31-189" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"Quentin Tarantino"</span>, <span class="st">"Roger Avary"</span>, <span class="cn">NA</span>,</span>
<span id="cb31-190"><a href="#cb31-190" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"J.R.R. Tolkien"</span>, <span class="st">"Fran Walsh"</span>, <span class="st">"Philippa Boyens"</span>,</span>
<span id="cb31-191"><a href="#cb31-191" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"Luciano Vincenzoni"</span>, <span class="st">"Sergio Leone"</span>, <span class="st">"Agenore Incrocci"</span></span>
<span id="cb31-192"><a href="#cb31-192" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-193"><a href="#cb31-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-194"><a href="#cb31-194" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-195"><a href="#cb31-195" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>rank, <span class="sc">~</span>movie, <span class="sc">~</span>director_budget,</span>
<span id="cb31-196"><a href="#cb31-196" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"Frank Darabont_25000000"</span>,</span>
<span id="cb31-197"><a href="#cb31-197" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"Francis Ford Coppola_6000000"</span>, </span>
<span id="cb31-198"><a href="#cb31-198" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"Christopher Nolan_185000000"</span>,</span>
<span id="cb31-199"><a href="#cb31-199" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"Francis Ford Coppola_13000000"</span>,</span>
<span id="cb31-200"><a href="#cb31-200" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"Sidney Lumet_350000"</span>,</span>
<span id="cb31-201"><a href="#cb31-201" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"Peter Jackson_94000000"</span>,</span>
<span id="cb31-202"><a href="#cb31-202" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"Steven Spielberg_22000000"</span>,</span>
<span id="cb31-203"><a href="#cb31-203" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"Quentin Tarantino_8000000"</span>,</span>
<span id="cb31-204"><a href="#cb31-204" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"Peter Jackson_93000000"</span>,</span>
<span id="cb31-205"><a href="#cb31-205" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"Sergio Leone_1200000"</span></span>
<span id="cb31-206"><a href="#cb31-206" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-207"><a href="#cb31-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-208"><a href="#cb31-208" aria-hidden="true" tabindex="-1"></a>director_names_dataset <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb31-209"><a href="#cb31-209" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>rank, <span class="sc">~</span>movie, <span class="sc">~</span>director_first_name, <span class="sc">~</span>director_last_name,</span>
<span id="cb31-210"><a href="#cb31-210" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"The Shawshank Redemption"</span>, <span class="st">"Frank"</span>, <span class="st">"Darabont"</span>,</span>
<span id="cb31-211"><a href="#cb31-211" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"The Godfather"</span>, <span class="st">"Francis Ford"</span>, <span class="st">"Coppola"</span>,</span>
<span id="cb31-212"><a href="#cb31-212" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">"The Dark Knight"</span>, <span class="st">"Christopher"</span>, <span class="st">"Nolan"</span>,</span>
<span id="cb31-213"><a href="#cb31-213" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="st">"The Godfather Part II"</span>, <span class="st">"Francis Ford"</span>, <span class="st">"Coppola"</span>,</span>
<span id="cb31-214"><a href="#cb31-214" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"12 Angry Men"</span>, <span class="st">"Sidney"</span>, <span class="st">"Lumet"</span>,</span>
<span id="cb31-215"><a href="#cb31-215" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="st">"The Lord of the Rings: Return of the King"</span>, <span class="st">"Peter"</span>, <span class="st">"Jackson"</span>,</span>
<span id="cb31-216"><a href="#cb31-216" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">"Schindler's List"</span>, <span class="st">"Steven"</span>, <span class="st">"Spielberg"</span>,</span>
<span id="cb31-217"><a href="#cb31-217" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="st">"Pulp Fiction"</span>, <span class="st">"Quentin"</span>, <span class="st">"Tarantino"</span>,</span>
<span id="cb31-218"><a href="#cb31-218" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="st">"Lord of the Rings: The Fellowship of the Ring"</span>, <span class="st">"Peter"</span>, <span class="st">"Jackson"</span>,</span>
<span id="cb31-219"><a href="#cb31-219" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="st">"The Good, the Bad and the Ugly"</span>, <span class="st">"Sergio"</span>, <span class="st">"Leone"</span>,</span>
<span id="cb31-220"><a href="#cb31-220" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-221"><a href="#cb31-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-222"><a href="#cb31-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-223"><a href="#cb31-223" aria-hidden="true" tabindex="-1"></a>::: {.callout-important icon=false collapse="true" title="Podaci korišteni u poglavlju"}</span>
<span id="cb31-224"><a href="#cb31-224" aria-hidden="true" tabindex="-1"></a>U ovom će poglavlju biti demonstrirani principi uređivanja podataka koristeći <span class="co">[</span><span class="ot">IMDb ljestvice 250 najboljih filmova svih vremena</span><span class="co">](https://www.imdb.com/chart/top/)</span> prikupljenih 07.09.2025. IMDb (*Internet Movie Database*) globalna je internetska baza podataka filmova, televizijskih serija i drugih audiovizualnih sadržaja koju pokreće Amazon. Ova platforma sadrži opsežne informacije o filmovima, uključujući osnovne podatke poput naziva, godine proizvodnje, žanra i trajanja kao i detaljnije informacije o glumcima, redateljima, ocjenama korisnika te različitim ljestvicama popularnosti. IMDb ljestvica 250 najboljih filmova temelji se na ocjenama milijuna korisnika diljem svijeta i predstavlja jedan od najpoznatijih popisa kvalitetnih filmova u kinematografiji. </span>
<span id="cb31-225"><a href="#cb31-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-226"><a href="#cb31-226" aria-hidden="true" tabindex="-1"></a>Za potrebe objašnjavanja različitih segmenata uređivanja podataka koristit će se samo podatci o prvih deset filmova s navedenog popisa, a što omogućuje jasniji prikaz transformacijskih procesa bez nepotrebne složenosti velikih podatkovnih skupova. Navedeni podaci oblikovani su u različite formate podatkovnih okvira kako bi se na njima mogli demonstrirati različiti aspekti uređivanja podataka pomoću <span class="in">`tidyr`</span> paketa. Kroz ove primjere bit će prikazano kako se neuredno organizirani podaci mogu transformirati u uredni format koji slijedi temeljna načela uređenih podataka.</span>
<span id="cb31-227"><a href="#cb31-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-228"><a href="#cb31-228" aria-hidden="true" tabindex="-1"></a>U poglavlju je korišteno osam podatkovnih okvira koji prikazuju iste podatke, ali su podaci u podatkovnim okvirima formirani na različite načine:</span>
<span id="cb31-229"><a href="#cb31-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-230"><a href="#cb31-230" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`imdb_top_10_tidy_dataset`</span> - uredni format podatkovnog okvira,</span>
<span id="cb31-231"><a href="#cb31-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-232"><a href="#cb31-232" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`imdb_decades`</span> - podatkovni okvir s podacima u nazivima varijabli i ćelijama,</span>
<span id="cb31-233"><a href="#cb31-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-234"><a href="#cb31-234" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`imdb_top_10_long`</span> - dugački podatkovni okvir s više redaka za isto opažanje,</span>
<span id="cb31-235"><a href="#cb31-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-236"><a href="#cb31-236" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`realise_year_runtime_dataset`</span> - podatkovni okvir s podacima u nazivima varijabli,</span>
<span id="cb31-237"><a href="#cb31-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-238"><a href="#cb31-238" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`writers_dataset`</span> - podatkovni okvir sa stupcima za pojedinog scenarista filma,</span>
<span id="cb31-239"><a href="#cb31-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-240"><a href="#cb31-240" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`imdb_combined_variables`</span> - podatkovni okvir s više vrijednosti u jednoj ćeliji,</span>
<span id="cb31-241"><a href="#cb31-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-242"><a href="#cb31-242" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`director_names_dataset`</span> - imena redatelja filmova odvojena u dva stupca.</span>
<span id="cb31-243"><a href="#cb31-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-244"><a href="#cb31-244" aria-hidden="true" tabindex="-1"></a>Podatkovni okviri sadrže do 12 mogućih varijabli koje opisuju ključne karakteristike svakog filma:</span>
<span id="cb31-245"><a href="#cb31-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-246"><a href="#cb31-246" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"rank" - rang filma na IMDb top ljestvici (numerička vrijednost od 1 do 10),</span>
<span id="cb31-247"><a href="#cb31-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-248"><a href="#cb31-248" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"movie" - naslov filma (tekstualna varijabla),</span>
<span id="cb31-249"><a href="#cb31-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-250"><a href="#cb31-250" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"release_year" - godina premijere filma (numerička vrijednost),</span>
<span id="cb31-251"><a href="#cb31-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-252"><a href="#cb31-252" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"countries_of_origin" - zemlja ili zemlje podrijetla filma (tekstualna varijabla, može sadržavati više zemalja odvojenih zarezom),</span>
<span id="cb31-253"><a href="#cb31-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-254"><a href="#cb31-254" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"director" - ime i prezime redatelja filma (tekstualna varijabla),</span>
<span id="cb31-255"><a href="#cb31-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-256"><a href="#cb31-256" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"writers" - imena i prezimena scenarista (tekstualna varijabla, može sadržavati više imena odvojena zarezom),</span>
<span id="cb31-257"><a href="#cb31-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-258"><a href="#cb31-258" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"stars" - imena i prezimena glavnih glumaca (tekstualna varijabla s više imena odvojenih zarezom),</span>
<span id="cb31-259"><a href="#cb31-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-260"><a href="#cb31-260" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"genres" - žanr ili žanrovi filma (tekstualna varijabla, može sadržavati više žanrova odvojenih zarezom),</span>
<span id="cb31-261"><a href="#cb31-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-262"><a href="#cb31-262" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"language" - jezik ili jezici na kojima se govori u filmu (tekstualna varijabla, može sadržavati više jezika odvojena zarezom),</span>
<span id="cb31-263"><a href="#cb31-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-264"><a href="#cb31-264" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"runtime" - trajanje filma u minutama (numerička vrijednost),</span>
<span id="cb31-265"><a href="#cb31-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-266"><a href="#cb31-266" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"colour" - vrsta snimanja filma (tekstualna varijabla: "Color" za filmove u boji ili "Black &amp; White" za crno-bijele filmove),</span>
<span id="cb31-267"><a href="#cb31-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-268"><a href="#cb31-268" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>"budget" - proračun filma u američkim dolarima (numerička vrijednost).</span>
<span id="cb31-269"><a href="#cb31-269" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb31-270"><a href="#cb31-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-271"><a href="#cb31-271" aria-hidden="true" tabindex="-1"></a>**Uređivanje podataka** (*data tidying*) predstavlja proces transformacije podataka iz oblika u kojem su inicijalno organizirani u konzistentan i standardiziran format koji olakšava analizu i vizualizaciju. Uređivanje podataka zapravo obuhvaća pohranjivanje podataka u konzistentnom obliku koji odgovara semantici skupa podataka s načinom na koji su pohranjeni. Ovaj je proces temeljni korak u cjelokupnom procesu analize podataka jer omogućuje lakši i efikasniji rad s podacima pomoću različitih analitičkih alata.</span>
<span id="cb31-272"><a href="#cb31-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-273"><a href="#cb31-273" aria-hidden="true" tabindex="-1"></a>Uređivanje i transformacija podataka zajedno se kolokvijalno nazivaju **hrvanje s podacima** (*data wrangling*) jer se odnose na dovođenje podataka u oblik koji je prirodan za rad, a koji često nalikuje borbi s podacima. Ova metafora dobro opisuje izazove s kojima se analitičari susreću kada trebaju pripremiti sirove podatke za analizu. Većina stvarnih podataka nije uredna što znači da će većina analiza zahtijevati barem malo uređivanja.</span>
<span id="cb31-274"><a href="#cb31-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-275"><a href="#cb31-275" aria-hidden="true" tabindex="-1"></a>Uređivanje podataka razlikuje se od općeg oblikovanja podataka (*data reshaping*) jer se fokusira na postizanje određenih standarda organizacije podataka. Glavni cilj uređivanja podataka pritom nije stvaranje vizualno privlačnih prikaza podataka, nego uspostavljanje strukture koja omogućuje efikasno korištenje analitičkih alata i funkcija.</span>
<span id="cb31-276"><a href="#cb31-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-277"><a href="#cb31-277" aria-hidden="true" tabindex="-1"></a>U procesu bavljenja s podacima, uređivanje predstavlja ključnu kariku između uvoza podataka u R i njihove analize. Drugim riječima, nakon što se podaci uvezu, nužno je njihovo uređivanje jer uređeni podaci omogućuju fokusiranje napora na odgovaranje pitanja o podacima, a ne borbu s dovođenjem podataka u odgovarajući oblik za različite funkcije. Ovaj pristup značajno smanjuje mogućnost grešaka tijekom analize, ali i povećava produktivnost analitičara u bavljenju s podacima.</span>
<span id="cb31-278"><a href="#cb31-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-279"><a href="#cb31-279" aria-hidden="true" tabindex="-1"></a>**Uredni podaci** (*tidy data*) predstavljaju konzistentan način organiziranja podataka koji se koristi kroz cijeli <span class="in">`tidyverse`</span> ekosustav, ali i općenito u R-u. Konkretnije, iste podatke moguće je predstaviti na više načina, ali nisu svi načini jednako jednostavni i praktični za korištenje.</span>
<span id="cb31-280"><a href="#cb31-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-281"><a href="#cb31-281" aria-hidden="true" tabindex="-1"></a>Postoje tri međusobno povezana pravila koja čine skup podataka urednim:</span>
<span id="cb31-282"><a href="#cb31-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-283"><a href="#cb31-283" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**svaka varijabla je stupac, a svaki stupac je varijabla**;</span>
<span id="cb31-284"><a href="#cb31-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-285"><a href="#cb31-285" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**svako opažanje je redak, a svaki redak je opažanje**;</span>
<span id="cb31-286"><a href="#cb31-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-287"><a href="#cb31-287" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**svaka vrijednost je ćelija, a svaka ćelija je jedna vrijednost**.</span>
<span id="cb31-288"><a href="#cb31-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-289"><a href="#cb31-289" aria-hidden="true" tabindex="-1"></a>Segmenti podataka u podatkovnom okviru raspoređeni su kroz varijable, opažanja i pojedine vrijednosti. **Varijabla** predstavlja svojstvo ili karakteristiku koja se mjeri i koja može poprimiti različite vrijednosti. U kontekstu filmskih podataka, varijable mogu biti naziv filma, godina premijere, žanr ili trajanje filma. U urednim podatkovnim okvirima one su raspoređene u stupcima podatkovnih okvira. To znači da svaki stupac u podatkovnom okviru predstavlja jednu vrstu informacije koju želimo pratiti. Primjerice, ako nas zanimaju informacije o nekim filmovima, varijable mogu biti "movie" u kojoj se nalaze nazivi filmova, "realise_year" u kojoj se nalaze godine kada je film premijerno prikazan, "runtime" u kojoj se nalazi trajanje filma, "director" u kojoj se nalazi ime redatelja itd. Svaki od ovih stupaca pritom mora sadržavati samo jedan tip podataka - varijabla "movie" samo nazive filmova, a varijabla "runtime" samo godine. **Opažanje** predstavlja jedan slučaj ili jedinicu analize za koju prikupljamo podatke o različitim varijablama. U urednim podatkovnim okvirima opažanja su pojedini redci u tablici koji pripadaju jednoj jedinici analize (npr. jednom ispitaniku, kućanstvu, državi itd.) i sadrži vrijednosti niza varijabli koje opisuju tu jedinicu. Dok varijable predstavljaju svojstva, opažanja su konkretne realizacije tih svojstava za svaku jedinicu. U primjeru filmova svaki red predstavlja po jedan film koji je po jedno opažanje. **Vrijednost** je sadržaj jedne ćelije na sjecištu određene varijable i opažanja. Ona predstavlja jednu mjeru jedne varijable za jednu jedinicu i ne bi smjela sadržavati više informacija spojenih u istu ćeliju. U tehničkom smislu pojedinačna vrijednost je vrijednost određenog tipa podataka (npr. broj, logička vrijednost, znakovni niz, datum, vrijeme, faktor ili nedostajuća vrijednost). Na primjer, vrijednost koja prikazuje varijablu "realise_year" za opažanje "The Shawshak Redemption" je "1994", a vrijednost koja prikazuje varijablu "director" za opažanje "The Lord of the Rings: The Return of the King" je "Peter Jackson".</span>
<span id="cb31-290"><a href="#cb31-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-291"><a href="#cb31-291" aria-hidden="true" tabindex="-1"></a>Primjer jednog urednog podatkovnog okvira je <span class="in">`imdb_top_10_tidy_dataset`</span> koji prikazuje top 10 filmova prema IMDb ljestvici u kojem je svaki redak jedno je opažanje, odnosno jedan film, a svaki stupac pojedino obilježje filma, odnosno varijabla koja prikazuju naziv, godinu izdanja, glumce, redatelje i ostale informacije o filmovima.</span>
<span id="cb31-292"><a href="#cb31-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-295"><a href="#cb31-295" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-296"><a href="#cb31-296" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb31-297"><a href="#cb31-297" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(imdb_top_10_tidy_dataset)</span>
<span id="cb31-298"><a href="#cb31-298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-299"><a href="#cb31-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-300"><a href="#cb31-300" aria-hidden="true" tabindex="-1"></a>Uredna struktura podataka je važna jer čini podatke kompatibilnima s R-ovim vektoriziranim pristupom i omogućuje direktnu upotrebu funkcija kao što su <span class="in">`filter()`</span>, <span class="in">`group_by()`</span>, <span class="in">`summarise()`</span> i <span class="in">`ggplot()`</span> bez dodatnih transformacija podataka. Kada su podatci uredni, moguće je direktno filtrirati podatke po bilo kojoj varijabli, grupirati podatke po kategorijama i kreirati vizualizacije bez složenih priprema. Ako su podaci neuredni, onda je provođenje svih ovih postupaka uvelike otežano.</span>
<span id="cb31-301"><a href="#cb31-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-302"><a href="#cb31-302" aria-hidden="true" tabindex="-1"></a><span class="fu">## Format podataka u R-u</span></span>
<span id="cb31-303"><a href="#cb31-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-304"><a href="#cb31-304" aria-hidden="true" tabindex="-1"></a>Isti temeljni podaci mogu se organizirati u različite formate, a dva najčešća su dugački (*long*) i široki (*wide*) format. Primjena ova dva formata ključno je za efikasno uređivanje podataka jer različite analize i vizualizacije zahtijevaju različite formate podataka.</span>
<span id="cb31-305"><a href="#cb31-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-306"><a href="#cb31-306" aria-hidden="true" tabindex="-1"></a>**Dugački format** karakteriziran je time što se sve vrijednosti jedne varijable nalaze u jednom stupcu. Ovaj format rezultira podatkovnim okvirom s više redaka, ali manjim brojem stupaca. Svaki red predstavlja jedno opažanje, a svaki stupac predstavlja jednu varijablu. Dugački format prirodniji je za analizu podataka jer slijedi temeljna načela urednih podataka. U ovom formatu lakše je provoditi grupne operacije, stvarati vizualizacije i primjenjivati statističke funkcije. Koristeći isti primjer filmskih ocjena, dugački format imao bi stupce "movie", "year" i "runtime" gdje bi svaki red predstavljao jednu kombinaciju filma i godine s odgovarajućim vremenom trajanja.</span>
<span id="cb31-307"><a href="#cb31-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-308"><a href="#cb31-308" aria-hidden="true" tabindex="-1"></a>Primjer jednog takvog podatkovnog okvira je <span class="in">`imdb_top_10_long`</span>. Podaci su organizirani u dugom obliku s četiri stupca: "rank", "movie", "attribute" i "value". Stupci "rank" i "movie" čine identifikator svakog filma, a za svaki film postoji po više redaka, odnosno po jedan redak za svako obilježje koje je zapisano u varijabli "attribute". Naziv obilježja pritom stoji u varijabli "attribute", dok se sama vrijednost obilježja nalazi u varijabli "value". Time jedan film zauzima otprilike deset redaka (jedan po atributu), umjesto jednog širokog retka s mnogo stupaca.</span>
<span id="cb31-309"><a href="#cb31-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-312"><a href="#cb31-312" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-313"><a href="#cb31-313" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb31-314"><a href="#cb31-314" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(imdb_top_10_long)</span>
<span id="cb31-315"><a href="#cb31-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-316"><a href="#cb31-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-317"><a href="#cb31-317" aria-hidden="true" tabindex="-1"></a>Ovakav dugački format preferira se za vizualizacije pomoću <span class="in">`ggplot2`</span> paketa, grupne analize i sažimanja podataka, primjenu većine <span class="in">`dplyr`</span> funkcija i modeliranje podataka. Ipak, široki format karakteriziran je time što se vrijednosti jedne varijable protežu kroz više stupaca. U ovom formatu, podatkovni okvir ima manji broj redaka, ali veći broj stupaca. Imena stupaca često sadrže vrijednosti varijabli umjesto naziva varijabli. Široki format često je prirodniji za unos podataka i čovjeku je lakši za čitanje jer se podaci prezentiraju u kompaktnom obliku. Međutim, ovaj format može otežati analizu jer jedna varijabla nije sadržana u jednom stupcu što krši temeljna načela urednih podataka.</span>
<span id="cb31-318"><a href="#cb31-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-319"><a href="#cb31-319" aria-hidden="true" tabindex="-1"></a>Primjer takvog podatkovnog okvira bio bi <span class="in">`imdb_decades`</span>. U tom podatkovnom okviru svaki redak predstavlja po jedan film, svaki stupac pojedino desetljeće, a u ćelijama nalazi godina premijere filma u pojedinom desetljeću u kojem je film nastao, odnosno <span class="in">`NA`</span> ako film nije nastao u tom desetljeću.</span>
<span id="cb31-320"><a href="#cb31-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-323"><a href="#cb31-323" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-324"><a href="#cb31-324" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb31-325"><a href="#cb31-325" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(imdb_decades)</span>
<span id="cb31-326"><a href="#cb31-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-327"><a href="#cb31-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-328"><a href="#cb31-328" aria-hidden="true" tabindex="-1"></a>Ovaj podatkovni okvir je problematičan jer krši načela urednih podataka, odnosno desetljeća koje su vrijednosti postavljene su kao nazivi stupaca umjesto da budu u ćelijama pojedinih varijabli. To rezultira s puno nepotrebnih <span class="in">`NA`</span> vrijednosti i otežava analizu jer nije moguće jednostavno filtrirati filmove po godini ili desetljeću. Umjesto šest stupaca za desetljeća, bolji format podataka bio bi onaj u kojem su dva stupca, jedan za desetljeće i jedan za godinu.</span>
<span id="cb31-329"><a href="#cb31-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-330"><a href="#cb31-330" aria-hidden="true" tabindex="-1"></a>Široki format može biti korisniji za:</span>
<span id="cb31-331"><a href="#cb31-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-332"><a href="#cb31-332" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>prikazivanje podataka u tablicama za čovjeka,</span>
<span id="cb31-333"><a href="#cb31-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-334"><a href="#cb31-334" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>određene statističke analize koje zahtijevaju matricijski oblik,</span>
<span id="cb31-335"><a href="#cb31-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-336"><a href="#cb31-336" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>kreiranje pivot tablica i</span>
<span id="cb31-337"><a href="#cb31-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-338"><a href="#cb31-338" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>izvoz podataka za druge aplikacije.</span>
<span id="cb31-339"><a href="#cb31-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-340"><a href="#cb31-340" aria-hidden="true" tabindex="-1"></a>::: {layout-ncol="2"}</span>
<span id="cb31-341"><a href="#cb31-341" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> ID  <span class="pp">|</span> A   <span class="pp">|</span> B   <span class="pp">|</span> C   <span class="pp">|</span></span>
<span id="cb31-342"><a href="#cb31-342" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----|-----|-----|-----|</span></span>
<span id="cb31-343"><a href="#cb31-343" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 1   <span class="pp">|</span> 10  <span class="pp">|</span> 20  <span class="pp">|</span> 30  <span class="pp">|</span></span>
<span id="cb31-344"><a href="#cb31-344" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2   <span class="pp">|</span> 40  <span class="pp">|</span> 50  <span class="pp">|</span> 60  <span class="pp">|</span></span>
<span id="cb31-345"><a href="#cb31-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-346"><a href="#cb31-346" aria-hidden="true" tabindex="-1"></a>: Široki format {#tbl-siroki}</span>
<span id="cb31-347"><a href="#cb31-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-348"><a href="#cb31-348" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> ID  <span class="pp">|</span> name <span class="pp">|</span> value <span class="pp">|</span></span>
<span id="cb31-349"><a href="#cb31-349" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----|------|-------|</span></span>
<span id="cb31-350"><a href="#cb31-350" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 1   <span class="pp">|</span> A    <span class="pp">|</span> 10    <span class="pp">|</span></span>
<span id="cb31-351"><a href="#cb31-351" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 1   <span class="pp">|</span> B    <span class="pp">|</span> 20    <span class="pp">|</span></span>
<span id="cb31-352"><a href="#cb31-352" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 1   <span class="pp">|</span> C    <span class="pp">|</span> 30    <span class="pp">|</span></span>
<span id="cb31-353"><a href="#cb31-353" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2   <span class="pp">|</span> A    <span class="pp">|</span> 40    <span class="pp">|</span></span>
<span id="cb31-354"><a href="#cb31-354" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2   <span class="pp">|</span> B    <span class="pp">|</span> 50    <span class="pp">|</span></span>
<span id="cb31-355"><a href="#cb31-355" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2   <span class="pp">|</span> C    <span class="pp">|</span> 60    <span class="pp">|</span></span>
<span id="cb31-356"><a href="#cb31-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-357"><a href="#cb31-357" aria-hidden="true" tabindex="-1"></a>: Dugački format {#tbl-dugacki}</span>
<span id="cb31-358"><a href="#cb31-358" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb31-359"><a href="#cb31-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-360"><a href="#cb31-360" aria-hidden="true" tabindex="-1"></a>Pritom je važno naglasiti da nijedan od ova dva formata nije inherentno uredan ili neuredan, nego to ovisi o tome što stupci, retci i ćelije predstavljaju u kontekstu podataka. Dugački format je općenito bolji za analizu podataka jer funkcije poput <span class="in">`dplyr`</span> paketa prirodno rade s jednim stupcem vrijednosti, a <span class="in">`ggplot2`</span> paket je dizajniran za dugački format jer mapira estetike na stupce. Također, u dugačkom je formatu lakše dodavati nova vremenska razdoblja ili kategorije jer se jednostavno dodaju novi redovi umjesto novih stupaca. Široki format je bolji za prezentaciju i izvještaje jer je ljudima prirodnije čitati podatke kada su povezane vrijednosti prikazane horizontalno kao stupci, kao i za matrične operacije poput korelacijske analize ili unos podataka jer odražava način kako ljudi razmišljaju o podacima. Općenito pravilo je koristiti dugački format za analize i vizualizacije, a široki za prikaz rezultata.</span>
<span id="cb31-361"><a href="#cb31-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-362"><a href="#cb31-362" aria-hidden="true" tabindex="-1"></a><span class="fu">## Uređivanje neurednih podataka</span></span>
<span id="cb31-363"><a href="#cb31-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-364"><a href="#cb31-364" aria-hidden="true" tabindex="-1"></a>Kada podaci u podatkovnom okviru ne ispunjavaju tri navedena uvjeta o urednim podacima, onda te podatke nazivamo **neurednim podacima** te je bilo kakav rad na podacima otežan. Postoje različiti mogući oblici neurednih podataka, odnosno različiti načini na koji podaci u podatkovnom okviru mogu biti posloženi, a koji otežavaju daljnji rad na podacima. Pritom uređivanje uključuje produljenje i proširenje podataka. Produljenje podataka uključuje pretvaranje širokih podatkovnih okvira u oblik koji ima više redaka, a manje stupaca. Suprotno, proširenje podataka uključuje pretvaranje dugih tablica u širok oblik koji ima manje redaka i više stupaca.</span>
<span id="cb31-365"><a href="#cb31-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-366"><a href="#cb31-366" aria-hidden="true" tabindex="-1"></a>Za uređivanje podataka u R-u najčešće se koriste dvije funkcije iz <span class="in">`tidyr`</span> paketa, <span class="in">`pivot_longer()`</span> za produljivanje i <span class="in">`pivot_wider()`</span> za proširivanje. <span class="in">`pivot_longer()`</span> pretvara široku tablicu u dugu, odnosno više stupaca prenosi u dva stupca — jedan s imenom varijable i jedan s vrijednošću. Rezultat je više redaka i manje stupaca. <span class="in">`pivot_wider()`</span> radi suprotno, iz duge tablice (u kojoj postoji stupac s imenima varijabli i stupac s vrijednostima) stvara široku tako da različite vrijednosti iz stupca s imenima postanu novi stupci. Rezultat je manje redaka, a više stupaca. Osim ove dvije funkcije, <span class="in">`tidyr`</span> paket sadrži još neke funkcije koje pomažu uređivanje podataka, a od kojih će neke biti navedene i u nastavku.</span>
<span id="cb31-367"><a href="#cb31-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-368"><a href="#cb31-368" aria-hidden="true" tabindex="-1"></a><span class="fu">### Rješavanje problema neurednih podataka</span></span>
<span id="cb31-369"><a href="#cb31-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-370"><a href="#cb31-370" aria-hidden="true" tabindex="-1"></a>Može se pojaviti više oblika konstrukcije podataka, odnosno neurednih podatkovnih okvira koje je potrebno urediti, odnosno proširiti ili produžiti.</span>
<span id="cb31-371"><a href="#cb31-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-372"><a href="#cb31-372" aria-hidden="true" tabindex="-1"></a>**1. Nazivi varijabli kao vrijednosti**</span>
<span id="cb31-373"><a href="#cb31-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-374"><a href="#cb31-374" aria-hidden="true" tabindex="-1"></a>Čest problem koji se susreće kod neuredno organiziranih podataka nastaje kada nazivi stupaca ne predstavljaju nazive varijabli, već vrijednosti neke varijable. Ovaj tip neuredno organiziranih podataka krši temeljna načela urednih podataka jer se vrijednosti jedne varijable nalaze u nazivima stupaca umjesto u jednom stupcu. Takav oblik podataka čini ih teškima za analizu jer funkcije u R-u očekuju da se vrijednosti varijabli nalaze u stupcima, a ne u njihovim nazivima.</span>
<span id="cb31-375"><a href="#cb31-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-376"><a href="#cb31-376" aria-hidden="true" tabindex="-1"></a>Primjer takvih neurednih podataka je podatkovni okvir <span class="in">`imdb_decades`</span> u kojem su nazivi stupaca "1950s", "1960s", "1970s", "1980s", "1990s" i "2000s", a koji predstavljaju vrijednosti varijable "decade", a ne nazive varijabli. Stupac "movie" sadrži nazive filmova, dok ćelije sadrže godinu premijere filma ako film pripada određenom desetljeću, odnosno <span class="in">`NA`</span> ako ne pripada. Ovaj oblik podataka ima široki format gdje se informacije o godini proizvodnje filma protežu kroz više stupaca, a većina ćelija sadrži nedostajuće vrijednosti (<span class="in">`NA`</span>).</span>
<span id="cb31-377"><a href="#cb31-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-380"><a href="#cb31-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-381"><a href="#cb31-381" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb31-382"><a href="#cb31-382" aria-hidden="true" tabindex="-1"></a>imdb_decades</span>
<span id="cb31-383"><a href="#cb31-383" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-384"><a href="#cb31-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-385"><a href="#cb31-385" aria-hidden="true" tabindex="-1"></a>Problem se rješava pomoću funkcije <span class="in">`pivot_longer()`</span> koja pretvara široke podatke u dugačke. Funkcija omogućuje specificiranje stupaca koji se trebaju pivotirati pomoću argumenta <span class="in">`cols`</span>, naziv nove varijable koja će sadržavati nazive stupaca pomoću argumenta <span class="in">`names_to`</span> te naziv varijable koja će sadržavati vrijednosti iz ćelija pomoću argumenta <span class="in">`values_to`</span>. Dodatno, argument <span class="in">`values_drop_na = TRUE`</span> može se koristiti za uklanjanje redova s nedostajućim vrijednostima koji ne predstavljaju stvarna opažanja.</span>
<span id="cb31-386"><a href="#cb31-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-387"><a href="#cb31-387" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon=false collapse="true" title="Funkcija: pivot_longer()"}</span>
<span id="cb31-388"><a href="#cb31-388" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`pivot_longer()`</span> dio je <span class="in">`tidyr`</span> paketa koja produžuje podatke povećavajući broj njihovih redaka i smanjujući broj stupaca.</span>
<span id="cb31-389"><a href="#cb31-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-390"><a href="#cb31-390" aria-hidden="true" tabindex="-1"></a>Funkcija može imati slijedeće argumente:</span>
<span id="cb31-391"><a href="#cb31-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-392"><a href="#cb31-392" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Argument <span class="pp">|</span> Objašnjenje <span class="pp">|</span></span>
<span id="cb31-393"><a href="#cb31-393" aria-hidden="true" tabindex="-1"></a><span class="pp">|---|---|</span></span>
<span id="cb31-394"><a href="#cb31-394" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`data`</span> <span class="pp">|</span> Podatkovni okvir u širokom format. <span class="pp">|</span></span>
<span id="cb31-395"><a href="#cb31-395" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`cols`</span> <span class="pp">|</span> Određuje koji se stupci pretvaraju u dugi oblik. <span class="pp">|</span></span>
<span id="cb31-396"><a href="#cb31-396" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`cols_vary`</span> <span class="pp">|</span> Određuje redoslijed “slaganja” vrijednosti kada ih R raspoređuje u duži oblik. Može biti <span class="in">`fastest`</span> (zadano) čime se najbrže mijenja stupac (vrijednosti se slažu “po stupcima”) i <span class="in">`slowest`</span> čime se najsporije mijenja stupac (vrijednosti se slažu “po redovima”). <span class="pp">|</span></span>
<span id="cb31-397"><a href="#cb31-397" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_to`</span> <span class="pp">|</span> Naziv ili nazivi novih stupaca koji će sadržavati nazive starih stupaca. <span class="pp">|</span></span>
<span id="cb31-398"><a href="#cb31-398" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_prefix`</span> <span class="pp">|</span> Niz koji će se ukloniti iz naziva stupaca prije nego što se oni stave u <span class="in">`names_to`</span>. <span class="pp">|</span></span>
<span id="cb31-399"><a href="#cb31-399" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_sep`</span> <span class="pp">|</span> Koristi se kada u <span class="in">`names_to`</span> kako bi se njime definirlo koji se razdjelnik koristiti za razbijanje naziva. <span class="pp">|</span></span>
<span id="cb31-400"><a href="#cb31-400" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_pattern`</span> <span class="pp">|</span> Alternativa <span class="in">`names_sep`</span>, ali koristi regularne izraze za razbijanje naziva. <span class="pp">|</span></span>
<span id="cb31-401"><a href="#cb31-401" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_ptypes`</span> <span class="pp">|</span> Dopušta da zadamo tip podataka za stupac ili stupce kreirane u <span class="in">`names_to`</span>. <span class="pp">|</span></span>
<span id="cb31-402"><a href="#cb31-402" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_transform`</span> <span class="pp">|</span> Funkcija ili lista funkcija koje se primjenjuju na stupce iz <span class="in">`names_to`</span>. <span class="pp">|</span></span>
<span id="cb31-403"><a href="#cb31-403" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_repair`</span> <span class="pp">|</span> Što učiniti ako se u novim imenima stupaca pojave duplikati (zadano je <span class="in">`check_unique`</span> koji javlja grešku ako nisu jedinstveni. <span class="pp">|</span></span>
<span id="cb31-404"><a href="#cb31-404" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_to`</span> <span class="pp">|</span> Ime novog stupca u koji idu vrijednosti skupljenih stupaca. <span class="pp">|</span></span>
<span id="cb31-405"><a href="#cb31-405" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_drop_na`</span> <span class="pp">|</span> Ako je <span class="in">`TRUE`</span>, brišu se redci u kojima su vrijednosti <span class="in">`NA`</span> u stupcu <span class="in">`values_to`</span>. <span class="pp">|</span></span>
<span id="cb31-406"><a href="#cb31-406" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_ptypes`</span> <span class="pp">|</span> Kao i <span class="in">`names_ptypes`</span>, ali za stupac <span class="in">`values_to`</span>. <span class="pp">|</span></span>
<span id="cb31-407"><a href="#cb31-407" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_transform`</span> <span class="pp">|</span> Funkcija ili lista funkcija za transformaciju vrijednosti. <span class="pp">|</span></span>
<span id="cb31-408"><a href="#cb31-408" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb31-409"><a href="#cb31-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-412"><a href="#cb31-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-413"><a href="#cb31-413" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb31-414"><a href="#cb31-414" aria-hidden="true" tabindex="-1"></a>imdb_decades_tidy <span class="ot">&lt;-</span> imdb_decades <span class="sc">|&gt;</span></span>
<span id="cb31-415"><a href="#cb31-415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb31-416"><a href="#cb31-416" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"19"</span>, <span class="st">"20"</span>)),</span>
<span id="cb31-417"><a href="#cb31-417" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"decade"</span>,</span>
<span id="cb31-418"><a href="#cb31-418" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"year"</span>,</span>
<span id="cb31-419"><a href="#cb31-419" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb31-420"><a href="#cb31-420" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-421"><a href="#cb31-421" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-422"><a href="#cb31-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-423"><a href="#cb31-423" aria-hidden="true" tabindex="-1"></a>Nakon primjene <span class="in">`pivot_longer()`</span> funkcije, dobivamo uređeni podatkovni okvir koji sadrži tri stupca: "movie" (naziv filma), "decade" (desetljeće) i "year" (godina premijere). Svaki red predstavlja jedno opažanje - kombinaciju filma i desetljeća s odgovarajućom godinom premijere. Uređeni format omogućuje lakše grupiranje podataka po desetljećima, izračunavanje sažetaka te stvaranje vizualizacija što bi bilo komplicirano ili nemoguće u neuredno organiziranom širom formatu.</span>
<span id="cb31-424"><a href="#cb31-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-427"><a href="#cb31-427" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-428"><a href="#cb31-428" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb31-429"><a href="#cb31-429" aria-hidden="true" tabindex="-1"></a>imdb_decades_tidy</span>
<span id="cb31-430"><a href="#cb31-430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-431"><a href="#cb31-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-432"><a href="#cb31-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-433"><a href="#cb31-433" aria-hidden="true" tabindex="-1"></a>**2. Više varijabli u nazivima stupaca**</span>
<span id="cb31-434"><a href="#cb31-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-435"><a href="#cb31-435" aria-hidden="true" tabindex="-1"></a>Složeniji oblik neurednih podataka nastaje kada se u nazivima stupaca nalazi više dijelova informacije odvojenih određenim separatorom pri čemu svaki dio predstavlja vrijednost različite varijable. Ovaj tip neuredno organiziranih podataka predstavlja naprednu verziju prethodnog problema jer ne sadrži samo jednu varijablu u nazivima stupaca, nego kombinaciju nekoliko varijabli. Takva organizacija podataka otežava analizu jer se vrijednosti više varijabli nalaze pomiješane u nazivima stupaca umjesto da svaka varijabla ima svoj vlastiti stupac.</span>
<span id="cb31-436"><a href="#cb31-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-437"><a href="#cb31-437" aria-hidden="true" tabindex="-1"></a>Primjer takvih podataka je <span class="in">`realise_year_runtime_dataset`</span>. Kod tih podataka nazivi stupaca poput "1994_142", "1972_175", "2008_152" i drugi sadrže dvije različite informacije odvojene podvlakom, godinu premijere filma i trajanje filma. Stupci "rank" i "movie" predstavljaju identifikacijske varijable, dok ćelije sadrže informaciju o tome je li film u boji ("Color") ili crno-bijeli ("Black &amp; White"), s <span class="in">`NA`</span> vrijednostima za kombinacije koje ne odgovaraju određenom filmu. Ovaj oblik podataka ima izrazito široki format gdje se tri različite varijable (godina, trajanje i tip fotografije) nalaze raspršene kroz nazive stupaca i vrijednosti ćelija.</span>
<span id="cb31-438"><a href="#cb31-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-441"><a href="#cb31-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-442"><a href="#cb31-442" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb31-443"><a href="#cb31-443" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset</span>
<span id="cb31-444"><a href="#cb31-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-445"><a href="#cb31-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-446"><a href="#cb31-446" aria-hidden="true" tabindex="-1"></a>Problem se rješava pomoću funkcije <span class="in">`pivot_longer()`</span> s dodatnim argumentima za razdvajanje složenih naziva stupaca. Ključni argument <span class="in">`names_to`</span> prima vektor naziva novih varijabli koje će nastati razdvajanjem naziva stupaca, dok argument <span class="in">`names_sep`</span> specificira separator koji razdvaja različite dijelove naziva stupaca. U ovom slučaju, <span class="in">`names_to = c("year", "runtime")`</span> stvara dvije nove varijable, a <span class="in">`names_sep = "_"`</span> specificira da se nazivi stupaca dijele po podvlaci. Argument <span class="in">`values_drop_na = TRUE`</span> uklanja redove s nedostajućim vrijednostima koji predstavljaju umjetno stvorene kombinacije.</span>
<span id="cb31-447"><a href="#cb31-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-450"><a href="#cb31-450" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-451"><a href="#cb31-451" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb31-452"><a href="#cb31-452" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset_tidy <span class="ot">&lt;-</span> realise_year_runtime_dataset <span class="sc">|&gt;</span></span>
<span id="cb31-453"><a href="#cb31-453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb31-454"><a href="#cb31-454" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(rank, movie),</span>
<span id="cb31-455"><a href="#cb31-455" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"runtime"</span>),</span>
<span id="cb31-456"><a href="#cb31-456" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span>,</span>
<span id="cb31-457"><a href="#cb31-457" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span>,</span>
<span id="cb31-458"><a href="#cb31-458" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb31-459"><a href="#cb31-459" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-460"><a href="#cb31-460" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-461"><a href="#cb31-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-462"><a href="#cb31-462" aria-hidden="true" tabindex="-1"></a>Nakon primjene <span class="in">`pivot_longer()`</span> funkcije s odgovarajućim argumentima, dobivamo uređeni podatkovni okvir koji sadrži pet stupaca: "rank" (rang filma), "movie" (naziv filma), "year" (godina proizvodnje), "runtime" (trajanje u minutama) i "value" (tip fotografije). Svaki red predstavlja jedno opažanje - jedan film s njegovim karakteristikama. Uređeni format omogućuje direktno grupiranje po godini ili trajanju filma, izračunavanje statističkih pokazatelja te stvaranje složenih vizualizacija koje analiziraju povezanost između godine proizvodnje, trajanja i tipa fotografije, što bi bilo praktički nemoguće u neuredno organiziranom formatu.</span>
<span id="cb31-463"><a href="#cb31-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-466"><a href="#cb31-466" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-467"><a href="#cb31-467" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb31-468"><a href="#cb31-468" aria-hidden="true" tabindex="-1"></a>realise_year_runtime_dataset_tidy</span>
<span id="cb31-469"><a href="#cb31-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-470"><a href="#cb31-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-471"><a href="#cb31-471" aria-hidden="true" tabindex="-1"></a>**3. Varijable pohranjene u redovima**</span>
<span id="cb31-472"><a href="#cb31-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-473"><a href="#cb31-473" aria-hidden="true" tabindex="-1"></a>Varijable pohranjene u redovima predstavljaju obrnuti problem od prethodnih slučajeva neuredno organiziranih podataka. U ovom obliku neurednih podataka, ono što bi trebale biti varijable nalazi se u redovima, dok se vrijednosti tih varijabli nalaze u drugom stupcu. Ovakav oblik podataka rezultira pretjerano dugačkim formatom gdje se jedno opažanje proteže kroz više redova umjesto da bude sadržano u jednom redu. Ova organizacija čini podatke teškima za analizu jer krši temeljna načela urednih podataka prema kojima svaki red treba predstavljati jedno opažanje.</span>
<span id="cb31-474"><a href="#cb31-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-475"><a href="#cb31-475" aria-hidden="true" tabindex="-1"></a>U primjeru podatkovnog okvira <span class="in">`imdb_top_10_long`</span>, svaki film (opažanje) predstavljen je kroz više redova, pri čemu stupac "attribute" sadrži nazive varijabli poput "release_year", "director", "genres", "runtime" i ostale, dok stupac "value" sadrži odgovarajuće vrijednosti tih varijabli. Na primjer, film "The Shawshank Redemption" prikazan je kroz deset redova, po jedan za svaku karakteristiku filma. Ovakav format rezultira podatkovnim okvirom s 100 redova (10 filmova × 10 atributa) umjesto očekivanih 10 redova za 10 filmova.</span>
<span id="cb31-476"><a href="#cb31-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-479"><a href="#cb31-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-480"><a href="#cb31-480" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb31-481"><a href="#cb31-481" aria-hidden="true" tabindex="-1"></a>imdb_top_10_long</span>
<span id="cb31-482"><a href="#cb31-482" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-483"><a href="#cb31-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-484"><a href="#cb31-484" aria-hidden="true" tabindex="-1"></a>Problem se rješava pomoću funkcije <span class="in">`pivot_wider()`</span> iz <span class="in">`tidyr`</span> paketa koja pretvara dugačke podatke u široke. Funkcija koristi argument <span class="in">`names_from`</span> za specificiranje stupca koji sadrži nazive budućih varijabli (u ovom slučaju stupac "attribute") te argument <span class="in">`values_from`</span> za specificiranje stupca koji sadrži vrijednosti tih varijabli (stupac "value"). Funkcija <span class="in">`pivot_wider()`</span> automatski grupira podatke prema svim stupcima koji nisu specificirani u <span class="in">`names_from`</span> i <span class="in">`values_from`</span> argumentima što znači da će se podaci grupirati po "rank" i "movie" stupcima.</span>
<span id="cb31-485"><a href="#cb31-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-486"><a href="#cb31-486" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon=false collapse="true" title="Funkcija: pivot_wider()"}</span>
<span id="cb31-487"><a href="#cb31-487" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`pivot_wider()`</span> dio je <span class="in">`tidyr`</span> paketa koja produžuje podatke smanjujući njihov broj redaka i povećavajući broj stupaca. Funkcija može imati slijedeće argumente:</span>
<span id="cb31-488"><a href="#cb31-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-489"><a href="#cb31-489" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Argument <span class="pp">|</span> Objašnjenje <span class="pp">|</span></span>
<span id="cb31-490"><a href="#cb31-490" aria-hidden="true" tabindex="-1"></a><span class="pp">|---|---|</span></span>
<span id="cb31-491"><a href="#cb31-491" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`data`</span> <span class="pp">|</span> Podatkovni okvir u dugom formatu. <span class="pp">|</span></span>
<span id="cb31-492"><a href="#cb31-492" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`id_cols`</span> <span class="pp">|</span> Stupci koji se koriste kao identifikatori opservacija, a koji ostaju kao redovi. <span class="pp">|</span></span>
<span id="cb31-493"><a href="#cb31-493" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`id_expand`</span> <span class="pp">|</span> Ako je TRUE, onda se stvara puni “cross-join” identifikatora i vrijednosti u <span class="in">`names_from`</span>. Koristi se kada želimo dobiti sve moguće kombinacije, a ne samo postojeće. <span class="pp">|</span></span>
<span id="cb31-494"><a href="#cb31-494" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_from`</span> <span class="pp">|</span> Stupac ili stupci čije se vrijednosti koriste za nazive novih stupaca. <span class="pp">|</span></span>
<span id="cb31-495"><a href="#cb31-495" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_prefix`</span> <span class="pp">|</span> Dodaje prefiks na nazive stupaca. <span class="pp">|</span></span>
<span id="cb31-496"><a href="#cb31-496" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_sep`</span> <span class="pp">|</span> Razdjelnik koji se koristi ako imamo više varijabli u <span class="in">`names_from`</span> (zadano je "_"). <span class="pp">|</span></span>
<span id="cb31-497"><a href="#cb31-497" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_glue`</span> <span class="pp">|</span> Omogućuje korištenje glue sintakse za definiranje imena stupaca. <span class="pp">|</span></span>
<span id="cb31-498"><a href="#cb31-498" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_sort`</span> <span class="pp">|</span> Ako je TRUE, onda će novi stupci biti sortirani po abecedi. Inače redoslijed ostaje kao u podacima. <span class="pp">|</span></span>
<span id="cb31-499"><a href="#cb31-499" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_vary`</span> <span class="pp">|</span> Kontrolira redoslijed kombiniranja imena stupaca kad <span class="in">`names_from`</span> ima više varijabli ( može biti <span class="in">`fastest`</span> ili <span class="in">`slowest`</span> isto kao kod <span class="in">`pivot_longer()`</span>). <span class="pp">|</span></span>
<span id="cb31-500"><a href="#cb31-500" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_expand`</span> <span class="pp">|</span> Ako je TRUE, onda se kreiraju svi mogući stupci za sve vrijednosti u <span class="in">`names_from`</span> čak i ako neke kombinacije ne postoje. <span class="pp">|</span></span>
<span id="cb31-501"><a href="#cb31-501" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`names_repair`</span> <span class="pp">|</span> Kako se ponašati ako nastanu duplikati u imenima stupaca ( zadano je <span class="in">`check_unique`</span> koji javlja grešku. <span class="pp">|</span></span>
<span id="cb31-502"><a href="#cb31-502" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_from`</span> <span class="pp">|</span> Stupac čije vrijednosti želimo staviti u ćelije novih stupaca. <span class="pp">|</span></span>
<span id="cb31-503"><a href="#cb31-503" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_fill`</span> <span class="pp">|</span> Vrijednost kojom se popunjavaju ćelije ako nema podataka (<span class="in">`NA`</span>). <span class="pp">|</span></span>
<span id="cb31-504"><a href="#cb31-504" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`values_fn`</span> <span class="pp">|</span> Funkcija koja se koristi ako postoji više vrijednosti za istu kombinaciju identifikatora i naziva stupca (npr. <span class="in">`values_fn = mean`</span> računa prosjek ako ima više vrijednosti). <span class="pp">|</span></span>
<span id="cb31-505"><a href="#cb31-505" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`unused_fn`</span> <span class="pp">|</span> Funkcija koja određuje što raditi s varijablama koje nisu u <span class="in">`id_cols`</span>, <span class="in">`names_from`</span> ili <span class="in">`values_from`</span>. <span class="pp">|</span></span>
<span id="cb31-506"><a href="#cb31-506" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb31-507"><a href="#cb31-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-510"><a href="#cb31-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-511"><a href="#cb31-511" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb31-512"><a href="#cb31-512" aria-hidden="true" tabindex="-1"></a>imdb_top_10_wide <span class="ot">&lt;-</span> imdb_top_10_long <span class="sc">|&gt;</span></span>
<span id="cb31-513"><a href="#cb31-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb31-514"><a href="#cb31-514" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from  =</span> attribute,</span>
<span id="cb31-515"><a href="#cb31-515" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb31-516"><a href="#cb31-516" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-517"><a href="#cb31-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-518"><a href="#cb31-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-519"><a href="#cb31-519" aria-hidden="true" tabindex="-1"></a>Nakon primjene <span class="in">`pivot_wider()`</span> funkcije, dobivamo uređeni podatkovni okvir koji sadrži 12 stupaca: identifikacijske varijable "rank" i "movie" te deset novih stupaca koji predstavljaju filmske karakteristike ("release_year", "countries_of_origin", "director", "writers", "stars", "genres", "language", "runtime", "colour" i "budget"). Svaki od 10 redova predstavlja jedan film s njegovim kompletnim karakteristikama. Uređeni format omogućuje direktno usporedbu filmova prema bilo kojoj karakteristici, izračunavanje statističkih pokazatelja te stvaranje vizualizacija koje analiziraju povezanost između različitih varijabli poput godine proizvodnje i budžeta, što bi zahtijevalo složene operacije grupiranja u neuredno organiziranom dugačkom formatu.</span>
<span id="cb31-520"><a href="#cb31-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-523"><a href="#cb31-523" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-524"><a href="#cb31-524" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb31-525"><a href="#cb31-525" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(imdb_top_10_wide, <span class="dv">3</span>)</span>
<span id="cb31-526"><a href="#cb31-526" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-527"><a href="#cb31-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-528"><a href="#cb31-528" aria-hidden="true" tabindex="-1"></a>**4. Isti tip vrijednosti raspoređen u više stupaca**</span>
<span id="cb31-529"><a href="#cb31-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-530"><a href="#cb31-530" aria-hidden="true" tabindex="-1"></a>Četvrti tipičan oblik neurednih podataka nastaje kada se vrijednosti iste varijable raspoređuju u više stupaca umjesto da budu pohranjene u jednom stupcu. Ovaj problem često se javlja kada se podaci dizajniraju za lakši unos podataka, a ne za analizu što rezultira situacijom gdje jedna logička varijabla (na primjer, spisak scenarista) biva podijeljena u više fizičkih stupaca. Takva organizacija krši temeljna načela urednih podataka jer se ista vrsta informacije nalazi u različitim stupcima, što otežava analize koje zahtijevaju rad s tom varijablom kao cjelinom.</span>
<span id="cb31-531"><a href="#cb31-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-532"><a href="#cb31-532" aria-hidden="true" tabindex="-1"></a><span class="in">`writers_dataset`</span> je jedan takav podatkovni okvir. U tom su podatkovnom okviru informacije o scenaristima filmova podijeljene su u tri odvojena stupca: "writer_1", "writer_2" i "writer_3". Stupci "rank" i "movie" predstavljaju identifikacijske varijable, dok se imena scenarista nalaze u odvojenim stupcima ovisno o redoslijedu njihovog navođenja. Većina filmova ima dva ili tri scenarista što znači da se u podatkovnom okviru pojavljuju <span class="in">`NA`</span> vrijednosti kada film nema dovoljno scenarista za popunjavanje svih stupaca. Ovakav format otežava analize poput brojanja koliko filmova ima određeni scenarist ili grupiranja filmova prema scenaristu.</span>
<span id="cb31-533"><a href="#cb31-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-536"><a href="#cb31-536" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-537"><a href="#cb31-537" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb31-538"><a href="#cb31-538" aria-hidden="true" tabindex="-1"></a>writers_dataset</span>
<span id="cb31-539"><a href="#cb31-539" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-540"><a href="#cb31-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-541"><a href="#cb31-541" aria-hidden="true" tabindex="-1"></a>Problem se rješava pomoću funkcije <span class="in">`pivot_longer()`</span> uz dodatne argumente koji olakšavaju rad s nazivima stupaca koji imaju zajednički prefiks. Argument <span class="in">`cols = starts_with("writer_")`</span> specificira da se pivotiraju svi stupci koji počinju s "writer_", dok argument <span class="in">`names_prefix = "writer_"`</span> uklanja prefiks iz naziva stupaca prije pohranjivanja u novu varijablu. Argument <span class="in">`names_to = "writer_id"`</span> stvara novu varijablu koja označava redni broj scenarista, a <span class="in">`values_to = "writer"`</span> stvara varijablu koja sadrži imena scenarista. Argument <span class="in">`values_drop_na = TRUE`</span> uklanja redove s nedostajućim vrijednostima koji nastaju zbog nejednakog broja scenarista po filmovima.</span>
<span id="cb31-542"><a href="#cb31-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-545"><a href="#cb31-545" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-546"><a href="#cb31-546" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb31-547"><a href="#cb31-547" aria-hidden="true" tabindex="-1"></a>writers_dataset_tidy <span class="ot">&lt;-</span> writers_dataset <span class="sc">|&gt;</span></span>
<span id="cb31-548"><a href="#cb31-548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb31-549"><a href="#cb31-549" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"writer_"</span>),</span>
<span id="cb31-550"><a href="#cb31-550" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to   =</span> <span class="st">"writer_id"</span>,</span>
<span id="cb31-551"><a href="#cb31-551" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"writer_"</span>,</span>
<span id="cb31-552"><a href="#cb31-552" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to  =</span> <span class="st">"writer"</span>,</span>
<span id="cb31-553"><a href="#cb31-553" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb31-554"><a href="#cb31-554" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-555"><a href="#cb31-555" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-556"><a href="#cb31-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-557"><a href="#cb31-557" aria-hidden="true" tabindex="-1"></a>Nakon primjene <span class="in">`pivot_longer()`</span> funkcije dobivamo uređeni podatkovni okvir koji sadrži četiri stupca: "rank" (rang filma), "movie" (naziv filma), "writer_id" (redni broj scenarista) i "writer" (ime scenarista). Svaki red predstavlja kombinaciju film-scenarist što omogućuje jednostavno brojanje filmova po scenaristu, identifikaciju najproduktivnijih scenarista ili analizu suradnji između različitih scenarista. Uređeni format također olakšava spajanje s drugim podacima o scenaristima te stvaranje vizualizacija mreža suradnji, što bi bilo komplicirano ili nemoguće u neuredno organiziranom širom formatu s odvojenim stupcima za svakog scenarista.</span>
<span id="cb31-558"><a href="#cb31-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-561"><a href="#cb31-561" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-562"><a href="#cb31-562" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb31-563"><a href="#cb31-563" aria-hidden="true" tabindex="-1"></a>writers_dataset_tidy</span>
<span id="cb31-564"><a href="#cb31-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-565"><a href="#cb31-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-566"><a href="#cb31-566" aria-hidden="true" tabindex="-1"></a>**5. Više vrijednosti u jednoj ćeliji**</span>
<span id="cb31-567"><a href="#cb31-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-568"><a href="#cb31-568" aria-hidden="true" tabindex="-1"></a>Ovaj oblik neurednih podataka predstavlja pojednostavljenu verziju prethodnog problema gdje se u jednoj ćeliji nalaze vrijednosti koje pripadaju različitim varijablama, odvojene određenim separatorom. Problem nastaje kada se dvije logički različite varijable kombiniraju u jednu kolonu radi uštede prostora ili zbog ograničenja u sustavima za pohranu podataka. Ovakva organizacija krši temeljna načela urednih podataka jer svaka ćelija treba sadržavati vrijednost samo jedne varijable. Kombiniranje različitih tipova informacija u istoj ćeliji otežava sve oblike analize jer je potrebno najprije izdvojiti pojedinačne komponente prije bilo kakve obrade podataka.</span>
<span id="cb31-569"><a href="#cb31-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-570"><a href="#cb31-570" aria-hidden="true" tabindex="-1"></a>U primjeru <span class="in">`imdb_combined_variables`</span>, stupac "director_budget" sadrži kombinaciju imena redatelja i budžeta filma odvojena podvlakom. Na primjer, vrijednost "Frank Darabont_25000000" predstavlja dva različita podatka: ime redatelja "Frank Darabont" i budžet filma od 25 milijuna dolara. Stupci "rank" i "movie" već su u ispravnom formatu jer sadrže samo jednu vrstu informacije po ćeliji. Ovakav format onemogućuje direktno sortiranje filmova prema budžetu ili grupiranje prema redatelju jer su te informacije zakodane u kombiniranoj ćeliji koja zahtijeva dodatnu obradu.</span>
<span id="cb31-571"><a href="#cb31-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-574"><a href="#cb31-574" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-575"><a href="#cb31-575" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb31-576"><a href="#cb31-576" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables</span>
<span id="cb31-577"><a href="#cb31-577" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-578"><a href="#cb31-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-579"><a href="#cb31-579" aria-hidden="true" tabindex="-1"></a>Problem se rješava pomoću funkcije <span class="in">`separate()`</span> iz <span class="in">`tidyr`</span> paketa koja omogućuje dijeljenje jednog stupca u dva ili više stupaca na temelju određenog separatora. Funkcija koristi argument <span class="in">`col = director_budget`</span> za specificiranje stupca koji se želi podijeliti, <span class="in">`into = c("director", "budget")`</span> za definiranje naziva novih stupaca koji će nastati dijeljenjem i <span class="in">`sep = "_"`</span> za navođenje separatora koji razdvaja različite vrijednosti. Funkcija <span class="in">`separate()`</span> automatski prepoznaje poziciju separatora u svakoj ćeliji i dijeli sadržaj na odgovarajući način, stvarajući dva nova stupca s jasno odvojenima informacijama.</span>
<span id="cb31-580"><a href="#cb31-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-581"><a href="#cb31-581" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon=false collapse="true" title="Funkcija: separate()"}</span>
<span id="cb31-582"><a href="#cb31-582" aria-hidden="true" tabindex="-1"></a><span class="in">`separate()`</span> je ključna funkcija <span class="in">`tidyr`</span> paketa koja se koristi kada imamo više varijabli spremljenih u jednoj ćeliji, a želimo ih razdvojiti u više stupaca. Funkcija može imati slijedeće argumente:</span>
<span id="cb31-583"><a href="#cb31-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-584"><a href="#cb31-584" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Argument <span class="pp">|</span> Objašnjenje <span class="pp">|</span></span>
<span id="cb31-585"><a href="#cb31-585" aria-hidden="true" tabindex="-1"></a><span class="pp">|---|---|</span></span>
<span id="cb31-586"><a href="#cb31-586" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`data`</span> <span class="pp">|</span> Podatkovni okvir kojem mijenjamo format. <span class="pp">|</span></span>
<span id="cb31-587"><a href="#cb31-587" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`col`</span> <span class="pp">|</span> Naziv stupca koji želimo razdvojiti. <span class="pp">|</span></span>
<span id="cb31-588"><a href="#cb31-588" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`into`</span> <span class="pp">|</span> Imena novih stupaca u koje želimo rasporediti rezultate. <span class="pp">|</span></span>
<span id="cb31-589"><a href="#cb31-589" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`sep`</span> <span class="pp">|</span> Kako razdvajamo vrijednosti u stupcu (npr. "_", "-"). <span class="pp">|</span></span>
<span id="cb31-590"><a href="#cb31-590" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`remove`</span> <span class="pp">|</span> Ako je <span class="in">`TRUE`</span> (zadano), onda se originalni stupac briše nakon razdvajanja, a ako je <span class="in">`FALSE`</span>, onda originalni stupac ostaje u tablici zajedno s novim stupcima. <span class="pp">|</span></span>
<span id="cb31-591"><a href="#cb31-591" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`convert`</span> <span class="pp">|</span> Ako je <span class="in">`TRUE`</span>, onda pokušava automatski pretvoriti nove stupce u odgovarajući tip podataka (npr. "1994" u integer), a ako je <span class="in">`FALSE`</span>, koji je i zadani, onda će svi novi stupci biti character. <span class="pp">|</span></span>
<span id="cb31-592"><a href="#cb31-592" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`extra`</span> <span class="pp">|</span> Što napraviti ako se vrijednost razdvoji na više dijelova nego što smo naveli u <span class="in">`into`</span>. Može biti: <span class="in">`warn`</span> (zadano) koje izdaje upozorenje i spaja višak u zadnji stupac, <span class="in">`drop`</span> koje odbacuje višak i <span class="in">`merge`</span> koje spaja višak u zadnji stupac bez upozorenja. <span class="pp">|</span></span>
<span id="cb31-593"><a href="#cb31-593" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`fill`</span> <span class="pp">|</span> Što napraviti ako se vrijednost razdvoji na manje dijelova nego što smo naveli u <span class="in">`into`</span>. Može biti: <span class="in">`warn`</span> (zadano) koje izdaje upozorenje, a prazna mjesta popunjava s <span class="in">`NA`</span>, <span class="in">`right`</span> kojim se praznine dodaju na kraj i <span class="in">`left`</span> kojim se praznine dodaju na početak. <span class="pp">|</span></span>
<span id="cb31-594"><a href="#cb31-594" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb31-595"><a href="#cb31-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-598"><a href="#cb31-598" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-599"><a href="#cb31-599" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb31-600"><a href="#cb31-600" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables_tidy <span class="ot">&lt;-</span> imdb_combined_variables <span class="sc">|&gt;</span></span>
<span id="cb31-601"><a href="#cb31-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb31-602"><a href="#cb31-602" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> director_budget,</span>
<span id="cb31-603"><a href="#cb31-603" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"director"</span>, <span class="st">"budget"</span>),</span>
<span id="cb31-604"><a href="#cb31-604" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"_"</span></span>
<span id="cb31-605"><a href="#cb31-605" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-606"><a href="#cb31-606" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-607"><a href="#cb31-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-608"><a href="#cb31-608" aria-hidden="true" tabindex="-1"></a>Nakon primjene <span class="in">`separate()`</span> funkcije dobivamo uređeni podatkovni okvir koji sadrži četiri stupca: "rank" (rang filma), "movie" (naziv filma), "director" (ime redatelja) i "budget" (budžet filma). Svaki red predstavlja jedan film s jasno odvojenima karakteristikama, pri čemu svaki stupac sadrži samo jedan tip informacije. Uređeni format omogućuje direktne analize poput usporedbe budžeta različitih filmova, identifikacije najskupljih produkcija, grupiranja filmova prema redatelju ili analize povezanosti između budžeta i ranga filma na ljestvici.</span>
<span id="cb31-609"><a href="#cb31-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-612"><a href="#cb31-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-613"><a href="#cb31-613" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb31-614"><a href="#cb31-614" aria-hidden="true" tabindex="-1"></a>imdb_combined_variables_tidy</span>
<span id="cb31-615"><a href="#cb31-615" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-616"><a href="#cb31-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-617"><a href="#cb31-617" aria-hidden="true" tabindex="-1"></a>**6. Ista varijabla raspodijeljena u sva stupca**</span>
<span id="cb31-618"><a href="#cb31-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-619"><a href="#cb31-619" aria-hidden="true" tabindex="-1"></a>Ovaj oblik neurednih podataka nastaje kada se logički jedna varijabla nepotrebno dijeli u više stupaca. Problem se javlja kada se podaci organiziraju prema komponentama varijable umjesto prema samoj varijabli kao cjelini. Iako ovakva organizacija može biti korisna u specifičnim slučajevima kada trebamo raditi s pojedinim komponentama, češće otežava analizu jer zahtijeva kombiniranje informacija iz više stupaca za dobivanje potpune vrijednosti varijable. Ovakav pristup posebno je problematičan za analize koje tretiraju varijablu kao cjelinu.</span>
<span id="cb31-620"><a href="#cb31-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-621"><a href="#cb31-621" aria-hidden="true" tabindex="-1"></a>U priloženom primjeru <span class="in">`director_names_dataset`</span> informacija o imenu redatelja podijeljena je u dva odvojena stupca, "director_first_name" koji sadrži ime i "director_last_name" koji sadrži prezime redatelja. Na primjer, za film "The Shawshank Redemption", ime redatelja "Frank Darabont" podijeljeno je na "Frank" u prvom stupcu i "Darabont" u drugom stupcu. Iako oba dijela logički pripadaju istoj varijabli "director_name", oni su tretirani kao zasebne varijable. Ovakav format otežava pretraživanje filmova prema redatelju, sortiranje prema abecednom redu ili usporedbu s drugim izvorima podataka gdje su imena redatelja predstavljena kao jedna cjelina.</span>
<span id="cb31-622"><a href="#cb31-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-625"><a href="#cb31-625" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-626"><a href="#cb31-626" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled neurednog oblika podatkovnog okvira</span></span>
<span id="cb31-627"><a href="#cb31-627" aria-hidden="true" tabindex="-1"></a>director_names_dataset</span>
<span id="cb31-628"><a href="#cb31-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-629"><a href="#cb31-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-630"><a href="#cb31-630" aria-hidden="true" tabindex="-1"></a>Problem se rješava pomoću funkcije <span class="in">`unite()`</span> iz <span class="in">`tidyr`</span> paketa koja omogućuje spajanje više stupaca u jedan stupac. Funkcija koristi argument <span class="in">`col = "director_name"`</span> za specificiranje naziva novog stupca koji će nastati spajanjem, zatim navodi nazive stupaca koji se žele spojiti (director_first_name, director_last_name), te argument sep = " " koji definira separator koji će se umetnuti između spojenih vrijednosti. Funkcija unite() automatski kombinira vrijednosti iz specificiranih stupaca redoslijedom kojim su navedeni, stvarajući jednu koherentnu varijablu koja predstavlja punu informaciju.</span>
<span id="cb31-631"><a href="#cb31-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-632"><a href="#cb31-632" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip icon=false collapse="true" title="Funkcija: unite()"}</span>
<span id="cb31-633"><a href="#cb31-633" aria-hidden="true" tabindex="-1"></a>Funkcija <span class="in">`unite()`</span> koristi se za spajanje više stupaca u jedan stupac u podatkovnom okviru. Ovo je suprotna operacija od <span class="in">`separate()`</span> funkcije. Funkcija može imati slijedeće argumente:</span>
<span id="cb31-634"><a href="#cb31-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-635"><a href="#cb31-635" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Argument <span class="pp">|</span> Objašnjenje <span class="pp">|</span></span>
<span id="cb31-636"><a href="#cb31-636" aria-hidden="true" tabindex="-1"></a><span class="pp">|---|---|</span></span>
<span id="cb31-637"><a href="#cb31-637" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`data`</span> <span class="pp">|</span> Podatkovni okvir na kojem se izvršava operacija spajanja stupaca. <span class="pp">|</span></span>
<span id="cb31-638"><a href="#cb31-638" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`col`</span> <span class="pp">|</span> Naziv novog stupca koji će nastati spajanjem postojećih stupaca. Može se navesti kao string (u navodnicima) ili kao simbol (bez navodnika). <span class="pp">|</span></span>
<span id="cb31-639"><a href="#cb31-639" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`...`</span> <span class="pp">|</span> Stupci koji se žele spojiti. <span class="pp">|</span></span>
<span id="cb31-640"><a href="#cb31-640" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`sep`</span> <span class="pp">|</span> Separator koji se umeće između vrijednosti prilikom spajanja. <span class="pp">|</span></span>
<span id="cb31-641"><a href="#cb31-641" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`remove`</span> <span class="pp">|</span> Logička vrijednost koja određuje treba li ukloniti originalne stupce iz rezultata. Zadana vrijednost je <span class="in">`TRUE`</span> što znači da se originalni stupci brišu nakon spajanja. Ako postavite <span class="in">`FALSE`</span>, zadržat ćete i originalne i novi spojeni stupac. <span class="pp">|</span></span>
<span id="cb31-642"><a href="#cb31-642" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> <span class="in">`na.rm`</span> <span class="pp">|</span> Logička vrijednost koja određuje treba li ukloniti nedostajuće vrijednosti (<span class="in">`NA`</span>) prije spajanja. Ako je <span class="in">`TRUE`</span>, <span class="in">`NA`</span> vrijednosti se ignoriraju prilikom spajanja. Zadana vrijednost je <span class="in">`FALSE`</span>. <span class="pp">|</span></span>
<span id="cb31-643"><a href="#cb31-643" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb31-644"><a href="#cb31-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-647"><a href="#cb31-647" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-648"><a href="#cb31-648" aria-hidden="true" tabindex="-1"></a><span class="co"># Uređivanje podatkovnog okvira</span></span>
<span id="cb31-649"><a href="#cb31-649" aria-hidden="true" tabindex="-1"></a>director_names_dataset_tidy <span class="ot">&lt;-</span> director_names_dataset <span class="sc">|&gt;</span></span>
<span id="cb31-650"><a href="#cb31-650" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(</span>
<span id="cb31-651"><a href="#cb31-651" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="st">"director_name"</span>,</span>
<span id="cb31-652"><a href="#cb31-652" aria-hidden="true" tabindex="-1"></a>    director_first_name,</span>
<span id="cb31-653"><a href="#cb31-653" aria-hidden="true" tabindex="-1"></a>    director_last_name,</span>
<span id="cb31-654"><a href="#cb31-654" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" "</span></span>
<span id="cb31-655"><a href="#cb31-655" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-656"><a href="#cb31-656" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb31-657"><a href="#cb31-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-658"><a href="#cb31-658" aria-hidden="true" tabindex="-1"></a>Nakon primjene <span class="in">`unite()`</span> funkcije dobivamo uređeni podatkovni okvir koji sadrži četiri stupca: "rank" (rang filma), "movie" (naziv filma) i novi "director_name" (puno ime redatelja). Svaki red predstavlja jedan film s kompletnim imenom redatelja u jednom stupcu što omogućuje jednostavno sortiranje filmova prema imenima redatelja, filtriranje prema specifičnim redateljima te spajanje s drugim izvorima podataka koji koriste puna imena. Uređeni format također olakšava analize poput identifikacije najproduktivnijih redatelja, usporedbe opusa različitih redatelja ili stvaranja vizualizacija koje prikazuju distribuciju filmova prema redateljima, što bi zahtijevalo složene operacije spajanja stringova u neuredno organiziranom formatu s podijeljenim imenima.</span>
<span id="cb31-659"><a href="#cb31-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-662"><a href="#cb31-662" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-663"><a href="#cb31-663" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregled urednog oblika podatkovnog okvira</span></span>
<span id="cb31-664"><a href="#cb31-664" aria-hidden="true" tabindex="-1"></a>director_names_dataset_tidy</span>
<span id="cb31-665"><a href="#cb31-665" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>