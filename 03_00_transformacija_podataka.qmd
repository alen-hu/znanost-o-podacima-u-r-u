---
title: "Transformacija podataka"
description: ""
number-sections: true
title-block-banner: "#8B3A62"
title-block-banner-color: "white"
lang: hr
crossref:
  tbl-title: "Tablica"
  fig-title: "Slika"
---

```{r}
#| include: false

# Aktiviranje paketa
library(tidyverse)
library(stringr)
library(RKaggle)
library(forcats)
library(lubridate)
library(hms)
```

```{r}
#| include: false

# Učitavanje podataka
poke_raw <- get_dataset("abcsds/pokemon")

# Prilagodba podatkovnog okvira
pokemon_dataset <- poke_raw |>
  as_tibble() |>
  rename(
    id = `#`,
    name = `Name`,
    type_1 = `Type 1`,
    type_2 = `Type 2`,
    total = `Total`,
    attack = `Attack`,
    defense = `Defense`,
    special_attack = `Sp. Atk`,
    special_defense = `Sp. Def`,
    speed = `Speed`,
    generation = `Generation`,
    legendary = `Legendary`
  ) |>
  mutate(
    across(c(`type_1`, `type_2`, generation), as.character),
    across(legendary, as.logical),
  ) |>
  mutate(across(where(is.character), ~ str_to_lower(.x))) |>
  mutate(
    `type_1` = fct_infreq(`type_1`),
    `type_2` = fct_infreq(`type_2`),
    `generation` = fct_infreq(`generation`)
  )
```

::: {.callout-important icon="false" collapse="true" title="Podaci korišteni u poglavlju"}
U svrhu ilustracije svih postupaka transformacije podataka u ovom poglavlju koristit će se skup podataka **Pokemon with stats** autora Alberta Barradasa, objavljen na platformi [Kaggle](https://www.kaggle.com/datasets/abcsds/pokemon) 2016. godine. Ovaj skup podataka sadrži informacije o 721 Pokemonu, uključujući njihove detaljne statistike i vrste. Podaci su kvalitetan primjer za demonstraciju različitih tehnika transformacije podataka `dplyr` paketom, a u nastavku će poglavlja svi primjeri transformacije podataka biti će temeljeni isključivo na ovom skupu podataka.

Podaci su spremljeni u podatkovnom okviru`pokemon_dataset` koji sadrži 271 Pokemona i 13 varijabli:

-   "id" - redni broj i jedinstveni identifikator svakog Pokemona (numerička varijabla),

-   "name" - ime Pokemona (tekstualna varijabla),

-   "type_1" - primarna vrsta Pokemona (faktor),

-   "type_2" - sekundarna vrsta Pokemona (faktor),

-   "total" - ukupan zbroj svih osnovnih statistika Pokemona (numerička varijabla),

-   "HP" - životni koji označavaju količinu štete koju Pokemon može podnijeti prije nego bude poražen (numerička varijabla),

-   "attack" - napadačka statistika (numerička varijabla),

-   "defense" - obrambena statistika (numerička varijabla),

-   "special_attack" - snaga posebnog napada (numerička varijabla),

-   "special_defense" - snaga posebne obrane (numerička varijabla),

-   "speed" - brzina Pokemona (numerička varijabla),

-   "generation" - generacija u kojoj je Pokemon predstavljen (faktor),

-   "legendary" - je li Pokemon legendaran (logička varijabla).

```{r}
#| echo: false
str(pokemon_dataset, 5)
```
:::

**Transformacija podataka** (*data transformation*) predstavlja fazu u radu s podacima koja se odnosi na sveobuhvatan proces sistematskog mijenjanja, prestrukturiranja i preoblikovanja sirovih podataka u oblik koji je prikladniji za analizu, modeliranje i donošenje odluka. Transformacija podataka je proces pripreme podataka za vizualizaciju i tehnike statističke interpretacije.

Transformacija označava skup tehnika i postupaka kojima se podatci organiziraju, mijenjaju i pripremaju za analizu. Riječ je o jednoj od najvažnijih faza u analitičkom procesu jer se stvarna korisnost podataka često otkriva tek nakon što se podaci temeljito transformiraju, odnosno kada se strukturiraju i prikažu na način koji odgovara svrsi analize. Transformacija podataka, dakle, označava izmjenu strukture, sadržaja ili organizacije podatkovnog skupa bez nužnog mijenjanja samih vrijednosti varijabli.

Tehnike transformacije podatakamogu se organizirati u nekoliko glavnih kategorija:

**1. Pridruživanje i kombiniranje podataka (*Data Joining*):** Analiza podataka rijetko se oslanja na jedan izvor podataka, nego je često potrebno raditi s više podatkovnih okvira. Zato je jedan od temeljnih koraka u transformaciji kombiniranje bliskih podataka iz različitih izvora. Ovo uključuje različite vrste spajanja podatkovnih okvira, a koje omogućuju kombiniranje informacija na temelju zajedničkih ključeva.

**2. Manipulacija podataka (*Data Manipulation*):** Manipulacija podataka obuhvaća osnovne operacije potrebne za upravljanje strukturom i sadržajem podatkovnih okvira. Paket `dplyr` predstavlja gramatiku za manipulaciju podataka pružajući konzistentan skup glagola koji pomažu u rješavanju najčešćih izazova manipulacije podataka. Osnovne operacije manipulacije uključuju rad s redovima i stupcima kao što su filtriranje opažanja na temelju određenih uvjeta, odabir specifičnih stupaca, sortiranje podataka, dodavanje novih varijabli i druge.

**3. Nedostajuće vrijednosti (*Missing Values*):** Nedostajuće vrijednosti predstavljaju čest izazov i zahtijevaju pažljiv pristup u transformaciji. Pritom rad s nedostajućim vrijednostima uključuje prepoznavanje različitih oblika nedostajućih podataka i razumijevanje uzroka njihova nastanka te pravilno postupanje s njima ovisno o prirodi podataka, uzroku njihovog javljanja i željenoj analizi.

**4. Numerički podaci:** Numerički podaci predstavljaju temelj kvantitativne analize i zahtijevaju specijalizirane tehnike transformacije za optimalno iskorištavanje u analizi. Numeričke transformacije uključuju različite tehnike rada s brojevima, od kojih su najvažnije: osnovne matematičke operacije (zbrajanje, oduzimanje, množenje i dijeljenje); statistička računanja (mjere centralne tendencije - prosjek, medijan i mod); mjere varijabilnosti (standardna devijacija, varijanca i raspon te kvantili i percentili); matematičke funkcije logaritma, eksponencijalnih funkcija, trigonometrijskih funkcija i potenciranja; zaokruživanje i formatiranje numeričkih podataka; konverzija numeričkih tipova između cijelih brojeva, decimalnih brojeva i drugih numeričkih formata.

**5. Logičke vrijednosti (*Logical vectors*):** Logički vektori predstavljaju temeljni alat za filtriranje, uvjetno procesiranje i kreiranje binarnih varijabli u transformaciji podataka. One mogu poprimiti samo dvije vrijednosti, `TRUE` i `FALSE`, a koriste se za evaluaciju uvjeta i donošenje odluka o tome koji će se podaci obraditi ili transformirati. Logičke vrijednosti nastaju kao rezultat usporedbi pomoću operatora poput `==`, `!=`, `>`, `<`, `>=` i `<=`.

**6. Faktori (*Factors*):** Faktori predstavljaju specijalizirani tip podataka za rukovanje kategorijalnim vrijednostima. Riječ je o tekstualnim kategorijama koje mogu imati ograničen broj mogućnosti, primjerice proizvođača neke odjeće ili fakulteta na kojem studenti studiraju. Upravljanje kategorijskim podacima uključuje definiranje razina faktora, njihov redoslijed i označavanja, a što je ključno za pravilnu interpretaciju i analizu kategorijskih podataka.

**7. Nizovi (*Strings*):** Nizovi znakova predstavljaju tekstualne podatke koji mogu uključivati nazive, opise, kategorije, adrese, datume u tekstualnom formatu i mnoge druge vrste informacija koje nisu numeričke prirode. Rad s nizovima znakova zahtijeva specijalizirane tehnike za njihovu manipulaciju, čišćenje i transformaciju kako bi podaci postali korisni za analizu. Osnovne operacije s nizovima uključuju spajanje tekstualnih vrijednosti, izdvajanje dijelova teksta, zamjenu određenih znakova ili riječi, promjenu velikih i malih slova, te uklanjanje nepotrebnih razmaka. Ove operacije često su neophodne jer sirovi tekstualni podaci dolaze u nekonzistentnim formatima s tipografskim greškama ili dodatnim znakovima koji otežavaju analizu.

**8. Regularni izrazi (*Regular expressions*):** Regularni izrazi su alat za prepoznavanje i manipulaciju složenih uzoraka u tekstualnim podacima. Oni koriste specijalne znakove i simbole za opisivanje uzoraka u tekstu, a mogu se koristiti za pronalaženje, primjerice, svih email adresa u tekstu, izdvajanje brojeva telefona ili identifikaciju svih riječi koje počinju velikim slovom. Osnovna sintaksa regularnih izraza uključuje simbole poput točke (`.`) koja predstavlja bilo koji znak, zvjezdice (`*`) koja označava ponavljanje, plus znaka (`+`) za jedno ili više ponavljanja te uglate zagrade (`[]`) za definiranje skupa dozvoljenih znakova.

**9. Datum i vrijeme:** Temporalni podaci zahtijevaju specijalizirane tehnike transformacije zbog složenosti vremenskih formata i računanja. Rad s takvim podacima uključuje pretvaranje tekstualnih reprezentacija datuma iz različitih formata u standardne tipove podataka koji omogućuju temporalne kalkulacije. Temporalna računanja omogućuju izračunavanje razlika između datuma, dodavanje ili oduzimanje vremenskih perioda, te ekstraktiranje komponenti datuma poput godine, mjeseca ili dana u tjednu.
